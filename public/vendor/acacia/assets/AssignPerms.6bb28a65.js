import{d as A,c as r,f as n,e as c,g as d,F as k,m as v,o as u,t as x,v as y,p as C,a0 as w,h as $}from"./main.9e765f7d.js";import{s as m}from"./button.esm.a5ac1061.js";import{s as V}from"./checkbox.esm.12d385d5.js";import"./ripple.esm.1fe20658.js";const P={class:"font-black text-xl mb-2 flex flex-wrap justify-between items-center"},R=n("h2",{class:""},"Assign Permissions",-1),j={class:"space-x-2"},B=n("hr",null,null,-1),O={class:"p-4 mt-2 md:grid grid-cols-2 border rounded"},F={class:"flex space-x-2 flex-wrap"},N={class:"font-black text-xl pb-2"},U={class:"space-x-2"},q=["for"],M=A({props:{permissions:Object,role:{required:!0,type:Object}},emits:["toggle-success","toggle-error","group-toggle-success"],setup(b,{emit:p}){const _=b,g=async(l,t=!1,o=!0)=>{var s;w.post($("api.v1.roles.role.assign-permission",(s=_.role)==null?void 0:s.id),{permission:l,all:t,checked:o}).then(e=>{var a;p("toggle-success",(a=e.data)==null?void 0:a.message)}).catch(e=>{var a,i;p("toggle-error",((i=(a=e.response)==null?void 0:a.data)==null?void 0:i.message)||e.message||e)})},f=async l=>{await g(null,!0,l),p("group-toggle-success",`All permissions have been ${l?"Assigned.":"Revoked."}`)},h=async(l,t)=>{for(const o in l){if(!l.hasOwnProperty(o))return!1;let s=l[o];s.checked&&!t?(s.checked=!1,await g(s)):t&&!s.checked&&(s.checked=!0,await g(s))}p("group-toggle-success",`All permissions in the group have been ${t?"Assigned.":"Revoked."}`)};return(l,t)=>(u(),r("div",null,[n("div",P,[R,n("div",j,[c(d(m),{class:"p-button-success",icon:"pi pi-check",type:"button",onClick:t[0]||(t[0]=o=>f(!0)),label:"Assign All"}),c(d(m),{class:"p-button-danger text-white",type:"button",onClick:t[1]||(t[1]=o=>f(!1)),icon:"pi pi-ban",label:"Revoke All"})])]),B,n("div",O,[(u(!0),r(k,null,v(b.permissions,(o,s)=>(u(),r("div",{key:s,class:"border-b-2 mb-2"},[n("div",F,[n("h3",N,x(s),1),n("div",U,[c(d(m),{onClick:y(e=>h(o,!0),["prevent"]),class:"p-button-success p-button-sm text-sm",label:"Assign",icon:"pi pi-check"},null,8,["onClick"]),c(d(m),{onClick:y(e=>h(o,!1),["prevent"]),class:"p-button-danger p-button-sm text-sm",label:"Revoke",icon:"pi pi-ban"},null,8,["onClick"])])]),(u(!0),r(k,null,v(o,(e,a)=>(u(),r("div",{style:{cursor:"pointer"},key:a,class:"sm:col-span-4 sm:pl-10 flex border-b border-gray-100 py-3 items-center text-gray-600"},[c(d(V),{id:e.name,onChange:i=>g(e),name:e.name,modelValue:e.checked,"onUpdate:modelValue":i=>e.checked=i,binary:!0},null,8,["id","onChange","name","modelValue","onUpdate:modelValue"]),n("label",{style:{cursor:"pointer"},for:e.name,class:C(["text-gray-400 hover:text-gray-600","inline-block font-black text-xl ml-3"])},x(e.title),9,q)]))),128))]))),128))])]))}});export{M as default};
