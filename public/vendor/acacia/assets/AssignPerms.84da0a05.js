import{aa as v,o as h,v as A,j as i,V as w,e as B,i as k,k as n,m,F as x,t as y,z as V,B as C,x as $,a as j,d as F}from"./vendor.05df324e.js";import{s as g}from"./button.esm.cbb15c31.js";import"./ripple.esm.574b991d.js";var _={name:"Checkbox",inheritAttrs:!1,emits:["click","update:modelValue","change","input"],props:{value:null,modelValue:null,binary:Boolean,class:null,style:null,trueValue:{type:null,default:!0},falseValue:{type:null,default:!1}},data(){return{focused:!1}},methods:{onClick(r){if(!this.$attrs.disabled){let e;this.binary?e=this.checked?this.falseValue:this.trueValue:this.checked?e=this.modelValue.filter(d=>!v.equals(d,this.value)):e=this.modelValue?[...this.modelValue,this.value]:[this.value],this.$emit("click",r),this.$emit("update:modelValue",e),this.$emit("change",r),this.$emit("input",e),this.$refs.input.focus()}},onFocus(){this.focused=!0},onBlur(){this.focused=!1}},computed:{checked(){return this.binary?this.modelValue===this.trueValue:v.contains(this.value,this.modelValue)},containerClass(){return["p-checkbox p-component",this.class,{"p-checkbox-checked":this.checked,"p-checkbox-disabled":this.$attrs.disabled,"p-checkbox-focused":this.focused}]}}};const P={class:"p-hidden-accessible"};function O(r,e,d,p,f,l){return h(),A("div",{class:l.containerClass,onClick:e[3]||(e[3]=s=>l.onClick(s)),style:d.style},[i("div",P,[i("input",w({ref:"input",type:"checkbox",checked:l.checked,value:d.value},r.$attrs,{onFocus:e[1]||(e[1]=(...s)=>l.onFocus&&l.onFocus(...s)),onBlur:e[2]||(e[2]=(...s)=>l.onBlur&&l.onBlur(...s))}),null,16,["checked","value"])]),i("div",{ref:"box",class:["p-checkbox-box",{"p-highlight":l.checked,"p-disabled":r.$attrs.disabled,"p-focus":f.focused}],role:"checkbox","aria-checked":l.checked},[i("span",{class:["p-checkbox-icon",{"pi pi-check":l.checked}]},null,2)],10,["aria-checked"])],6)}_.render=O;const R={class:"font-black text-xl mb-2 flex flex-wrap justify-between items-center"},U=n("h2",{class:""},"Assign Permissions",-1),q={class:"space-x-2"},z=n("hr",null,null,-1),M={class:"p-4 mt-2 md:grid grid-cols-2 border rounded"},N={class:"flex space-x-2 flex-wrap"},D={class:"font-black text-xl pb-2"},E={class:"space-x-2"},L=["for"],K=B({props:{permissions:Object,role:{required:!0,type:Object}},emits:["toggle-success","toggle-error","group-toggle-success"],setup(r,{emit:e}){const d=r,p=async(s,o=!1,c=!0)=>{var a;j.post(F("api.v1.roles.role.assign-permission",(a=d.role)==null?void 0:a.id),{permission:s,all:o,checked:c}).then(t=>{var u;e("toggle-success",(u=t.data)==null?void 0:u.message)}).catch(t=>{var u,b;e("toggle-error",((b=(u=t.response)==null?void 0:u.data)==null?void 0:b.message)||t.message||t)})},f=async s=>{await p(null,!0,s),e("group-toggle-success",`All permissions have been ${s?"Assigned.":"Revoked."}`)},l=async(s,o)=>{for(const c in s){if(!s.hasOwnProperty(c))return!1;let a=s[c];a.checked&&!o?(a.checked=!1,await p(a)):o&&!a.checked&&(a.checked=!0,await p(a))}e("group-toggle-success",`All permissions in the group have been ${o?"Assigned.":"Revoked."}`)};return(s,o)=>(h(),k("div",null,[n("div",R,[U,n("div",q,[i(m(g),{class:"p-button-success",icon:"pi pi-check",type:"button",onClick:o[0]||(o[0]=c=>f(!0)),label:"Assign All"}),i(m(g),{class:"p-button-danger text-white",type:"button",onClick:o[1]||(o[1]=c=>f(!1)),icon:"pi pi-ban",label:"Revoke All"})])]),z,n("div",M,[(h(!0),k(x,null,y(r.permissions,(c,a)=>(h(),k("div",{key:a,class:"border-b-2 mb-2"},[n("div",N,[n("h3",D,V(a),1),n("div",E,[i(m(g),{onClick:C(t=>l(c,!0),["prevent"]),class:"p-button-success p-button-sm text-sm",label:"Assign",icon:"pi pi-check"},null,8,["onClick"]),i(m(g),{onClick:C(t=>l(c,!1),["prevent"]),class:"p-button-danger p-button-sm text-sm",label:"Revoke",icon:"pi pi-ban"},null,8,["onClick"])])]),(h(!0),k(x,null,y(c,(t,u)=>(h(),k("div",{style:{cursor:"pointer"},key:u,class:"sm:col-span-4 sm:pl-10 flex border-b border-gray-100 py-3 items-center text-gray-600"},[i(m(_),{id:t.name,onChange:b=>p(t),name:t.name,modelValue:t.checked,"onUpdate:modelValue":b=>t.checked=b,binary:!0},null,8,["id","onChange","name","modelValue","onUpdate:modelValue"]),n("label",{style:{cursor:"pointer"},for:t.name,class:$(["text-gray-400 hover:text-gray-600","inline-block font-black text-xl ml-3"])},V(t.title),9,L)]))),128))]))),128))])]))}});export{K as default};
