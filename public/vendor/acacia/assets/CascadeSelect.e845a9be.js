import{Z as h,aa as o,a5 as r,ad as v,i as p,k as n,q as b,x as d,v as m,j as f,w as L,K as g,W as C,r as S,o as c,y as O,z as V,s as k}from"./vendor.05df324e.js";import{O as w}from"./overlayeventbus.esm.d529c5a8.js";import x from"./CascadeSelectSub.baefb4ca.js";import{_ as G}from"./plugin-vue_export-helper.21dcd24c.js";import"./ripple.esm.574b991d.js";const z={name:"CascadeSelect",emits:["update:modelValue","change","group-change","before-show","before-hide","hide","show"],data(){return{selectionPath:null,focused:!1,overlayVisible:!1,dirty:!1}},props:{modelValue:null,options:Array,optionLabel:String,optionValue:String,optionGroupLabel:String,optionGroupChildren:Array,placeholder:String,disabled:Boolean,dataKey:null,inputId:String,tabindex:String,ariaLabelledBy:null,appendTo:{type:String,default:"body"},panelClass:null,loading:{type:Boolean,default:!1},loadingIcon:{type:String,default:"pi pi-spinner pi-spin"}},outsideClickListener:null,scrollHandler:null,resizeListener:null,overlay:null,beforeUnmount(){this.unbindOutsideClickListener(),this.unbindResizeListener(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.overlay&&(h.clear(this.overlay),this.overlay=null)},mounted(){this.updateSelectionPath()},watch:{modelValue(){this.updateSelectionPath()}},methods:{onOptionSelect(e){this.$emit("update:modelValue",e.value),this.$emit("change",e),this.hide(),this.$refs.focusInput.focus()},onOptionGroupSelect(e){this.dirty=!0,this.$emit("group-change",e)},getOptionLabel(e){return this.optionLabel?o.resolveFieldData(e,this.optionLabel):e},getOptionValue(e){return this.optionValue?o.resolveFieldData(e,this.optionValue):e},getOptionGroupChildren(e,t){return o.resolveFieldData(e,this.optionGroupChildren[t])},isOptionGroup(e,t){return Object.prototype.hasOwnProperty.call(e,this.optionGroupChildren[t])},updateSelectionPath(){let e;if(this.modelValue!=null&&this.options){for(let t of this.options)if(e=this.findModelOptionInGroup(t,0),e)break}this.selectionPath=e},findModelOptionInGroup(e,t){if(this.isOptionGroup(e,t)){let l;for(let u of this.getOptionGroupChildren(e,t))if(l=this.findModelOptionInGroup(u,t+1),l)return l.unshift(e),l}else if(o.equals(this.modelValue,this.getOptionValue(e),this.dataKey))return[e];return null},show(){this.$emit("before-show"),this.overlayVisible=!0},hide(){this.$emit("before-hide"),this.overlayVisible=!1},onFocus(){this.focused=!0},onBlur(){this.focused=!1},onClick(e){this.disabled||this.loading||(!this.overlay||!this.overlay.contains(e.target))&&(this.overlayVisible?this.hide():this.show(),this.$refs.focusInput.focus())},onOverlayEnter(e){h.set("overlay",e,this.$primevue.config.zIndex.overlay),this.alignOverlay(),this.bindOutsideClickListener(),this.bindScrollListener(),this.bindResizeListener(),this.$emit("show")},onOverlayLeave(){this.unbindOutsideClickListener(),this.unbindScrollListener(),this.unbindResizeListener(),this.$emit("hide"),this.overlay=null,this.dirty=!1},onOverlayAfterLeave(e){h.clear(e)},alignOverlay(){this.appendDisabled?r.relativePosition(this.overlay,this.$el):(this.overlay.style.minWidth=r.getOuterWidth(this.$el)+"px",r.absolutePosition(this.overlay,this.$el))},bindOutsideClickListener(){this.outsideClickListener||(this.outsideClickListener=e=>{this.overlayVisible&&this.overlay&&!this.$el.contains(e.target)&&!this.overlay.contains(e.target)&&this.hide()},document.addEventListener("click",this.outsideClickListener))},unbindOutsideClickListener(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener),this.outsideClickListener=null)},bindScrollListener(){this.scrollHandler||(this.scrollHandler=new v(this.$refs.container,()=>{this.overlayVisible&&this.hide()})),this.scrollHandler.bindScrollListener()},unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()},bindResizeListener(){this.resizeListener||(this.resizeListener=()=>{this.overlayVisible&&this.hide()},window.addEventListener("resize",this.resizeListener))},unbindResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)},overlayRef(e){this.overlay=e},onKeyDown(e){switch(e.key){case"Down":case"ArrowDown":this.overlayVisible?r.findSingle(this.overlay,".p-cascadeselect-item").children[0].focus():e.altKey&&this.options&&this.options.length&&this.show(),e.preventDefault();break;case"Escape":this.overlayVisible&&(this.hide(),e.preventDefault());break;case"Tab":this.hide();break}},onOverlayClick(e){w.emit("overlay-click",{originalEvent:e,target:this.$el})}},computed:{containerClass(){return["p-cascadeselect p-component p-inputwrapper",{"p-disabled":this.disabled,"p-focus":this.focused,"p-inputwrapper-filled":this.modelValue,"p-inputwrapper-focus":this.focused||this.overlayVisible}]},labelClass(){return["p-cascadeselect-label",{"p-placeholder":this.label===this.placeholder,"p-cascadeselect-label-empty":!this.$slots.value&&(this.label==="p-emptylabel"||this.label.length===0)}]},label(){return this.selectionPath?this.getOptionLabel(this.selectionPath[this.selectionPath.length-1]):this.placeholder||"p-emptylabel"},panelStyleClass(){return["p-cascadeselect-panel p-component",this.panelClass,{"p-input-filled":this.$primevue.config.inputStyle==="filled","p-ripple-disabled":this.$primevue.config.ripple===!1}]},appendDisabled(){return this.appendTo==="self"},appendTarget(){return this.appendDisabled?null:this.appendTo},dropdownIconClass(){return["p-cascadeselect-trigger-icon",this.loading?this.loadingIcon:"pi pi-chevron-down"]}},components:{CascadeSelectSub:x}},D={class:"p-hidden-accessible"},_=["id","disabled","tabindex","aria-expanded","aria-labelledby"],I=["aria-expanded"],P={class:"p-cascadeselect-items-wrapper"};function B(e,t,l,u,a,i){const y=S("CascadeSelectSub");return c(),p("div",{ref:"container",class:d(i.containerClass),onClick:t[4]||(t[4]=s=>i.onClick(s))},[n("div",D,[n("input",{ref:"focusInput",type:"text",id:l.inputId,readonly:"",disabled:l.disabled,onFocus:t[0]||(t[0]=(...s)=>i.onFocus&&i.onFocus(...s)),onBlur:t[1]||(t[1]=(...s)=>i.onBlur&&i.onBlur(...s)),onKeydown:t[2]||(t[2]=(...s)=>i.onKeyDown&&i.onKeyDown(...s)),tabindex:l.tabindex,"aria-haspopup":"listbox","aria-expanded":a.overlayVisible,"aria-labelledby":l.ariaLabelledBy},null,40,_)]),n("span",{class:d(i.labelClass)},[b(e.$slots,"value",{value:l.modelValue,placeholder:l.placeholder},()=>[O(V(i.label),1)])],2),n("div",{class:"p-cascadeselect-trigger",role:"button","aria-haspopup":"listbox","aria-expanded":a.overlayVisible},[b(e.$slots,"indicator",{},()=>[n("span",{class:d(i.dropdownIconClass)},null,2)])],8,I),(c(),m(C,{to:i.appendTarget,disabled:i.appendDisabled},[f(g,{name:"p-connected-overlay",onEnter:i.onOverlayEnter,onLeave:i.onOverlayLeave,onAfterLeave:i.onOverlayAfterLeave},{default:L(()=>[a.overlayVisible?(c(),p("div",{key:0,ref:i.overlayRef,class:d(i.panelStyleClass),onClick:t[3]||(t[3]=(...s)=>i.onOverlayClick&&i.onOverlayClick(...s))},[n("div",P,[f(y,{options:l.options,selectionPath:a.selectionPath,optionLabel:l.optionLabel,optionValue:l.optionValue,level:0,templates:e.$slots,optionGroupLabel:l.optionGroupLabel,optionGroupChildren:l.optionGroupChildren,onOptionSelect:i.onOptionSelect,onOptiongroupSelect:i.onOptionGroupSelect,dirty:a.dirty,root:!0},null,8,["options","selectionPath","optionLabel","optionValue","templates","optionGroupLabel","optionGroupChildren","onOptionSelect","onOptiongroupSelect","dirty"])])],2)):k("",!0)]),_:1},8,["onEnter","onLeave","onAfterLeave"])],8,["to","disabled"]))],2)}var A=G(z,[["render",B]]);export{A as default};
