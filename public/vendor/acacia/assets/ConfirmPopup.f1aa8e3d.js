import{L as n,Z as c,X as s,a5 as L,n as p,e as f,w as v,T as b,K as C,r as g,o as r,c as d,f as u,p as h,t as k,G as y,J as O,l as z}from"./main.9e765f7d.js";import{O as _}from"./overlayeventbus.esm.ef5cc0da.js";import{s as j}from"./button.esm.a5ac1061.js";import{_ as E}from"./plugin-vue_export-helper.21dcd24c.js";import"./ripple.esm.1fe20658.js";const H={name:"ConfirmPopup",inheritAttrs:!1,props:{group:String},data(){return{visible:!1,confirmation:null}},target:null,outsideClickListener:null,scrollHandler:null,resizeListener:null,container:null,confirmListener:null,closeListener:null,mounted(){this.confirmListener=e=>{!e||e.group===this.group&&(this.confirmation=e,this.target=e.target,this.visible=!0)},this.closeListener=()=>{this.visible=!1,this.confirmation=null},n.on("confirm",this.confirmListener),n.on("close",this.closeListener)},beforeUnmount(){n.off("confirm",this.confirmListener),n.off("close",this.closeListener),this.unbindOutsideClickListener(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.unbindResizeListener(),this.container&&(c.clear(this.container),this.container=null),this.target=null,this.confirmation=null},methods:{accept(){this.confirmation.accept&&this.confirmation.accept(),this.visible=!1},reject(){this.confirmation.reject&&this.confirmation.reject(),this.visible=!1},onEnter(e){this.bindOutsideClickListener(),this.bindScrollListener(),this.bindResizeListener(),c.set("overlay",e,this.$primevue.config.zIndex.overlay)},onLeave(){this.unbindOutsideClickListener(),this.unbindScrollListener(),this.unbindResizeListener()},onAfterLeave(e){c.clear(e)},alignOverlay(){s.absolutePosition(this.container,this.target);const e=s.getOffset(this.container),t=s.getOffset(this.target);let l=0;e.left<t.left&&(l=t.left-e.left),this.container.style.setProperty("--overlayArrowLeft",`${l}px`),e.top<t.top&&s.addClass(this.container,"p-confirm-popup-flipped")},bindOutsideClickListener(){this.outsideClickListener||(this.outsideClickListener=e=>{this.visible&&this.container&&!this.container.contains(e.target)&&!this.isTargetClicked(e)?this.visible=!1:this.alignOverlay()},document.addEventListener("click",this.outsideClickListener))},unbindOutsideClickListener(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener),this.outsideClickListener=null)},bindScrollListener(){this.scrollHandler||(this.scrollHandler=new L(this.target,()=>{this.visible&&(this.visible=!1)})),this.scrollHandler.bindScrollListener()},unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()},bindResizeListener(){this.resizeListener||(this.resizeListener=()=>{this.visible&&(this.visible=!1)},window.addEventListener("resize",this.resizeListener))},unbindResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)},isTargetClicked(e){return this.target&&(this.target===e.target||this.target.contains(e.target))},containerRef(e){this.container=e},onOverlayClick(e){_.emit("overlay-click",{originalEvent:e,target:this.target})}},computed:{containerClass(){return["p-confirm-popup p-component",{"p-input-filled":this.$primevue.config.inputStyle==="filled","p-ripple-disabled":this.$primevue.config.ripple===!1}]},message(){return this.confirmation?this.confirmation.message:null},iconClass(){return["p-confirm-popup-icon",this.confirmation?this.confirmation.icon:null]},acceptLabel(){return this.confirmation?this.confirmation.acceptLabel||this.$primevue.config.locale.accept:null},rejectLabel(){return this.confirmation?this.confirmation.rejectLabel||this.$primevue.config.locale.reject:null},acceptIcon(){return this.confirmation?this.confirmation.acceptIcon:null},rejectIcon(){return this.confirmation?this.confirmation.rejectIcon:null},acceptClass(){return["p-confirm-popup-accept p-button-sm",this.confirmation?this.confirmation.acceptClass:null]},rejectClass(){return["p-confirm-popup-reject p-button-sm",this.confirmation?this.confirmation.rejectClass||"p-button-text":null]}},components:{CPButton:j}},S={key:0,class:"p-confirm-popup-content"},w={class:"p-confirm-popup-message"},B={class:"p-confirm-popup-footer"};function P(e,t,l,I,o,i){const m=g("CPButton");return r(),p(C,{to:"body"},[f(b,{name:"p-confirm-popup",onEnter:i.onEnter,onLeave:i.onLeave,onAfterLeave:i.onAfterLeave},{default:v(()=>[o.visible?(r(),d("div",O({key:0,class:i.containerClass,ref:i.containerRef},e.$attrs,{onClick:t[2]||(t[2]=(...a)=>i.onOverlayClick&&i.onOverlayClick(...a))}),[e.$slots.message?(r(),p(y(e.$slots.message),{key:1,message:o.confirmation},null,8,["message"])):(r(),d("div",S,[u("i",{class:h(i.iconClass)},null,2),u("span",w,k(o.confirmation.message),1)])),u("div",B,[f(m,{label:i.rejectLabel,icon:i.rejectIcon,class:h(i.rejectClass),onClick:t[0]||(t[0]=a=>i.reject())},null,8,["label","icon","class"]),f(m,{label:i.acceptLabel,icon:i.acceptIcon,class:h(i.acceptClass),onClick:t[1]||(t[1]=a=>i.accept()),autofocus:""},null,8,["label","icon","class"])])],16)):z("",!0)]),_:1},8,["onEnter","onLeave","onAfterLeave"])])}var N=E(H,[["render",P]]);export{N as default};
