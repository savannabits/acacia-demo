var S=Object.defineProperty,C=Object.defineProperties;var R=Object.getOwnPropertyDescriptors;var V=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var f=(u,t,i)=>t in u?S(u,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[t]=i,y=(u,t)=>{for(var i in t||(t={}))M.call(t,i)&&f(u,i,t[i]);if(V)for(var i of V(t))T.call(t,i)&&f(u,i,t[i]);return u},h=(u,t)=>C(u,R(t));import{d as U,s as $,j as v,b as B,u as I,c as z,f as s,e as n,g as l,p as k,h as c,v as E,n as L,w as N,x as A,o as w,q as F}from"./main.9e765f7d.js";import{s as K}from"./button.esm.a5ac1061.js";import{s as j}from"./message.esm.a16f09f2.js";import{s as m}from"./inputtext.esm.dc0f2264.js";import{s as p}from"./inputswitch.esm.90fe6344.js";import{s as q}from"./textarea.esm.a52171b9.js";import x from"./AcaciaRichSelect.1af0e202.js";import"./ripple.esm.1fe20658.js";import"./vue-select.c5557806.js";import"./plugin-vue_export-helper.21dcd24c.js";const P=["onSubmit"],Y={class:""},D={class:"my-2"},G=s("label",null,"Type",-1),H={class:"my-2"},J=s("label",null,"Method",-1),O={class:"my-2"},Q=s("label",null,"Related Key",-1),W={class:"my-2"},X=s("label",null,"Related Table",-1),Z={class:"my-2"},ll=s("label",null,"Local Key",-1),el={class:"my-2"},ol=s("label",null,"Label Column",-1),sl={class:"my-2 flex items-center flex-wrap gap-x-2"},al=s("label",null,"Is Recursive",-1),tl={class:"my-2 flex items-center flex-wrap gap-x-2"},dl=s("label",null,"Is Morph",-1),nl={class:"my-2"},il=s("label",null,"Morph Type Column",-1),ul={class:"my-2"},ml=s("label",null,"Morph Id Column",-1),rl={class:"my-2"},cl=s("label",null,"Server Validation",-1),pl={class:"my-2 flex items-center flex-wrap gap-x-2"},_l=s("label",null,"In List",-1),bl={class:"my-2"},Vl=s("label",null,"Related",-1),fl={class:"my-2"},yl=s("label",null,"Schematic",-1),hl={class:"text-right min-w-[300px] pt-2 border-t-2"},vl=F("You are not authorized to perform this action"),kl=U({name:"RelationshipCreate"}),Il=U(h(y({},kl),{emits:["created","error"],setup(u,{emit:t}){const i=$(()=>{var d,e;return(e=(d=A().props)==null?void 0:d.value)==null?void 0:e.flash});v([]),v(!1);const _=B(),a=I({type:null,method:null,related_key:null,related_table:null,local_key:null,label_column:null,is_recursive:!1,is_morph:!1,morph_type_column:null,morph_id_column:null,server_validation:null,in_list:!1,related:null,schematic:null}),g=async()=>{a.post(c("acacia.g-panel.acacia-relationships.store"),{onSuccess:d=>{var o;const e=d.props.flash;_.add({severity:"success",summary:"Success",detail:e==null?void 0:e.success,life:2e3});const r=(o=i.value)==null?void 0:o.payload;t("created",{payload:r})},onError:d=>{var o,b;let e=((o=i.value)==null?void 0:o.error)||(d==null?void 0:d.message)||(d==null?void 0:d.error)||d||"A server error occurred.";_.add({severity:"error",summary:"Error",detail:e,life:3e3});const r=(b=i.value)==null?void 0:b.payload;t("error",{payload:r,message:e})},onFinish:d=>{}})};return(d,e)=>{var r;return(r=d.$page.props.can)!=null&&r.create?(w(),z("form",{key:0,onSubmit:E(g,["prevent"])},[s("div",Y,[s("div",D,[G,n(l(m),{class:"block w-full",modelValue:l(a).type,"onUpdate:modelValue":e[0]||(e[0]=o=>l(a).type=o)},null,8,["modelValue"])]),s("div",H,[J,n(l(m),{class:"block w-full",modelValue:l(a).method,"onUpdate:modelValue":e[1]||(e[1]=o=>l(a).method=o)},null,8,["modelValue"])]),s("div",O,[Q,n(l(m),{class:"block w-full",modelValue:l(a).related_key,"onUpdate:modelValue":e[2]||(e[2]=o=>l(a).related_key=o)},null,8,["modelValue"])]),s("div",W,[X,n(l(m),{class:"block w-full",modelValue:l(a).related_table,"onUpdate:modelValue":e[3]||(e[3]=o=>l(a).related_table=o)},null,8,["modelValue"])]),s("div",Z,[ll,n(l(m),{class:"block w-full",modelValue:l(a).local_key,"onUpdate:modelValue":e[4]||(e[4]=o=>l(a).local_key=o)},null,8,["modelValue"])]),s("div",el,[ol,n(l(m),{class:"block w-full",modelValue:l(a).label_column,"onUpdate:modelValue":e[5]||(e[5]=o=>l(a).label_column=o)},null,8,["modelValue"])]),s("div",sl,[al,n(l(p),{class:"block",modelValue:l(a).is_recursive,"onUpdate:modelValue":e[6]||(e[6]=o=>l(a).is_recursive=o)},null,8,["modelValue"])]),s("div",tl,[dl,n(l(p),{class:"block",modelValue:l(a).is_morph,"onUpdate:modelValue":e[7]||(e[7]=o=>l(a).is_morph=o)},null,8,["modelValue"])]),s("div",nl,[il,n(l(m),{class:"block w-full",modelValue:l(a).morph_type_column,"onUpdate:modelValue":e[8]||(e[8]=o=>l(a).morph_type_column=o)},null,8,["modelValue"])]),s("div",ul,[ml,n(l(m),{class:"block w-full",modelValue:l(a).morph_id_column,"onUpdate:modelValue":e[9]||(e[9]=o=>l(a).morph_id_column=o)},null,8,["modelValue"])]),s("div",rl,[cl,n(l(q),{modelValue:l(a).server_validation,"onUpdate:modelValue":e[10]||(e[10]=o=>l(a).server_validation=o),class:"block w-full",autoResize:!0,rows:"5",cols:"30"},null,8,["modelValue"])]),s("div",pl,[_l,n(l(p),{class:"block",modelValue:l(a).in_list,"onUpdate:modelValue":e[11]||(e[11]=o=>l(a).in_list=o)},null,8,["modelValue"])]),s("div",bl,[Vl,n(x,{modelValue:l(a).related,"onUpdate:modelValue":e[12]||(e[12]=o=>l(a).related=o),class:k("block w-full"),"api-url":l(c)("api.v1.acacia-schematics.index"),label:"table_name"},null,8,["modelValue","api-url"])]),s("div",fl,[yl,n(x,{modelValue:l(a).schematic,"onUpdate:modelValue":e[13]||(e[13]=o=>l(a).schematic=o),class:k("block w-full"),"api-url":l(c)("api.v1.acacia-schematics.index"),label:"table_name"},null,8,["modelValue","api-url"])])]),s("div",hl,[n(l(K),{type:"submit",icon:"pi pi-check",label:"Save"})])],40,P)):(w(),L(l(j),{key:1,severity:"error"},{default:N(()=>[vl]),_:1}))}}}));export{Il as default};
