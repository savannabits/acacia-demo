var k=Object.defineProperty,w=Object.defineProperties;var x=Object.getOwnPropertyDescriptors;var p=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var _=(t,e,a)=>e in t?k(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,f=(t,e)=>{for(var a in e||(e={}))N.call(e,a)&&_(t,a,e[a]);if(p)for(var a of p(e))S.call(e,a)&&_(t,a,e[a]);return t},h=(t,e)=>w(t,x(e));import{d as g,s as B,j as v,b as C,u as E,c as $,f as c,e as d,g as r,v as F,n as M,w as P,x as T,h as U,o as y,q as j}from"./main.9e765f7d.js";import{s as q}from"./button.esm.a5ac1061.js";import{s as z}from"./message.esm.a16f09f2.js";import{s as b}from"./inputtext.esm.dc0f2264.js";import"./ripple.esm.1fe20658.js";const A=["onSubmit"],G={class:""},Y={class:"my-2"},D=c("label",null,"Name",-1),H={class:"my-2"},I=c("label",null,"Guard Name",-1),J={class:"text-right min-w-[300px] pt-2 border-t-2"},K=j("You are not authorized to perform this action"),L=g({name:"PermissionCreate"}),ee=g(h(f({},L),{emits:["created","error"],setup(t,{emit:e}){const a=B(()=>{var s,o;return(o=(s=T().props)==null?void 0:s.value)==null?void 0:o.flash});v([]),v(!1);const m=C(),i=E({name:null,guard_name:null}),V=async()=>{i.post(U("acacia.auth.permissions.store"),{onSuccess:s=>{var l;const o=s.props.flash;m.add({severity:"success",summary:"Success",detail:o==null?void 0:o.success,life:2e3});const n=(l=a.value)==null?void 0:l.payload;e("created",{payload:n})},onError:s=>{var l,u;let o=((l=a.value)==null?void 0:l.error)||(s==null?void 0:s.message)||(s==null?void 0:s.error)||s||"A server error occurred.";m.add({severity:"error",summary:"Error",detail:o,life:3e3});const n=(u=a.value)==null?void 0:u.payload;e("error",{payload:n,message:o})},onFinish:s=>{}})};return(s,o)=>{var n;return(n=s.$page.props.can)!=null&&n.create?(y(),$("form",{key:0,onSubmit:F(V,["prevent"])},[c("div",G,[c("div",Y,[D,d(r(b),{class:"block w-full",modelValue:r(i).name,"onUpdate:modelValue":o[0]||(o[0]=l=>r(i).name=l)},null,8,["modelValue"])]),c("div",H,[I,d(r(b),{class:"block w-full",modelValue:r(i).guard_name,"onUpdate:modelValue":o[1]||(o[1]=l=>r(i).guard_name=l)},null,8,["modelValue"])])]),c("div",J,[d(r(q),{type:"submit",icon:"pi pi-check",label:"Save"})])],40,A)):(y(),M(r(z),{key:1,severity:"error"},{default:P(()=>[K]),_:1}))}}}));export{ee as default};
