var H=Object.defineProperty;var x=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var D=(e,i,t)=>i in e?H(e,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[i]=t,F=(e,i)=>{for(var t in i||(i={}))N.call(i,t)&&D(e,t,i[t]);if(x)for(var t of x(i))P.call(i,t)&&D(e,t,i[t]);return e};import{Z as C,aa as c,a5 as b,ad as U,ac as G,i as o,k as u,s as v,x as f,q as p,v as _,j as K,w,K as j,W,r as q,O as A,o as a,y as g,z as y,M as S,af as Z,V as J,a2 as Q,an as M,F as m,t as I}from"./vendor.05df324e.js";import{O as X}from"./overlayeventbus.esm.d529c5a8.js";import{R as Y}from"./ripple.esm.574b991d.js";import{s as $}from"./virtualscroller.esm.adfef9da.js";import{_ as ee}from"./plugin-vue_export-helper.21dcd24c.js";const ie={name:"Dropdown",emits:["update:modelValue","before-show","before-hide","show","hide","change","filter","focus","blur"],props:{modelValue:null,options:Array,optionLabel:null,optionValue:null,optionDisabled:null,optionGroupLabel:null,optionGroupChildren:null,scrollHeight:{type:String,default:"200px"},filter:Boolean,filterPlaceholder:String,filterLocale:String,filterMatchMode:{type:String,default:"contains"},filterFields:{type:Array,default:null},editable:Boolean,placeholder:String,disabled:Boolean,dataKey:null,showClear:Boolean,inputId:String,tabindex:String,ariaLabelledBy:null,appendTo:{type:String,default:"body"},emptyFilterMessage:{type:String,default:null},emptyMessage:{type:String,default:null},panelClass:null,loading:{type:Boolean,default:!1},loadingIcon:{type:String,default:"pi pi-spinner pi-spin"},virtualScrollerOptions:{type:Object,default:null}},data(){return{focused:!1,filterValue:null,overlayVisible:!1}},watch:{modelValue(){this.isModelValueChanged=!0}},outsideClickListener:null,scrollHandler:null,resizeListener:null,searchTimeout:null,currentSearchChar:null,previousSearchChar:null,searchValue:null,overlay:null,itemsWrapper:null,virtualScroller:null,isModelValueChanged:!1,updated(){this.overlayVisible&&this.isModelValueChanged&&this.scrollValueInView(),this.isModelValueChanged=!1},beforeUnmount(){this.unbindOutsideClickListener(),this.unbindResizeListener(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.itemsWrapper=null,this.overlay&&(C.clear(this.overlay),this.overlay=null)},methods:{getOptionIndex(e,i){return this.virtualScrollerDisabled?e:i&&i(e).index},getOptionLabel(e){return this.optionLabel?c.resolveFieldData(e,this.optionLabel):e},getOptionValue(e){return this.optionValue?c.resolveFieldData(e,this.optionValue):e},getOptionRenderKey(e){return this.dataKey?c.resolveFieldData(e,this.dataKey):this.getOptionLabel(e)},isOptionDisabled(e){return this.optionDisabled?c.resolveFieldData(e,this.optionDisabled):!1},getOptionGroupRenderKey(e){return c.resolveFieldData(e,this.optionGroupLabel)},getOptionGroupLabel(e){return c.resolveFieldData(e,this.optionGroupLabel)},getOptionGroupChildren(e){return c.resolveFieldData(e,this.optionGroupChildren)},getSelectedOption(){let e=this.getSelectedOptionIndex();return e!==-1?this.optionGroupLabel?this.getOptionGroupChildren(this.visibleOptions[e.group])[e.option]:this.visibleOptions[e]:null},getSelectedOptionIndex(){if(this.modelValue!=null&&this.visibleOptions)if(this.optionGroupLabel)for(let e=0;e<this.visibleOptions.length;e++){let i=this.findOptionIndexInList(this.modelValue,this.getOptionGroupChildren(this.visibleOptions[e]));if(i!==-1)return{group:e,option:i}}else return this.findOptionIndexInList(this.modelValue,this.visibleOptions);return-1},findOptionIndexInList(e,i){for(let t=0;t<i.length;t++)if(c.equals(e,this.getOptionValue(i[t]),this.equalityKey))return t;return-1},isSelected(e){return c.equals(this.modelValue,this.getOptionValue(e),this.equalityKey)},show(){this.$emit("before-show"),this.overlayVisible=!0},hide(){this.$emit("before-hide"),this.overlayVisible=!1},onFocus(e){this.focused=!0,this.$emit("focus",e)},onBlur(e){this.focused=!1,this.$emit("blur",e)},onKeyDown(e){switch(e.which){case 40:this.onDownKey(e);break;case 38:this.onUpKey(e);break;case 32:this.overlayVisible||(this.show(),e.preventDefault());break;case 13:case 27:this.overlayVisible&&(this.hide(),e.preventDefault());break;case 9:this.hide();break;default:this.search(e);break}},onFilterKeyDown(e){switch(e.which){case 40:this.onDownKey(e);break;case 38:this.onUpKey(e);break;case 13:case 27:this.overlayVisible=!1,e.preventDefault();break}},onDownKey(e){if(this.visibleOptions)if(!this.overlayVisible&&e.altKey)this.show();else{let i=this.visibleOptions&&this.visibleOptions.length>0?this.findNextOption(this.getSelectedOptionIndex()):null;i&&this.updateModel(e,this.getOptionValue(i))}e.preventDefault()},onUpKey(e){if(this.visibleOptions){let i=this.findPrevOption(this.getSelectedOptionIndex());i&&this.updateModel(e,this.getOptionValue(i))}e.preventDefault()},findNextOption(e){if(this.optionGroupLabel){let i=e===-1?0:e.group,t=e===-1?-1:e.option,s=this.findNextOptionInList(this.getOptionGroupChildren(this.visibleOptions[i]),t);return s||(i+1!==this.visibleOptions.length?this.findNextOption({group:i+1,option:-1}):null)}else return this.findNextOptionInList(this.visibleOptions,e)},findNextOptionInList(e,i){let t=i+1;if(t===e.length)return null;let s=e[t];return this.isOptionDisabled(s)?this.findNextOptionInList(t):s},findPrevOption(e){if(e===-1)return null;if(this.optionGroupLabel){let i=e.group,t=e.option,s=this.findPrevOptionInList(this.getOptionGroupChildren(this.visibleOptions[i]),t);return s||(i>0?this.findPrevOption({group:i-1,option:this.getOptionGroupChildren(this.visibleOptions[i-1]).length}):null)}else return this.findPrevOptionInList(this.visibleOptions,e)},findPrevOptionInList(e,i){let t=i-1;if(t<0)return null;let s=e[t];return this.isOptionDisabled(s)?this.findPrevOption(t):s},onClearClick(e){this.updateModel(e,null)},onClick(e){this.disabled||this.loading||b.hasClass(e.target,"p-dropdown-clear-icon")||e.target.tagName==="INPUT"||(!this.overlay||!this.overlay.contains(e.target))&&(this.overlayVisible?this.hide():this.show(),this.$refs.focusInput.focus())},onOptionSelect(e,i){let t=this.getOptionValue(i);this.updateModel(e,t),this.$refs.focusInput.focus(),setTimeout(()=>{this.hide()},200)},onEditableInput(e){this.$emit("update:modelValue",e.target.value)},onOverlayEnter(e){if(C.set("overlay",e,this.$primevue.config.zIndex.overlay),this.alignOverlay(),this.bindOutsideClickListener(),this.bindScrollListener(),this.bindResizeListener(),this.scrollValueInView(),this.filter&&this.$refs.filterInput.focus(),!this.virtualScrollerDisabled){const i=this.getSelectedOptionIndex();i!==-1&&this.virtualScroller.scrollToIndex(i)}this.$emit("show")},onOverlayLeave(){this.unbindOutsideClickListener(),this.unbindScrollListener(),this.unbindResizeListener(),this.$emit("hide"),this.itemsWrapper=null,this.overlay=null},onOverlayAfterLeave(e){C.clear(e)},alignOverlay(){this.appendDisabled?b.relativePosition(this.overlay,this.$el):(this.overlay.style.minWidth=b.getOuterWidth(this.$el)+"px",b.absolutePosition(this.overlay,this.$el))},updateModel(e,i){this.$emit("update:modelValue",i),this.$emit("change",{originalEvent:e,value:i})},bindOutsideClickListener(){this.outsideClickListener||(this.outsideClickListener=e=>{this.overlayVisible&&this.overlay&&!this.$el.contains(e.target)&&!this.overlay.contains(e.target)&&this.hide()},document.addEventListener("click",this.outsideClickListener))},unbindOutsideClickListener(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener),this.outsideClickListener=null)},bindScrollListener(){this.scrollHandler||(this.scrollHandler=new U(this.$refs.container,()=>{this.overlayVisible&&this.hide()})),this.scrollHandler.bindScrollListener()},unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()},bindResizeListener(){this.resizeListener||(this.resizeListener=()=>{this.overlayVisible&&!b.isTouchDevice()&&this.hide()},window.addEventListener("resize",this.resizeListener))},unbindResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)},search(e){if(!this.visibleOptions)return;this.searchTimeout&&clearTimeout(this.searchTimeout);const i=e.key;if(this.previousSearchChar=this.currentSearchChar,this.currentSearchChar=i,this.previousSearchChar===this.currentSearchChar?this.searchValue=this.currentSearchChar:this.searchValue=this.searchValue?this.searchValue+i:i,this.searchValue){let t=this.getSelectedOptionIndex(),s=this.optionGroupLabel?this.searchOptionInGroup(t):this.searchOption(++t);s&&this.updateModel(e,this.getOptionValue(s))}this.searchTimeout=setTimeout(()=>{this.searchValue=null},250)},searchOption(e){let i;return this.searchValue&&(i=this.searchOptionInRange(e,this.visibleOptions.length),i||(i=this.searchOptionInRange(0,e))),i},searchOptionInRange(e,i){for(let t=e;t<i;t++){let s=this.visibleOptions[t];if(this.matchesSearchValue(s))return s}return null},searchOptionInGroup(e){let i=e===-1?{group:0,option:-1}:e;for(let t=i.group;t<this.visibleOptions.length;t++){let s=this.getOptionGroupChildren(this.visibleOptions[t]);for(let n=i.group===t?i.option+1:0;n<s.length;n++)if(this.matchesSearchValue(s[n]))return s[n]}for(let t=0;t<=i.group;t++){let s=this.getOptionGroupChildren(this.visibleOptions[t]);for(let n=0;n<(i.group===t?i.option:s.length);n++)if(this.matchesSearchValue(s[n]))return s[n]}return null},matchesSearchValue(e){return this.getOptionLabel(e).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))},onFilterChange(e){this.$emit("filter",{originalEvent:e,value:e.target.value})},onFilterUpdated(){this.overlayVisible&&this.alignOverlay()},overlayRef(e){this.overlay=e},itemsWrapperRef(e){this.itemsWrapper=e},virtualScrollerRef(e){this.virtualScroller=e},scrollValueInView(){if(this.overlay){let e=b.findSingle(this.overlay,"li.p-highlight");e&&e.scrollIntoView({block:"nearest",inline:"start"})}},onOverlayClick(e){X.emit("overlay-click",{originalEvent:e,target:this.$el})}},computed:{visibleOptions(){if(this.filterValue)if(this.optionGroupLabel){let e=[];for(let i of this.options){let t=G.filter(this.getOptionGroupChildren(i),this.searchFields,this.filterValue,this.filterMatchMode,this.filterLocale);if(t&&t.length){let s=F({},i);s[this.optionGroupChildren]=t,e.push(s)}}return e}else return G.filter(this.options,this.searchFields,this.filterValue,this.filterMatchMode,this.filterLocale);else return this.options},containerClass(){return["p-dropdown p-component p-inputwrapper",{"p-disabled":this.disabled,"p-dropdown-clearable":this.showClear&&!this.disabled,"p-focus":this.focused,"p-inputwrapper-filled":this.modelValue,"p-inputwrapper-focus":this.focused||this.overlayVisible}]},labelClass(){return["p-dropdown-label p-inputtext",{"p-placeholder":this.label===this.placeholder,"p-dropdown-label-empty":!this.$slots.value&&(this.label==="p-emptylabel"||this.label.length===0)}]},panelStyleClass(){return["p-dropdown-panel p-component",this.panelClass,{"p-input-filled":this.$primevue.config.inputStyle==="filled","p-ripple-disabled":this.$primevue.config.ripple===!1}]},label(){let e=this.getSelectedOption();return e!==null?this.getOptionLabel(e):this.placeholder||"p-emptylabel"},editableInputValue(){let e=this.getSelectedOption();return e?this.getOptionLabel(e):this.modelValue},equalityKey(){return this.optionValue?null:this.dataKey},searchFields(){return this.filterFields||[this.optionLabel]},emptyFilterMessageText(){return this.emptyFilterMessage||this.$primevue.config.locale.emptyFilterMessage},emptyMessageText(){return this.emptyMessage||this.$primevue.config.locale.emptyMessage},appendDisabled(){return this.appendTo==="self"},virtualScrollerDisabled(){return!this.virtualScrollerOptions},appendTarget(){return this.appendDisabled?null:this.appendTo},dropdownIconClass(){return["p-dropdown-trigger-icon",this.loading?this.loadingIcon:"pi pi-chevron-down"]}},directives:{ripple:Y},components:{VirtualScroller:$}},te={class:"p-hidden-accessible"},le=["id","disabled","tabindex","aria-expanded","aria-labelledby"],se=["disabled","placeholder","value","aria-expanded"],re=["aria-expanded"],ne={key:0,class:"p-dropdown-header"},ae={class:"p-dropdown-filter-container"},oe=["placeholder"],de=u("span",{class:"p-dropdown-filter-icon pi pi-search"},null,-1),he=["onClick","aria-label","aria-selected"],ue={class:"p-dropdown-item-group"},pe=["onClick","aria-label","aria-selected"],ce={key:2,class:"p-dropdown-empty-message"},fe={key:3,class:"p-dropdown-empty-message"};function be(e,i,t,s,n,l){const T=q("VirtualScroller"),k=A("ripple");return a(),o("div",{ref:"container",class:f(l.containerClass),onClick:i[12]||(i[12]=r=>l.onClick(r))},[u("div",te,[u("input",{ref:"focusInput",type:"text",id:t.inputId,readonly:"",disabled:t.disabled,onFocus:i[0]||(i[0]=(...r)=>l.onFocus&&l.onFocus(...r)),onBlur:i[1]||(i[1]=(...r)=>l.onBlur&&l.onBlur(...r)),onKeydown:i[2]||(i[2]=(...r)=>l.onKeyDown&&l.onKeyDown(...r)),tabindex:t.tabindex,"aria-haspopup":"true","aria-expanded":n.overlayVisible,"aria-labelledby":t.ariaLabelledBy},null,40,le)]),t.editable?(a(),o("input",{key:0,type:"text",class:"p-dropdown-label p-inputtext",disabled:t.disabled,onFocus:i[3]||(i[3]=(...r)=>l.onFocus&&l.onFocus(...r)),onBlur:i[4]||(i[4]=(...r)=>l.onBlur&&l.onBlur(...r)),placeholder:t.placeholder,value:l.editableInputValue,onInput:i[5]||(i[5]=(...r)=>l.onEditableInput&&l.onEditableInput(...r)),"aria-haspopup":"listbox","aria-expanded":n.overlayVisible},null,40,se)):v("",!0),t.editable?v("",!0):(a(),o("span",{key:1,class:f(l.labelClass)},[p(e.$slots,"value",{value:t.modelValue,placeholder:t.placeholder},()=>[g(y(l.label||"empty"),1)])],2)),t.showClear&&t.modelValue!=null?(a(),o("i",{key:2,class:"p-dropdown-clear-icon pi pi-times",onClick:i[6]||(i[6]=r=>l.onClearClick(r))})):v("",!0),u("div",{class:"p-dropdown-trigger",role:"button","aria-haspopup":"listbox","aria-expanded":n.overlayVisible},[p(e.$slots,"indicator",{},()=>[u("span",{class:f(l.dropdownIconClass)},null,2)])],8,re),(a(),_(W,{to:l.appendTarget,disabled:l.appendDisabled},[K(j,{name:"p-connected-overlay",onEnter:l.onOverlayEnter,onLeave:l.onOverlayLeave,onAfterLeave:l.onOverlayAfterLeave},{default:w(()=>[n.overlayVisible?(a(),o("div",{key:0,ref:l.overlayRef,class:f(l.panelStyleClass),onClick:i[11]||(i[11]=(...r)=>l.onOverlayClick&&l.onOverlayClick(...r))},[p(e.$slots,"header",{value:t.modelValue,options:l.visibleOptions}),t.filter?(a(),o("div",ne,[u("div",ae,[S(u("input",{type:"text",ref:"filterInput","onUpdate:modelValue":i[7]||(i[7]=r=>n.filterValue=r),onVnodeUpdated:i[8]||(i[8]=(...r)=>l.onFilterUpdated&&l.onFilterUpdated(...r)),autoComplete:"off",class:"p-dropdown-filter p-inputtext p-component",placeholder:t.filterPlaceholder,onKeydown:i[9]||(i[9]=(...r)=>l.onFilterKeyDown&&l.onFilterKeyDown(...r)),onInput:i[10]||(i[10]=(...r)=>l.onFilterChange&&l.onFilterChange(...r))},null,40,oe),[[Z,n.filterValue]]),de])])):v("",!0),u("div",{ref:l.itemsWrapperRef,class:"p-dropdown-items-wrapper",style:M({"max-height":l.virtualScrollerDisabled?t.scrollHeight:""})},[K(T,J({ref:l.virtualScrollerRef},t.virtualScrollerOptions,{items:l.visibleOptions,style:{height:t.scrollHeight},disabled:l.virtualScrollerDisabled}),Q({content:w(({styleClass:r,contentRef:R,items:O,getItemOptions:L,contentStyle:B})=>[u("ul",{ref:R,class:f(["p-dropdown-items",r]),style:M(B),role:"listbox"},[t.optionGroupLabel?(a(!0),o(m,{key:1},I(O,(d,V)=>(a(),o(m,{key:l.getOptionGroupRenderKey(d)},[u("li",ue,[p(e.$slots,"optiongroup",{option:d,index:l.getOptionIndex(V,L)},()=>[g(y(l.getOptionGroupLabel(d)),1)])]),(a(!0),o(m,null,I(l.getOptionGroupChildren(d),(h,z)=>S((a(),o("li",{class:f(["p-dropdown-item",{"p-highlight":l.isSelected(h),"p-disabled":l.isOptionDisabled(h)}]),key:l.getOptionRenderKey(h),onClick:E=>l.onOptionSelect(E,h),role:"option","aria-label":l.getOptionLabel(h),"aria-selected":l.isSelected(h)},[p(e.$slots,"option",{option:h,index:l.getOptionIndex(z,L)},()=>[g(y(l.getOptionLabel(h)),1)])],10,pe)),[[k]])),128))],64))),128)):(a(!0),o(m,{key:0},I(O,(d,V)=>S((a(),o("li",{class:f(["p-dropdown-item",{"p-highlight":l.isSelected(d),"p-disabled":l.isOptionDisabled(d)}]),key:l.getOptionRenderKey(d),onClick:h=>l.onOptionSelect(h,d),role:"option","aria-label":l.getOptionLabel(d),"aria-selected":l.isSelected(d)},[p(e.$slots,"option",{option:d,index:l.getOptionIndex(V,L)},()=>[g(y(l.getOptionLabel(d)),1)])],10,he)),[[k]])),128)),n.filterValue&&(!O||O&&O.length===0)?(a(),o("li",ce,[p(e.$slots,"emptyfilter",{},()=>[g(y(l.emptyFilterMessageText),1)])])):!t.options||t.options&&t.options.length===0?(a(),o("li",fe,[p(e.$slots,"empty",{},()=>[g(y(l.emptyMessageText),1)])])):v("",!0)],6)]),_:2},[e.$slots.loader?{name:"loader",fn:w(({options:r})=>[p(e.$slots,"loader",{options:r})])}:void 0]),1040,["items","style","disabled"])],4),p(e.$slots,"footer",{value:t.modelValue,options:l.visibleOptions})],2)):v("",!0)]),_:3},8,["onEnter","onLeave","onAfterLeave"])],8,["to","disabled"]))],2)}var Ve=ee(ie,[["render",be]]);export{Ve as default};
