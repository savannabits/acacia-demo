var R=Object.defineProperty,C=Object.defineProperties;var M=Object.getOwnPropertyDescriptors;var h=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var v=(u,t,n)=>t in u?R(u,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):u[t]=n,b=(u,t)=>{for(var n in t||(t={}))B.call(t,n)&&v(u,n,t[n]);if(h)for(var n of h(t))T.call(t,n)&&v(u,n,t[n]);return u},k=(u,t)=>C(u,M(t));import{e as x,A,p as w,g as E,u as I,m as l,i as $,k as o,j as d,x as U,d as V,B as z,v as F,w as L,D as N,o as g,y as K}from"./vendor.05df324e.js";import{s as D}from"./button.esm.cbb15c31.js";import{s as P}from"./message.esm.2b7d3da1.js";import{s as c}from"./inputtext.esm.b08d2117.js";import{s as f}from"./inputswitch.esm.f0cf91c0.js";import{s as Y}from"./textarea.esm.b60c054e.js";import j from"./AcaciaRichSelect.d07900f6.js";import"./ripple.esm.574b991d.js";import"./plugin-vue_export-helper.21dcd24c.js";const q=["onSubmit"],G={class:""},H={class:"my-2"},J=o("label",null,"Type",-1),O={class:"my-2"},Q=o("label",null,"Method",-1),W={class:"my-2"},X=o("label",null,"Related Key",-1),Z={class:"my-2"},ll=o("label",null,"Related Table",-1),el={class:"my-2"},sl=o("label",null,"Local Key",-1),ol={class:"my-2"},al=o("label",null,"Label Column",-1),tl={class:"my-2 flex items-center flex-wrap gap-x-2"},dl=o("label",null,"Is Recursive",-1),il={class:"my-2 flex items-center flex-wrap gap-x-2"},nl=o("label",null,"Is Morph",-1),ul={class:"my-2"},ml=o("label",null,"Morph Type Column",-1),cl={class:"my-2"},rl=o("label",null,"Morph Id Column",-1),pl={class:"my-2"},_l=o("label",null,"Server Validation",-1),bl={class:"my-2 flex items-center flex-wrap gap-x-2"},Vl=o("label",null,"In List",-1),fl={class:"my-2"},yl=o("label",null,"Related",-1),hl={class:"my-2"},vl=o("label",null,"Schematic",-1),kl={class:"text-right min-w-[300px] pt-2 border-t-2"},xl=K("You are not authorized to perform this action"),wl=x({name:"RelationshipEditForm"}),El=x(k(b({},wl),{props:{model:{}},emits:["updated","error"],setup(u,{emit:t}){const n=u,p=A(()=>{var i,e;return(e=(i=N().props)==null?void 0:i.value)==null?void 0:e.flash});w([]),w(!1);const y=E(),_=n.model,a=I(b({},_)),S=async()=>{a.put(V("acacia.g-panel.acacia-relationships.update",_),{onSuccess:i=>{var m;const e=i.props.flash;y.add({severity:"success",summary:"Success",detail:e==null?void 0:e.success,life:2e3});const r=(m=p.value)==null?void 0:m.payload;t("updated",{payload:r})},onError:i=>{var m,s;let e=((m=p.value)==null?void 0:m.error)||(i==null?void 0:i.message)||(i==null?void 0:i.error)||i||"A server error occurred.";y.add({severity:"error",summary:"Error",detail:e,life:3e3});const r=(s=p.value)==null?void 0:s.payload;t("error",{payload:r,message:e})},onFinish:i=>{}})};return(i,e)=>{var r,m;return((m=(r=l(_))==null?void 0:r.can)==null?void 0:m.update)?(g(),$("form",{key:0,onSubmit:z(S,["prevent"])},[o("div",G,[o("div",H,[J,d(l(c),{class:"block w-full",modelValue:l(a).type,"onUpdate:modelValue":e[0]||(e[0]=s=>l(a).type=s)},null,8,["modelValue"])]),o("div",O,[Q,d(l(c),{class:"block w-full",modelValue:l(a).method,"onUpdate:modelValue":e[1]||(e[1]=s=>l(a).method=s)},null,8,["modelValue"])]),o("div",W,[X,d(l(c),{class:"block w-full",modelValue:l(a).related_key,"onUpdate:modelValue":e[2]||(e[2]=s=>l(a).related_key=s)},null,8,["modelValue"])]),o("div",Z,[ll,d(l(c),{class:"block w-full",modelValue:l(a).related_table,"onUpdate:modelValue":e[3]||(e[3]=s=>l(a).related_table=s)},null,8,["modelValue"])]),o("div",el,[sl,d(l(c),{class:"block w-full",modelValue:l(a).local_key,"onUpdate:modelValue":e[4]||(e[4]=s=>l(a).local_key=s)},null,8,["modelValue"])]),o("div",ol,[al,d(l(c),{class:"block w-full",modelValue:l(a).label_column,"onUpdate:modelValue":e[5]||(e[5]=s=>l(a).label_column=s)},null,8,["modelValue"])]),o("div",tl,[dl,d(l(f),{class:"block",modelValue:l(a).is_recursive,"onUpdate:modelValue":e[6]||(e[6]=s=>l(a).is_recursive=s)},null,8,["modelValue"])]),o("div",il,[nl,d(l(f),{class:"block",modelValue:l(a).is_morph,"onUpdate:modelValue":e[7]||(e[7]=s=>l(a).is_morph=s)},null,8,["modelValue"])]),o("div",ul,[ml,d(l(c),{class:"block w-full",modelValue:l(a).morph_type_column,"onUpdate:modelValue":e[8]||(e[8]=s=>l(a).morph_type_column=s)},null,8,["modelValue"])]),o("div",cl,[rl,d(l(c),{class:"block w-full",modelValue:l(a).morph_id_column,"onUpdate:modelValue":e[9]||(e[9]=s=>l(a).morph_id_column=s)},null,8,["modelValue"])]),o("div",pl,[_l,d(l(Y),{modelValue:l(a).server_validation,"onUpdate:modelValue":e[10]||(e[10]=s=>l(a).server_validation=s),class:"block w-full",autoResize:!0,rows:"5",cols:"30"},null,8,["modelValue"])]),o("div",bl,[Vl,d(l(f),{class:"block",modelValue:l(a).in_list,"onUpdate:modelValue":e[11]||(e[11]=s=>l(a).in_list=s)},null,8,["modelValue"])]),o("div",fl,[yl,d(j,{modelValue:l(a).related,"onUpdate:modelValue":e[12]||(e[12]=s=>l(a).related=s),class:U("block w-full"),"api-url":l(V)("api.v1.acacia-schematics.index"),label:"table_name"},null,8,["modelValue","api-url"])]),o("div",hl,[vl,d(j,{modelValue:l(a).schematic,"onUpdate:modelValue":e[13]||(e[13]=s=>l(a).schematic=s),class:U("block w-full"),"api-url":l(V)("api.v1.acacia-schematics.index"),label:"table_name"},null,8,["modelValue","api-url"])])]),o("div",kl,[d(l(D),{type:"submit",icon:"pi pi-check",label:"Save"})])],40,q)):(g(),F(l(P),{key:1,severity:"error"},{default:L(()=>[xl]),_:1}))}}}));export{El as default};
