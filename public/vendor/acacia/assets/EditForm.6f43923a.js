var $=Object.defineProperty,A=Object.defineProperties;var E=Object.getOwnPropertyDescriptors;var g=Object.getOwnPropertySymbols;var C=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var k=(l,e,t)=>e in l?$(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t,h=(l,e)=>{for(var t in e||(e={}))C.call(e,t)&&k(l,t,e[t]);if(g)for(var t of g(e))F.call(e,t)&&k(l,t,e[t]);return l},V=(l,e)=>A(l,E(e));import{e as j,A as P,p as w,g as M,u as T,m as s,v as x,w as p,D as U,o as b,j as n,i as z,k as c,B as D,s as G,y as I,d as R}from"./vendor.05df324e.js";import{s as Y}from"./button.esm.cbb15c31.js";import q from"./AssignPerms.84da0a05.js";import{s as H}from"./message.esm.2b7d3da1.js";import{s as J,a as B}from"./tabpanel.esm.0a9d5bce.js";import{s as N}from"./inputtext.esm.b08d2117.js";import"./ripple.esm.574b991d.js";const K=["onSubmit"],L={class:""},O={class:"my-2"},Q=c("label",null,"Name",-1),W={class:"my-2"},X=c("label",null,"Guard Name",-1),Z={class:"text-right min-w-[300px] pt-2 border-t-2"},ee=I("You are not authorized to perform this action"),se=j({name:"RoleEditForm"}),ne=j(V(h({},se),{props:{model:{}},emits:["updated","error"],setup(l,{emit:e}){const t=l,f=P(()=>{var a,o;return(o=(a=U().props)==null?void 0:a.value)==null?void 0:o.flash});w([]),w(!1);const v=M(),i=t.model,u=T(h({},i)),S=async()=>{u.put(R("acacia.auth.roles.update",i),{onSuccess:a=>{var d;const o=a.props.flash;v.add({severity:"success",summary:"Success",detail:o==null?void 0:o.success,life:2e3});const m=(d=f.value)==null?void 0:d.payload;e("updated",{payload:m})},onError:a=>{var d,r;let o=((d=f.value)==null?void 0:d.error)||(a==null?void 0:a.message)||(a==null?void 0:a.error)||a||"A server error occurred.";v.add({severity:"error",summary:"Error",detail:o,life:3e3});const m=(r=f.value)==null?void 0:r.payload;e("error",{payload:m,message:o})},onFinish:a=>{}})};return(a,o)=>{var m,d;return((d=(m=s(i))==null?void 0:m.can)==null?void 0:d.view)?(b(),x(s(J),{key:0},{default:p(()=>[n(s(B),{header:"Basic Info"},{default:p(()=>{var r,y;return[((y=(r=s(i))==null?void 0:r.can)==null?void 0:y.update)?(b(),z("form",{key:0,onSubmit:D(S,["prevent"])},[c("div",L,[c("div",O,[Q,n(s(N),{class:"block w-full",modelValue:s(u).name,"onUpdate:modelValue":o[0]||(o[0]=_=>s(u).name=_)},null,8,["modelValue"])]),c("div",W,[X,n(s(N),{class:"block w-full",modelValue:s(u).guard_name,"onUpdate:modelValue":o[1]||(o[1]=_=>s(u).guard_name=_)},null,8,["modelValue"])])]),c("div",Z,[n(s(Y),{type:"submit",icon:"pi pi-check",label:"Save"})])],40,K)):G("",!0)]}),_:1}),n(s(B),{header:"Assign Permissions"},{default:p(()=>{var r;return[n(q,{permissions:(r=s(i))==null?void 0:r.perms,role:s(i)},null,8,["permissions","role"])]}),_:1})]),_:1})):(b(),x(s(H),{key:1,severity:"error"},{default:p(()=>[ee]),_:1}))}}}));export{ne as default};
