var j=Object.defineProperty,w=Object.defineProperties;var B=Object.getOwnPropertyDescriptors;var h=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var v=(t,e,o)=>e in t?j(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,p=(t,e)=>{for(var o in e||(e={}))N.call(e,o)&&v(t,o,e[o]);if(h)for(var o of h(e))S.call(e,o)&&v(t,o,e[o]);return t},y=(t,e)=>w(t,B(e));import{e as b,A as E,p as g,g as F,u as A,m as l,i as C,k as i,j as f,B as M,v as P,w as T,D as U,d as $,o as k,y as z}from"./vendor.05df324e.js";import{s as D}from"./button.esm.cbb15c31.js";import{s as G}from"./message.esm.2b7d3da1.js";import{s as V}from"./inputtext.esm.b08d2117.js";import"./ripple.esm.574b991d.js";const Y=["onSubmit"],q={class:""},H={class:"my-2"},I=i("label",null,"Name",-1),J={class:"my-2"},K=i("label",null,"Guard Name",-1),L={class:"text-right min-w-[300px] pt-2 border-t-2"},O=z("You are not authorized to perform this action"),Q=b({name:"PermissionEditForm"}),ae=b(y(p({},Q),{props:{model:{}},emits:["updated","error"],setup(t,{emit:e}){const o=t,r=E(()=>{var s,a;return(a=(s=U().props)==null?void 0:s.value)==null?void 0:a.flash});g([]),g(!1);const _=F(),u=o.model,m=A(p({},u)),x=async()=>{m.put($("acacia.auth.permissions.update",u),{onSuccess:s=>{var d;const a=s.props.flash;_.add({severity:"success",summary:"Success",detail:a==null?void 0:a.success,life:2e3});const n=(d=r.value)==null?void 0:d.payload;e("updated",{payload:n})},onError:s=>{var d,c;let a=((d=r.value)==null?void 0:d.error)||(s==null?void 0:s.message)||(s==null?void 0:s.error)||s||"A server error occurred.";_.add({severity:"error",summary:"Error",detail:a,life:3e3});const n=(c=r.value)==null?void 0:c.payload;e("error",{payload:n,message:a})},onFinish:s=>{}})};return(s,a)=>{var n,d;return((d=(n=l(u))==null?void 0:n.can)==null?void 0:d.update)?(k(),C("form",{key:0,onSubmit:M(x,["prevent"])},[i("div",q,[i("div",H,[I,f(l(V),{class:"block w-full",modelValue:l(m).name,"onUpdate:modelValue":a[0]||(a[0]=c=>l(m).name=c)},null,8,["modelValue"])]),i("div",J,[K,f(l(V),{class:"block w-full",modelValue:l(m).guard_name,"onUpdate:modelValue":a[1]||(a[1]=c=>l(m).guard_name=c)},null,8,["modelValue"])])]),i("div",L,[f(l(D),{type:"submit",icon:"pi pi-check",label:"Save"})])],40,Y)):(k(),P(l(G),{key:1,severity:"error"},{default:T(()=>[O]),_:1}))}}}));export{ae as default};
