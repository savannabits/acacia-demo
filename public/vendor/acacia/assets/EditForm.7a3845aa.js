var E=Object.defineProperty,C=Object.defineProperties;var F=Object.getOwnPropertyDescriptors;var V=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var g=(l,e,t)=>e in l?E(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t,h=(l,e)=>{for(var t in e||(e={}))A.call(e,t)&&g(l,t,e[t]);if(V)for(var t of V(e))M.call(e,t)&&g(l,t,e[t]);return l},k=(l,e)=>C(l,F(e));import{d as S,s as P,j as w,b as T,u as U,g as s,n as x,w as p,x as j,o as v,e as c,c as q,f as m,v as z,l as G,q as I,h as R}from"./main.9e765f7d.js";import{s as Y}from"./button.esm.a5ac1061.js";import D from"./AssignPerms.6bb28a65.js";import{s as H}from"./message.esm.a16f09f2.js";import{s as J,a as N}from"./tabpanel.esm.ff7e1051.js";import{s as B}from"./inputtext.esm.dc0f2264.js";import"./ripple.esm.1fe20658.js";import"./checkbox.esm.12d385d5.js";const K=["onSubmit"],L={class:""},O={class:"my-2"},Q=m("label",null,"Name",-1),W={class:"my-2"},X=m("label",null,"Guard Name",-1),Z={class:"text-right min-w-[300px] pt-2 border-t-2"},ee=I("You are not authorized to perform this action"),se=S({name:"RoleEditForm"}),me=S(k(h({},se),{props:{model:{}},emits:["updated","error"],setup(l,{emit:e}){const t=l,f=P(()=>{var a,o;return(o=(a=j().props)==null?void 0:a.value)==null?void 0:o.flash});w([]),w(!1);const y=T(),i=t.model,u=U(h({},i)),$=async()=>{u.put(R("acacia.auth.roles.update",i),{onSuccess:a=>{var r;const o=a.props.flash;y.add({severity:"success",summary:"Success",detail:o==null?void 0:o.success,life:2e3});const n=(r=f.value)==null?void 0:r.payload;e("updated",{payload:n})},onError:a=>{var r,d;let o=((r=f.value)==null?void 0:r.error)||(a==null?void 0:a.message)||(a==null?void 0:a.error)||a||"A server error occurred.";y.add({severity:"error",summary:"Error",detail:o,life:3e3});const n=(d=f.value)==null?void 0:d.payload;e("error",{payload:n,message:o})},onFinish:a=>{}})};return(a,o)=>{var n,r;return(r=(n=s(i))==null?void 0:n.can)!=null&&r.view?(v(),x(s(J),{key:0},{default:p(()=>[c(s(N),{header:"Basic Info"},{default:p(()=>{var d,b;return[(b=(d=s(i))==null?void 0:d.can)!=null&&b.update?(v(),q("form",{key:0,onSubmit:z($,["prevent"])},[m("div",L,[m("div",O,[Q,c(s(B),{class:"block w-full",modelValue:s(u).name,"onUpdate:modelValue":o[0]||(o[0]=_=>s(u).name=_)},null,8,["modelValue"])]),m("div",W,[X,c(s(B),{class:"block w-full",modelValue:s(u).guard_name,"onUpdate:modelValue":o[1]||(o[1]=_=>s(u).guard_name=_)},null,8,["modelValue"])])]),m("div",Z,[c(s(Y),{type:"submit",icon:"pi pi-check",label:"Save"})])],40,K)):G("",!0)]}),_:1}),c(s(N),{header:"Assign Permissions"},{default:p(()=>{var d;return[c(D,{permissions:(d=s(i))==null?void 0:d.perms,role:s(i)},null,8,["permissions","role"])]}),_:1})]),_:1})):(v(),x(s(H),{key:1,severity:"error"},{default:p(()=>[ee]),_:1}))}}}));export{me as default};
