var w=Object.defineProperty,N=Object.defineProperties;var S=Object.getOwnPropertyDescriptors;var h=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable;var v=(t,e,o)=>e in t?w(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,p=(t,e)=>{for(var o in e||(e={}))B.call(e,o)&&v(t,o,e[o]);if(h)for(var o of h(e))E.call(e,o)&&v(t,o,e[o]);return t},y=(t,e)=>N(t,S(e));import{d as k,s as F,j as b,b as C,u as M,g as l,c as P,f as r,e as f,v as T,n as U,w as $,x as j,h as q,o as V,q as z}from"./main.9e765f7d.js";import{s as A}from"./button.esm.a5ac1061.js";import{s as G}from"./message.esm.a16f09f2.js";import{s as g}from"./inputtext.esm.dc0f2264.js";import"./ripple.esm.1fe20658.js";const Y=["onSubmit"],D={class:""},H={class:"my-2"},I=r("label",null,"Name",-1),J={class:"my-2"},K=r("label",null,"Guard Name",-1),L={class:"text-right min-w-[300px] pt-2 border-t-2"},O=z("You are not authorized to perform this action"),Q=k({name:"PermissionEditForm"}),ae=k(y(p({},Q),{props:{model:{}},emits:["updated","error"],setup(t,{emit:e}){const o=t,u=F(()=>{var s,a;return(a=(s=j().props)==null?void 0:s.value)==null?void 0:a.flash});b([]),b(!1);const _=C(),m=o.model,i=M(p({},m)),x=async()=>{i.put(q("acacia.auth.permissions.update",m),{onSuccess:s=>{var d;const a=s.props.flash;_.add({severity:"success",summary:"Success",detail:a==null?void 0:a.success,life:2e3});const n=(d=u.value)==null?void 0:d.payload;e("updated",{payload:n})},onError:s=>{var d,c;let a=((d=u.value)==null?void 0:d.error)||(s==null?void 0:s.message)||(s==null?void 0:s.error)||s||"A server error occurred.";_.add({severity:"error",summary:"Error",detail:a,life:3e3});const n=(c=u.value)==null?void 0:c.payload;e("error",{payload:n,message:a})},onFinish:s=>{}})};return(s,a)=>{var n,d;return(d=(n=l(m))==null?void 0:n.can)!=null&&d.update?(V(),P("form",{key:0,onSubmit:T(x,["prevent"])},[r("div",D,[r("div",H,[I,f(l(g),{class:"block w-full",modelValue:l(i).name,"onUpdate:modelValue":a[0]||(a[0]=c=>l(i).name=c)},null,8,["modelValue"])]),r("div",J,[K,f(l(g),{class:"block w-full",modelValue:l(i).guard_name,"onUpdate:modelValue":a[1]||(a[1]=c=>l(i).guard_name=c)},null,8,["modelValue"])])]),r("div",L,[f(l(A),{type:"submit",icon:"pi pi-check",label:"Save"})])],40,Y)):(V(),U(l(G),{key:1,severity:"error"},{default:$(()=>[O]),_:1}))}}}));export{ae as default};
