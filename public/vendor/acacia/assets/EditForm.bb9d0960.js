var N=Object.defineProperty,T=Object.defineProperties;var P=Object.getOwnPropertyDescriptors;var k=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var w=(u,o,n)=>o in u?N(u,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):u[o]=n,g=(u,o)=>{for(var n in o||(o={}))j.call(o,n)&&w(u,n,o[n]);if(k)for(var n of k(o))D.call(o,n)&&w(u,n,o[n]);return u},x=(u,o)=>T(u,P(o));import{d as B,s as Y,j as U,b as q,u as z,g as e,n as A,w as _,x as H,o as b,e as m,c as v,f as a,v as I,l as L,m as O,F as $,t as G,q as J,a0 as K,h as E}from"./main.9e765f7d.js";import{s as Q}from"./button.esm.a5ac1061.js";import{s as W}from"./message.esm.a16f09f2.js";import{s as X,a as S}from"./tabpanel.esm.ff7e1051.js";import{s as V}from"./inputtext.esm.dc0f2264.js";import Z from"./AcaciaDatepicker.3e912237.js";import{s as M}from"./password.esm.f13419fb.js";import{s as ee}from"./checkbox.esm.12d385d5.js";import{s as R}from"./divider.esm.06764bbd.js";import"./ripple.esm.1fe20658.js";import"./vue-flatpickr.min.9bcaefd2.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./overlayeventbus.esm.ef5cc0da.js";const se=["onSubmit"],ae={class:""},le={class:"my-2"},oe=a("label",null,"Name",-1),te={class:"my-2"},de=a("label",null,"Email",-1),ie={class:"my-2"},ne=a("label",null,"Email Verified At",-1),me={class:"my-2"},ue=a("label",null,"Password",-1),re=a("p",{class:"mt-2 font-bold"}," Password MUST have: ",-1),ce=a("ul",{class:"pl-2 ml-2 mt-0",style:{"line-height":"1.5"}},[a("li",null,"At least one lowercase"),a("li",null,"At least one uppercase"),a("li",null,"At least one numeric"),a("li",null,"Minimum 8 characters")],-1),pe={class:"my-2"},fe=a("label",null,"Repeat Password",-1),_e={class:"my-2"},be=a("label",null,"Remember Token",-1),he={class:"text-right min-w-[300px] pt-2 border-t-2"},ye={class:"field-checkbox flex items-center gap-2 gap-x-4"},ge=["for"],ve=J("You are not authorized to perform this action"),Ve=B({name:"UserEditForm"}),Te=B(x(g({},Ve),{props:{model:Object},emits:["updated","error"],setup(u,{emit:o}){const n=u,y=Y(()=>{var l,s;return(s=(l=H().props)==null?void 0:l.value)==null?void 0:s.flash});U([]),U(!1);const h=q(),p=n.model,i=z(g({},p)),C=async(l,s)=>{K.post(E("api.v1.users.user.toggle-role",p),{role_id:s.id,assigned:l}).then(t=>{h.add({severity:"success",summary:`Role ${l?"Assigned":"Revoked"}`,detail:"The role assignment has been successfully updated.",life:1e3})}).catch(t=>{var r,d;h.add({severity:"error",summary:"Error",detail:((d=(r=t==null?void 0:t.response)==null?void 0:r.data)==null?void 0:d.message)||(t==null?void 0:t.message)||t,life:2e3})})},F=async()=>{i.put(E("acacia.auth.users.update",p),{onSuccess:l=>{var r;const s=l.props.flash;h.add({severity:"success",summary:"Success",detail:s==null?void 0:s.success,life:2e3});const t=(r=y.value)==null?void 0:r.payload;o("updated",{payload:t})},onError:l=>{var r,d;let s=((r=y.value)==null?void 0:r.error)||(l==null?void 0:l.message)||(l==null?void 0:l.error)||l||"A server error occurred.";h.add({severity:"error",summary:"Error",detail:s,life:3e3});const t=(d=y.value)==null?void 0:d.payload;o("error",{payload:t,message:s})},onFinish:l=>{}})};return(l,s)=>{var t,r;return(r=(t=e(p))==null?void 0:t.can)!=null&&r.view?(b(),A(e(X),{key:0},{default:_(()=>[m(e(S),{header:"Basic Info"},{default:_(()=>{var d,f;return[(f=(d=e(p))==null?void 0:d.can)!=null&&f.update?(b(),v("form",{key:0,onSubmit:I(F,["prevent"])},[a("div",ae,[a("div",le,[oe,m(e(V),{class:"block w-full",modelValue:e(i).name,"onUpdate:modelValue":s[0]||(s[0]=c=>e(i).name=c)},null,8,["modelValue"])]),a("div",te,[de,m(e(V),{class:"block w-full",modelValue:e(i).email,"onUpdate:modelValue":s[1]||(s[1]=c=>e(i).email=c)},null,8,["modelValue"])]),a("div",ie,[ne,m(Z,{modelValue:e(i).email_verified_at,"onUpdate:modelValue":s[2]||(s[2]=c=>e(i).email_verified_at=c),class:"block w-full","data-disable-mobile":!0,"data-date-format":"Y-m-d H:i","data-enable-time":!0},null,8,["modelValue"])]),a("div",me,[ue,m(e(M),{class:"block w-full",inputClass:"w-full block",modelValue:e(i).password,"onUpdate:modelValue":s[3]||(s[3]=c=>e(i).password=c),toggleMask:""},{footer:_(()=>[m(e(R)),re,ce]),_:1},8,["modelValue"])]),a("div",pe,[fe,m(e(M),{class:"block w-full",inputClass:"w-full block",modelValue:e(i).password_confirmation,"onUpdate:modelValue":s[4]||(s[4]=c=>e(i).password_confirmation=c),toggleMask:""},null,8,["modelValue"])]),a("div",_e,[be,m(e(V),{class:"block w-full",modelValue:e(i).remember_token,"onUpdate:modelValue":s[5]||(s[5]=c=>e(i).remember_token=c)},null,8,["modelValue"])])]),a("div",he,[m(e(Q),{type:"submit",icon:"pi pi-check",label:"Save"})])],40,se)):L("",!0)]}),_:1}),m(e(S),{header:"Assign Roles"},{default:_(()=>[(b(!0),v($,null,O(e(p).assigned_roles,d=>(b(),v($,null,[a("div",ye,[m(e(ee),{"onUpdate:modelValue":[f=>C(f,d),f=>d.assigned=f],id:d.id,modelValue:d.assigned,binary:!0},null,8,["onUpdate:modelValue","id","modelValue"]),a("label",{for:d.id},G(d.name),9,ge)]),m(e(R))],64))),256))]),_:1})]),_:1})):(b(),A(e(W),{key:1,severity:"error"},{default:_(()=>[ve]),_:1}))}}}));export{Te as default};
