var C=Object.defineProperty,M=Object.defineProperties;var T=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable;var h=(u,t,n)=>t in u?C(u,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):u[t]=n,V=(u,t)=>{for(var n in t||(t={}))B.call(t,n)&&h(u,n,t[n]);if(v)for(var n of v(t))E.call(t,n)&&h(u,n,t[n]);return u},k=(u,t)=>M(u,T(t));import{d as S,s as I,j as w,b as $,u as z,g as l,c as F,f as s,e as d,p as x,h as b,v as L,n as N,w as A,x as K,o as U,q as j}from"./main.9e765f7d.js";import{s as q}from"./button.esm.a5ac1061.js";import{s as P}from"./message.esm.a16f09f2.js";import{s as c}from"./inputtext.esm.dc0f2264.js";import{s as f}from"./inputswitch.esm.90fe6344.js";import{s as Y}from"./textarea.esm.a52171b9.js";import g from"./AcaciaRichSelect.1af0e202.js";import"./ripple.esm.1fe20658.js";import"./vue-select.c5557806.js";import"./plugin-vue_export-helper.21dcd24c.js";const D=["onSubmit"],G={class:""},H={class:"my-2"},J=s("label",null,"Type",-1),O={class:"my-2"},Q=s("label",null,"Method",-1),W={class:"my-2"},X=s("label",null,"Related Key",-1),Z={class:"my-2"},ll=s("label",null,"Related Table",-1),el={class:"my-2"},ol=s("label",null,"Local Key",-1),sl={class:"my-2"},al=s("label",null,"Label Column",-1),tl={class:"my-2 flex items-center flex-wrap gap-x-2"},dl=s("label",null,"Is Recursive",-1),il={class:"my-2 flex items-center flex-wrap gap-x-2"},nl=s("label",null,"Is Morph",-1),ul={class:"my-2"},ml=s("label",null,"Morph Type Column",-1),cl={class:"my-2"},rl=s("label",null,"Morph Id Column",-1),pl={class:"my-2"},_l=s("label",null,"Server Validation",-1),Vl={class:"my-2 flex items-center flex-wrap gap-x-2"},bl=s("label",null,"In List",-1),fl={class:"my-2"},yl=s("label",null,"Related",-1),vl={class:"my-2"},hl=s("label",null,"Schematic",-1),kl={class:"text-right min-w-[300px] pt-2 border-t-2"},wl=j("You are not authorized to perform this action"),xl=S({name:"RelationshipEditForm"}),zl=S(k(V({},xl),{props:{model:{}},emits:["updated","error"],setup(u,{emit:t}){const n=u,p=I(()=>{var i,e;return(e=(i=K().props)==null?void 0:i.value)==null?void 0:e.flash});w([]),w(!1);const y=$(),_=n.model,a=z(V({},_)),R=async()=>{a.put(b("acacia.g-panel.acacia-relationships.update",_),{onSuccess:i=>{var m;const e=i.props.flash;y.add({severity:"success",summary:"Success",detail:e==null?void 0:e.success,life:2e3});const r=(m=p.value)==null?void 0:m.payload;t("updated",{payload:r})},onError:i=>{var m,o;let e=((m=p.value)==null?void 0:m.error)||(i==null?void 0:i.message)||(i==null?void 0:i.error)||i||"A server error occurred.";y.add({severity:"error",summary:"Error",detail:e,life:3e3});const r=(o=p.value)==null?void 0:o.payload;t("error",{payload:r,message:e})},onFinish:i=>{}})};return(i,e)=>{var r,m;return(m=(r=l(_))==null?void 0:r.can)!=null&&m.update?(U(),F("form",{key:0,onSubmit:L(R,["prevent"])},[s("div",G,[s("div",H,[J,d(l(c),{class:"block w-full",modelValue:l(a).type,"onUpdate:modelValue":e[0]||(e[0]=o=>l(a).type=o)},null,8,["modelValue"])]),s("div",O,[Q,d(l(c),{class:"block w-full",modelValue:l(a).method,"onUpdate:modelValue":e[1]||(e[1]=o=>l(a).method=o)},null,8,["modelValue"])]),s("div",W,[X,d(l(c),{class:"block w-full",modelValue:l(a).related_key,"onUpdate:modelValue":e[2]||(e[2]=o=>l(a).related_key=o)},null,8,["modelValue"])]),s("div",Z,[ll,d(l(c),{class:"block w-full",modelValue:l(a).related_table,"onUpdate:modelValue":e[3]||(e[3]=o=>l(a).related_table=o)},null,8,["modelValue"])]),s("div",el,[ol,d(l(c),{class:"block w-full",modelValue:l(a).local_key,"onUpdate:modelValue":e[4]||(e[4]=o=>l(a).local_key=o)},null,8,["modelValue"])]),s("div",sl,[al,d(l(c),{class:"block w-full",modelValue:l(a).label_column,"onUpdate:modelValue":e[5]||(e[5]=o=>l(a).label_column=o)},null,8,["modelValue"])]),s("div",tl,[dl,d(l(f),{class:"block",modelValue:l(a).is_recursive,"onUpdate:modelValue":e[6]||(e[6]=o=>l(a).is_recursive=o)},null,8,["modelValue"])]),s("div",il,[nl,d(l(f),{class:"block",modelValue:l(a).is_morph,"onUpdate:modelValue":e[7]||(e[7]=o=>l(a).is_morph=o)},null,8,["modelValue"])]),s("div",ul,[ml,d(l(c),{class:"block w-full",modelValue:l(a).morph_type_column,"onUpdate:modelValue":e[8]||(e[8]=o=>l(a).morph_type_column=o)},null,8,["modelValue"])]),s("div",cl,[rl,d(l(c),{class:"block w-full",modelValue:l(a).morph_id_column,"onUpdate:modelValue":e[9]||(e[9]=o=>l(a).morph_id_column=o)},null,8,["modelValue"])]),s("div",pl,[_l,d(l(Y),{modelValue:l(a).server_validation,"onUpdate:modelValue":e[10]||(e[10]=o=>l(a).server_validation=o),class:"block w-full",autoResize:!0,rows:"5",cols:"30"},null,8,["modelValue"])]),s("div",Vl,[bl,d(l(f),{class:"block",modelValue:l(a).in_list,"onUpdate:modelValue":e[11]||(e[11]=o=>l(a).in_list=o)},null,8,["modelValue"])]),s("div",fl,[yl,d(g,{modelValue:l(a).related,"onUpdate:modelValue":e[12]||(e[12]=o=>l(a).related=o),class:x("block w-full"),"api-url":l(b)("api.v1.acacia-schematics.index"),label:"table_name"},null,8,["modelValue","api-url"])]),s("div",vl,[hl,d(g,{modelValue:l(a).schematic,"onUpdate:modelValue":e[13]||(e[13]=o=>l(a).schematic=o),class:x("block w-full"),"api-url":l(b)("api.v1.acacia-schematics.index"),label:"table_name"},null,8,["modelValue","api-url"])])]),s("div",kl,[d(l(q),{type:"submit",icon:"pi pi-check",label:"Save"})])],40,D)):(U(),N(l(P),{key:1,severity:"error"},{default:A(()=>[wl]),_:1}))}}}));export{zl as default};
