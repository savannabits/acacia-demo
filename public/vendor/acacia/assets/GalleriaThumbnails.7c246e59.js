import{a5 as m,i as o,k as h,M as f,x as u,s as c,an as p,F as I,t as g,O as _,o as r,_ as x,v as V,Q as w}from"./vendor.05df324e.js";import{R as y}from"./ripple.esm.574b991d.js";import{_ as S}from"./plugin-vue_export-helper.21dcd24c.js";const C={name:"GalleriaThumbnails",emits:["stop-slideshow","update:activeIndex"],props:{containerId:{type:String,default:null},value:{type:Array,default:null},numVisible:{type:Number,default:3},activeIndex:{type:Number,default:0},isVertical:{type:Boolean,default:!1},slideShowActive:{type:Boolean,default:!1},circular:{type:Boolean,default:!1},responsiveOptions:{type:Array,default:null},contentHeight:{type:String,default:"300px"},showThumbnailNavigators:{type:Boolean,default:!0},templates:{type:null,default:null}},startPos:null,thumbnailsStyle:null,sortedResponsiveOptions:null,data(){return{d_numVisible:this.numVisible,d_oldNumVisible:this.numVisible,d_activeIndex:this.activeIndex,d_oldActiveItemIndex:this.activeIndex,totalShiftedItems:0,page:0}},watch:{numVisible(t,e){this.d_numVisible=t,this.d_oldNumVisible=e},activeIndex(t,e){this.d_activeIndex=t,this.d_oldActiveItemIndex=e}},mounted(){this.createStyle(),this.calculatePosition(),this.responsiveOptions&&this.bindDocumentListeners()},updated(){let t=this.totalShiftedItems;(this.d_oldNumVisible!==this.d_numVisible||this.d_oldActiveItemIndex!==this.d_activeIndex)&&(this.d_activeIndex<=this.getMedianItemIndex()?t=0:this.value.length-this.d_numVisible+this.getMedianItemIndex()<this.d_activeIndex?t=this.d_numVisible-this.value.length:this.value.length-this.d_numVisible<this.d_activeIndex&&this.d_numVisible%2==0?t=this.d_activeIndex*-1+this.getMedianItemIndex()+1:t=this.d_activeIndex*-1+this.getMedianItemIndex(),t!==this.totalShiftedItems&&(this.totalShiftedItems=t),this.$refs.itemsContainer.style.transform=this.isVertical?`translate3d(0, ${t*(100/this.d_numVisible)}%, 0)`:`translate3d(${t*(100/this.d_numVisible)}%, 0, 0)`,this.d_oldActiveItemIndex!==this.d_activeIndex&&(m.removeClass(this.$refs.itemsContainer,"p-items-hidden"),this.$refs.itemsContainer.style.transition="transform 500ms ease 0s"),this.d_oldActiveItemIndex=this.d_activeIndex,this.d_oldNumVisible=this.d_numVisible)},beforeUnmount(){this.responsiveOptions&&this.unbindDocumentListeners(),this.thumbnailsStyle&&this.thumbnailsStyle.parentNode.removeChild(this.thumbnailsStyle)},methods:{step(t){let e=this.totalShiftedItems+t;t<0&&-1*e+this.d_numVisible>this.value.length-1?e=this.d_numVisible-this.value.length:t>0&&e>0&&(e=0),this.circular&&(t<0&&this.value.length-1===this.d_activeIndex?e=0:t>0&&this.d_activeIndex===0&&(e=this.d_numVisible-this.value.length)),this.$refs.itemsContainer&&(m.removeClass(this.$refs.itemsContainer,"p-items-hidden"),this.$refs.itemsContainer.style.transform=this.isVertical?`translate3d(0, ${e*(100/this.d_numVisible)}%, 0)`:`translate3d(${e*(100/this.d_numVisible)}%, 0, 0)`,this.$refs.itemsContainer.style.transition="transform 500ms ease 0s"),this.totalShiftedItems=e},stopSlideShow(){this.slideShowActive&&this.stopSlideShow&&this.$emit("stop-slideshow")},getMedianItemIndex(){let t=Math.floor(this.d_numVisible/2);return this.d_numVisible%2?t:t-1},navBackward(t){this.stopSlideShow();let e=this.d_activeIndex!==0?this.d_activeIndex-1:0,s=e+this.totalShiftedItems;this.d_numVisible-s-1>this.getMedianItemIndex()&&(-1*this.totalShiftedItems!=0||this.circular)&&this.step(1);let n=this.circular&&this.d_activeIndex===0?this.value.length-1:e;this.$emit("update:activeIndex",n),t.cancelable&&t.preventDefault()},navForward(t){this.stopSlideShow();let e=this.d_activeIndex+1;e+this.totalShiftedItems>this.getMedianItemIndex()&&(-1*this.totalShiftedItems<this.getTotalPageNumber()-1||this.circular)&&this.step(-1);let s=this.circular&&this.value.length-1===this.d_activeIndex?0:e;this.$emit("update:activeIndex",s),t.cancelable&&t.preventDefault()},onItemClick(t){this.stopSlideShow();let e=t;if(e!==this.d_activeIndex){const s=e+this.totalShiftedItems;let n=0;e<this.d_activeIndex?(n=this.d_numVisible-s-1-this.getMedianItemIndex(),n>0&&-1*this.totalShiftedItems!=0&&this.step(n)):(n=this.getMedianItemIndex()-s,n<0&&-1*this.totalShiftedItems<this.getTotalPageNumber()-1&&this.step(n)),this.$emit("update:activeIndex",e)}},onTransitionEnd(){this.$refs.itemsContainer&&(m.addClass(this.$refs.itemsContainer,"p-items-hidden"),this.$refs.itemsContainer.style.transition="")},onTouchStart(t){let e=t.changedTouches[0];this.startPos={x:e.pageX,y:e.pageY}},onTouchMove(t){t.cancelable&&t.preventDefault()},onTouchEnd(t){let e=t.changedTouches[0];this.isVertical?this.changePageOnTouch(t,e.pageY-this.startPos.y):this.changePageOnTouch(t,e.pageX-this.startPos.x)},changePageOnTouch(t,e){e<0?this.navForward(t):this.navBackward(t)},getTotalPageNumber(){return this.value.length>this.d_numVisible?this.value.length-this.d_numVisible+1:0},createStyle(){this.thumbnailsStyle||(this.thumbnailsStyle=document.createElement("style"),this.thumbnailsStyle.type="text/css",document.body.appendChild(this.thumbnailsStyle));let t=`
                #${this.containerId} .p-galleria-thumbnail-item {
                    flex: 1 0 ${100/this.d_numVisible}%
                }
            `;if(this.responsiveOptions){this.sortedResponsiveOptions=[...this.responsiveOptions],this.sortedResponsiveOptions.sort((e,s)=>{const n=e.breakpoint,l=s.breakpoint;let i=null;return n==null&&l!=null?i=-1:n!=null&&l==null?i=1:n==null&&l==null?i=0:typeof n=="string"&&typeof l=="string"?i=n.localeCompare(l,void 0,{numeric:!0}):i=n<l?-1:n>l?1:0,-1*i});for(let e=0;e<this.sortedResponsiveOptions.length;e++){let s=this.sortedResponsiveOptions[e];t+=`
                        @media screen and (max-width: ${s.breakpoint}) {
                            #${this.containerId} .p-galleria-thumbnail-item {
                                flex: 1 0 ${100/s.numVisible}%
                            }
                        }
                    `}}this.thumbnailsStyle.innerHTML=t},calculatePosition(){if(this.$refs.itemsContainer&&this.sortedResponsiveOptions){let t=window.innerWidth,e={numVisible:this.numVisible};for(let s=0;s<this.sortedResponsiveOptions.length;s++){let n=this.sortedResponsiveOptions[s];parseInt(n.breakpoint,10)>=t&&(e=n)}this.d_numVisible!==e.numVisible&&(this.d_numVisible=e.numVisible)}},bindDocumentListeners(){this.documentResizeListener||(this.documentResizeListener=()=>{this.calculatePosition()},window.addEventListener("resize",this.documentResizeListener))},unbindDocumentListeners(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)},isNavBackwardDisabled(){return!this.circular&&this.d_activeIndex===0||this.value.length<=this.d_numVisible},isNavForwardDisabled(){return!this.circular&&this.d_activeIndex===this.value.length-1||this.value.length<=this.d_numVisible},firstItemAciveIndex(){return this.totalShiftedItems*-1},lastItemActiveIndex(){return this.firstItemAciveIndex()+this.d_numVisible-1},isItemActive(t){return this.firstItemAciveIndex()<=t&&this.lastItemActiveIndex()>=t}},computed:{navBackwardClass(){return["p-galleria-thumbnail-prev p-link",{"p-disabled":this.isNavBackwardDisabled()}]},navForwardClass(){return["p-galleria-thumbnail-next p-link",{"p-disabled":this.isNavForwardDisabled()}]},navBackwardIconClass(){return["p-galleria-thumbnail-prev-icon pi",{"pi-chevron-left":!this.isVertical,"pi-chevron-up":this.isVertical}]},navForwardIconClass(){return["p-galleria-thumbnail-next-icon pi",{"pi-chevron-right":!this.isVertical,"pi-chevron-down":this.isVertical}]}},directives:{ripple:y}},k={class:"p-galleria-thumbnail-wrapper"},T={class:"p-galleria-thumbnail-container"},N=["disabled"],A=["tabindex","onClick","onKeydown"],B=["disabled"];function D(t,e,s,n,l,i){const v=_("ripple");return r(),o("div",k,[h("div",T,[s.showThumbnailNavigators?f((r(),o("button",{key:0,class:u(i.navBackwardClass),onClick:e[0]||(e[0]=a=>i.navBackward(a)),disabled:i.isNavBackwardDisabled(),type:"button"},[h("span",{class:u(i.navBackwardIconClass)},null,2)],10,N)),[[v]]):c("",!0),h("div",{class:"p-galleria-thumbnail-items-container",style:p({height:s.isVertical?s.contentHeight:""})},[h("div",{ref:"itemsContainer",class:"p-galleria-thumbnail-items",onTransitionend:e[1]||(e[1]=(...a)=>i.onTransitionEnd&&i.onTransitionEnd(...a)),onTouchstart:e[2]||(e[2]=a=>i.onTouchStart(a)),onTouchmove:e[3]||(e[3]=a=>i.onTouchMove(a)),onTouchend:e[4]||(e[4]=a=>i.onTouchEnd(a))},[(r(!0),o(I,null,g(s.value,(a,d)=>(r(),o("div",{key:`p-galleria-thumbnail-item-${d}`,class:u(["p-galleria-thumbnail-item",{"p-galleria-thumbnail-item-current":s.activeIndex===d,"p-galleria-thumbnail-item-active":i.isItemActive(d),"p-galleria-thumbnail-item-start":i.firstItemAciveIndex()===d,"p-galleria-thumbnail-item-end":i.lastItemActiveIndex()===d}])},[h("div",{class:"p-galleria-thumbnail-item-content",tabindex:i.isItemActive(d)?0:null,onClick:b=>i.onItemClick(d),onKeydown:x(b=>i.onItemClick(d),["enter"])},[s.templates.thumbnail?(r(),V(w(s.templates.thumbnail),{key:0,item:a},null,8,["item"])):c("",!0)],40,A)],2))),128))],544)],4),s.showThumbnailNavigators?f((r(),o("button",{key:1,class:u(i.navForwardClass),onClick:e[5]||(e[5]=a=>i.navForward(a)),disabled:i.isNavForwardDisabled(),type:"button"},[h("span",{class:u(i.navForwardIconClass)},null,2)],10,B)),[[v]]):c("",!0)])])}var M=S(C,[["render",D]]);export{M as default};
