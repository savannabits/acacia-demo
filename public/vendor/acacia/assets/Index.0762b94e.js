var O=Object.defineProperty,P=Object.defineProperties;var j=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var M=(r,e,t)=>e in r?O(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,k=(r,e)=>{for(var t in e||(e={}))q.call(e,t)&&M(r,t,e[t]);if(x)for(var t of x(e))z.call(e,t)&&M(r,t,e[t]);return r},w=(r,e)=>P(r,j(e));import G from"./PrimeDatatables.0582f2ad.js";import{s as u}from"./column.esm.6c61d2a3.js";import{s as I}from"./button.esm.a5ac1061.js";import{s as K}from"./contextmenu.esm.bb623b07.js";import{s as C}from"./badge.esm.294925a2.js";import{d as D,h,j as l,a as N,b as V,c as H,e as c,w as g,g as s,$ as J,F as L,i as Q,M as S,a0 as W,o as _,n as T,p as X}from"./main.9e765f7d.js";import"./inputtext.esm.dc0f2264.js";import"./datatable.esm.3689bee8.js";import"./paginator.esm.d428c35b.js";import"./ripple.esm.1fe20658.js";import"./dropdown.esm.5bafa883.js";import"./overlayeventbus.esm.ef5cc0da.js";import"./virtualscroller.esm.76cd2139.js";import"./inputnumber.esm.2f528c5c.js";import"./plugin-vue_export-helper.21dcd24c.js";const Y=D({name:"Schematics",props:{}}),he=D(w(k({},Y),{setup(r){const e=h("api.acacia.schematics.dt"),t="schematics-dt",$=l(["id","table_name","model_class","controller_class","route_name"]),d=l(null),p=l(),f=l([]),B=N(),v=V(),b=l(null),y=o=>[{label:"Manage",icon:"pi pi-pencil",command:()=>Q.Inertia.get(h("acacia.g-panel.acacia-schematics.edit",o)),visible:()=>!0},{label:"Delete",icon:"pi pi-trash",command:()=>{B.require({message:"Are you sure you want to delete this record?",header:"Confirm Deletion",accept:()=>A(o)})},visible:()=>!!o.generated_at}],E=()=>{b.value=new Date().toUTCString()},R=async(o,i)=>{f.value=y(i),await S(),p.value.show(o)},U=async o=>{f.value=y(o.data),await S(),p.value.show(o.originalEvent)},A=async function(o){var i,n,m;try{const a=await W.delete(h("api.acacia.schematics.destroy",o));v.add({severity:"success",detail:a.data.message}),E()}catch(a){const F=((n=(i=a==null?void 0:a.response)==null?void 0:i.data)==null?void 0:n.message)||((m=a==null?void 0:a.data)==null?void 0:m.message)||(a==null?void 0:a.message)||a||"Server error";v.add({severity:"error",detail:F,summary:"Server Error"})}};return(o,i)=>(_(),H(L,null,[c(G,{"api-url":s(e),"column-filters":{},"searchable-columns":$.value,"state-key":t,contextMenu:"",contextMenuSelection:s(d),"onUpdate:contextMenuSelection":i[0]||(i[0]=n=>J(d)?d.value=n:null),onRowContextmenu:U,"row-hover":!0,refresh:s(b)},{default:g(()=>[c(s(u),{field:"model_class",header:"Model",sortable:!0}),c(s(u),{field:"table_name",header:"Table",sortable:!0}),c(s(u),{field:"generated_at",header:"Status",sortable:!0},{body:g(({data:n})=>[n.generated_at?(_(),T(s(C),{key:0,severity:"success",value:"Generated"})):(_(),T(s(C),{key:1,severity:"danger",value:"Pending"}))]),_:1}),c(s(u),null,{body:g(n=>[c(s(I),{class:X(["","p-button-text"]),onClick:m=>R(m,n.data),"icon-pos":"right",icon:"pi pi-ellipsis-v",label:"Actions"},null,8,["onClick"])]),_:1})]),_:1},8,["api-url","searchable-columns","contextMenuSelection","refresh"]),c(s(K),{ref_key:"contextMenu",ref:p,model:s(f)},null,8,["model"])],64))}}));export{he as default};
