var W=Object.defineProperty,J=Object.defineProperties;var Q=Object.getOwnPropertyDescriptors;var N=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;var A=(p,l,n)=>l in p?W(p,l,{enumerable:!0,configurable:!0,writable:!0,value:n}):p[l]=n,B=(p,l)=>{for(var n in l||(l={}))X.call(l,n)&&A(p,n,l[n]);if(N)for(var n of N(l))Z.call(l,n)&&A(p,n,l[n]);return p},P=(p,l)=>J(p,Q(l));import{e as T,d as x,p as c,f as ee,g as te,i as ae,j as i,w as o,m as a,a6 as se,F as ie,o as b,k as d,v as j,s as k,z as $,x as oe,a7 as le,y as ne,Y as z,a as E}from"./vendor.05df324e.js";import re from"./Backend.5aa1bcce.js";import de from"./PrimeDatatables.06075155.js";import{s as u}from"./column.esm.cc8b8b77.js";import{s as f}from"./button.esm.cbb15c31.js";import{s as pe}from"./contextmenu.esm.552fe433.js";import{d as O}from"./dayjs.min.2d765ffc.js";import{s as S}from"./dialog.esm.7f94084b.js";import ce from"./CreateForm.4546a24d.js";import me from"./EditForm.0037293b.js";import ue from"./ShowForm.6592bfa3.js";import{s as fe}from"./message.esm.2b7d3da1.js";import"./Sidebar.eaa3bc39.js";import"./SidebarLinkGroup.631e5e48.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./Header.f4796df8.js";import"./ModalSearch.0fe5a03a.js";import"./DropdownNotifications.8ff848f9.js";import"./DropdownHelp.ee3a80f5.js";import"./DropdownProfile.b6a2cd02.js";import"./user-avatar-32.07bf604b.js";import"./WelcomeBanner.e6597c05.js";import"./DashboardAvatars.03cd71bc.js";import"./DropdownFilter.d3d0573f.js";import"./Datepicker.0a132f4e.js";import"./vue-flatpickr.min.87ca1928.js";import"./SidebarLink.e30e4992.js";import"./confirmdialog.esm.5be0612a.js";import"./ripple.esm.574b991d.js";import"./SidebarParentLink.acf5cc4a.js";import"./inputtext.esm.b08d2117.js";import"./datatable.esm.6e02ebef.js";import"./paginator.esm.ff35b289.js";import"./dropdown.esm.573df5c1.js";import"./overlayeventbus.esm.d529c5a8.js";import"./virtualscroller.esm.adfef9da.js";import"./inputnumber.esm.f09ada2c.js";import"./inputswitch.esm.f0cf91c0.js";import"./textarea.esm.b60c054e.js";import"./AcaciaRichSelect.d07900f6.js";import"./tag.esm.ade7af22.js";import"./AcaciaDd.922ceb07.js";const be=d("title",null,"Relationships",-1),ve=d("h4",{class:"font-black text-2xl px-1 md:px-4"},"Relationships",-1),he={class:"mx-auto flex container items-center justify-center mt-4"},xe={class:"rounded w-full p-2 bg-white"},je={class:"flex flex-wrap items-center justify-end gap-2"},ye=ne("You are not authorized to access this content"),_e=d("h4",{class:"font-black text-xl"},"New Relationship",-1),ke=d("h4",{class:"font-black text-xl"},"Relationship Details",-1),we=d("h4",{class:"font-black text-xl"},"Edit Single Relationship",-1),ge=T({name:"RelationshipsIndex"}),ft=T(P(B({},ge),{setup(p){const l=x("api.v1.acacia-relationships.dt"),n="relationships-dt",L=c(["id","type","method","related_key","related_table","local_key","label_column","is_recursive","is_morph","morph_type_column","morph_id_column","in_list","created_at","updated_at"]),w=c(null),g=c(),C=c([]),V=ee(),R=te(),U=c(null),v=c(!1),h=c(!1),y=c(!1),r=c(null),Y=s=>[{label:"Details",icon:"pi pi-eye",command:async()=>{r.value=null,await F(s),y.value=!0},visible:()=>{var e;return(e=s==null?void 0:s.can)==null?void 0:e.view}},{separator:!0},{label:"Edit",icon:"pi pi-pencil",command:async()=>{r.value=null,await F(s),h.value=!0},visible:()=>{var e;return(e=s==null?void 0:s.can)==null?void 0:e.update}},{label:"Delete",icon:"pi pi-trash",command:()=>{V.require({message:"Are you sure you want to delete this record?",header:"Confirm Deletion",accept:()=>q(s)})},visible:()=>{var e;return(e=s==null?void 0:s.can)==null?void 0:e.delete}}],F=async s=>{E.get(x("api.v1.acacia-relationships.show",s)).then(e=>{var m;r.value=(m=e.data)==null?void 0:m.payload}).catch(e=>{console.error(e),r.value=null})},M=()=>{U.value=new Date().toUTCString()},H=async(s,e)=>{C.value=Y(e),await z(),g.value.show(s)},K=async s=>{C.value=Y(s.data),await z(),g.value.show(s.originalEvent)},q=async function(s){var e,m,_;try{const t=await E.delete(x("api.v1.acacia-relationships.destroy",s));R.add({severity:"success",detail:t.data.message,life:3e3}),M()}catch(t){console.log(t);const D=((m=(e=t==null?void 0:t.response)==null?void 0:e.data)==null?void 0:m.message)||((_=t==null?void 0:t.data)==null?void 0:_.message)||(t==null?void 0:t.message)||t||"Server error";R.add({severity:"error",detail:D,summary:"Server Error",life:1e4})}},G=s=>{v.value=!1,M()},I=s=>{h.value=!1,M()};return(s,e)=>(b(),ae(ie,null,[i(a(se),null,{default:o(()=>[be]),_:1}),i(re,null,{header:o(()=>[ve]),default:o(()=>{var m,_;return[d("div",he,[d("div",xe,[d("div",je,[((m=s.$page.props.can)==null?void 0:m.create)?(b(),j(a(f),{key:0,onClick:e[0]||(e[0]=t=>v.value=!0),"aria-label":"New Comment",label:"New Relationship",icon:"pi pi-plus"})):k("",!0)]),((_=s.$page.props.can)==null?void 0:_.viewAny)?(b(),j(de,{key:0,apiUrl:a(l),columnFilters:{},searchableColumns:L.value,stateKey:n,defaultSortField:"id",contextMenu:"",contextMenuSelection:a(w),"onUpdate:contextMenuSelection":e[1]||(e[1]=t=>le(w)?w.value=t:null),onRowContextmenu:K,rowHover:!0,refresh:a(U)},{default:o(()=>[i(a(u),{field:"schematic.model_class",header:"Model",sortable:!0}),i(a(u),{field:"method",header:"Method",sortable:!0},{body:o(({data:t})=>[d("code",null,"->"+$(t.method)+"()",1)]),_:1}),i(a(u),{field:"type",header:"Type",sortable:!0}),i(a(u),{field:"related_table",header:"Related Table",sortable:!0}),i(a(u),{field:"local_key",header:"Local Key",sortable:!0}),i(a(u),{field:"created_at",header:"Created At",sortable:!0},{body:o(({data:t})=>[d("span",null,$(t.created_at?a(O)(t.created_at).format("MMM DD, YYYY hh:mm a"):"-"),1)]),_:1}),i(a(u),{field:"updated_at",header:"Updated At",sortable:!0},{body:o(({data:t})=>[d("span",null,$(t.updated_at?a(O)(t.updated_at).format("MMM DD, YYYY hh:mm a"):"-"),1)]),_:1}),i(a(u),null,{body:o(t=>[i(a(f),{class:oe(["","p-button-text"]),onClick:D=>H(D,t.data),"icon-pos":"right",icon:"pi pi-ellipsis-v",label:"Options"},null,8,["onClick"])]),_:1})]),_:1},8,["apiUrl","searchableColumns","contextMenuSelection","refresh"])):(b(),j(a(fe),{key:1,severity:"error"},{default:o(()=>[ye]),_:1}))])]),i(a(pe),{ref_key:"contextMenu",ref:g,model:a(C)},null,8,["model"]),i(a(S),{position:"top",maximizable:!0,visible:v.value,"onUpdate:visible":e[4]||(e[4]=t=>v.value=t),modal:!0,breakpoints:{"1600px":"50vw","960px":"75vw","540px":"100vw"},style:{width:"35vw"}},{header:o(()=>[_e]),footer:o(()=>[i(a(f),{label:"Open in a Page",icon:"pi pi-window",onClick:e[2]||(e[2]=t=>s.$inertia.visit(a(x)("acacia.g-panel.acacia-relationships.create"))),class:"p-button-text"}),i(a(f),{label:"Close",icon:"pi pi-times",onClick:e[3]||(e[3]=t=>v.value=!1),class:"p-button-text"})]),default:o(()=>[v.value?(b(),j(ce,{key:0,onCreated:G})):k("",!0)]),_:1},8,["visible"]),i(a(S),{position:"top",maximizable:!0,visible:y.value,"onUpdate:visible":e[7]||(e[7]=t=>y.value=t),modal:!0,breakpoints:{"1600px":"50vw","960px":"75vw","540px":"100vw"},style:{width:"35vw"}},{header:o(()=>[ke]),footer:o(()=>[i(a(f),{label:"Open in a Page",icon:"pi pi-window",onClick:e[5]||(e[5]=t=>s.$inertia.visit(a(x)("acacia.g-panel.acacia-relationships.show",a(r)))),class:"p-button-text"}),i(a(f),{label:"Close",icon:"pi pi-times",onClick:e[6]||(e[6]=t=>(y.value=!1,r.value=null)),class:"p-button-text"})]),default:o(()=>[y.value&&a(r)?(b(),j(ue,{key:0,model:a(r)},null,8,["model"])):k("",!0)]),_:1},8,["visible"]),i(a(S),{position:"top",maximizable:!0,visible:h.value,"onUpdate:visible":e[10]||(e[10]=t=>h.value=t),modal:!0,breakpoints:{"1600px":"50vw","960px":"75vw","540px":"100vw"},style:{width:"35vw"}},{header:o(()=>[we]),footer:o(()=>[i(a(f),{label:"Open in a Page",icon:"pi pi-window",onClick:e[8]||(e[8]=t=>s.$inertia.visit(a(x)("acacia.g-panel.acacia-relationships.edit",a(r)))),class:"p-button-text"}),i(a(f),{label:"Close",icon:"pi pi-times",onClick:e[9]||(e[9]=t=>(h.value=!1,r.value=null)),class:"p-button-text"})]),default:o(()=>[h.value&&a(r)?(b(),j(me,{key:0,model:a(r),onUpdated:I},null,8,["model"])):k("",!0)]),_:1},8,["visible"])]}),_:1})],64))}}));export{ft as default};
