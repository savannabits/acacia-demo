import S from"./Backend.5aa1bcce.js";import{e as P,am as $,p as m,f as N,g as T,i as H,j as t,w as r,F as I,n as R,d as y,Y as w,a as A,r as n,o as v,k as g,v as M,x as E,y as B}from"./vendor.05df324e.js";import F from"./PrimeDatatables.06075155.js";import{s as L}from"./badge.esm.5ac8bf49.js";import{s as O}from"./column.esm.cc8b8b77.js";import{s as V}from"./contextmenu.esm.552fe433.js";import{s as U}from"./button.esm.cbb15c31.js";import{_ as q}from"./plugin-vue_export-helper.21dcd24c.js";import"./Sidebar.eaa3bc39.js";import"./SidebarLinkGroup.631e5e48.js";import"./Header.f4796df8.js";import"./ModalSearch.0fe5a03a.js";import"./DropdownNotifications.8ff848f9.js";import"./DropdownHelp.ee3a80f5.js";import"./DropdownProfile.b6a2cd02.js";import"./user-avatar-32.07bf604b.js";import"./WelcomeBanner.e6597c05.js";import"./DashboardAvatars.03cd71bc.js";import"./DropdownFilter.d3d0573f.js";import"./Datepicker.0a132f4e.js";import"./vue-flatpickr.min.87ca1928.js";import"./SidebarLink.e30e4992.js";import"./confirmdialog.esm.5be0612a.js";import"./ripple.esm.574b991d.js";import"./dialog.esm.7f94084b.js";import"./SidebarParentLink.acf5cc4a.js";import"./inputtext.esm.b08d2117.js";import"./datatable.esm.6e02ebef.js";import"./paginator.esm.ff35b289.js";import"./dropdown.esm.573df5c1.js";import"./overlayeventbus.esm.d529c5a8.js";import"./virtualscroller.esm.adfef9da.js";import"./inputnumber.esm.f09ada2c.js";const z=P({name:"Index",components:{PrimeDatatables:F,Backend:S,Head:$,Column:O,Badge:L,ContextMenu:V,Button:U},setup(){const a=m(null),l=m(),d=m(),u=m([]),C=N(),f=T(),p=m(null),o=e=>[{label:"Show",icon:"pi pi-eye",command:()=>R.Inertia.get(y("crm.customers.show",e)),visible:()=>e==null?void 0:e.active},{label:"Delete",icon:"pi pi-trash",command:()=>{C.require({message:"Are you sure you want to delete this record?",header:"Confirm Deletion",accept:()=>j(e)})},visible:()=>!0}],c=()=>{p.value=new Date().toUTCString()},b=async(e,i)=>{u.value=o(i),await w(),d.value.show(e)},h=async e=>{u.value=o(e.data),await w(),d.value.show(e.originalEvent)},_=m(["first_name","middle_name","surname","email","phone_number"]),j=async function(e){var i,x,k;try{const s=await A.delete(y("api.crm.customers.destroy",e));f.add({severity:"success",detail:s.data.message}),c()}catch(s){const D=((x=(i=s==null?void 0:s.response)==null?void 0:i.data)==null?void 0:x.message)||((k=s==null?void 0:s.data)==null?void 0:k.message)||(s==null?void 0:s.message)||s||"Server error";f.add({severity:"error",detail:D,summary:"Server Error"})}};return{searchableColumns:_,optionsMenu:l,contextMenu:d,refreshTime:p,options:u,selectedRow:a,showContextMenu:h,refresh:c,toggleOptions:b}}}),G=g("title",null,"Customers",-1),W=g("h4",{class:"p-2 bg-indigo-500 text-indigo-50 border-b font-black text-2xl"},"Customers",-1),Y={class:"p-2 mt-2"},J=B("Active"),K=B("Inactive");function Q(a,l,d,u,C,f){const p=n("Head"),o=n("Column"),c=n("Badge"),b=n("Button"),h=n("PrimeDatatables"),_=n("ContextMenu"),j=n("Backend");return v(),H(I,null,[t(p,null,{default:r(()=>[G]),_:1}),t(j,null,{header:r(()=>[W]),default:r(()=>[g("div",Y,[t(h,{class:"p-datatable-sm",contextMenu:"",contextMenuSelection:a.selectedRow,"onUpdate:contextMenuSelection":l[0]||(l[0]=e=>a.selectedRow=e),onRowContextmenu:a.showContextMenu,"row-hover":!0,refresh:a.refreshTime,"default-sort-desc":!0,"default-sort-field":"id","state-key":"customers-dt","column-filters":{},"searchable-columns":a.searchableColumns,"api-url":a.route("api.crm.customers.index"),title:"List of Customers"},{default:r(()=>[t(o,{field:"id",header:"ID",sortable:!0}),t(o,{field:"first_name",header:"First Name",sortable:!0}),t(o,{field:"middle_name",header:"Middle Name",sortable:!0}),t(o,{field:"surname",header:"Surname",sortable:!0}),t(o,{field:"email",header:"Email",sortable:!0}),t(o,{field:"phone_number",header:"Phone",sortable:!0}),t(o,{field:"active",header:"Status",sortable:!0},{body:r(e=>[e.data.active?(v(),M(c,{key:0,severity:"success"},{default:r(()=>[J]),_:1})):(v(),M(c,{key:1,severity:"danger"},{default:r(()=>[K]),_:1}))]),_:1}),t(o,null,{body:r(e=>[t(b,{class:E(["","p-button-text"]),onClick:i=>a.toggleOptions(i,e.data),"icon-pos":"right",icon:"pi pi-ellipsis-v",label:"Actions"},null,8,["onClick"])]),_:1})]),_:1},8,["contextMenuSelection","onRowContextmenu","refresh","searchable-columns","api-url"]),t(_,{ref:"contextMenu",model:a.options},null,8,["model"])])]),_:1})],64)}var $e=q(z,[["render",Q]]);export{$e as default};
