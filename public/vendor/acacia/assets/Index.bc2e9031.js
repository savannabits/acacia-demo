var J=Object.defineProperty,Q=Object.defineProperties;var X=Object.getOwnPropertyDescriptors;var F=Object.getOwnPropertySymbols;var Z=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable;var P=(c,l,n)=>l in c?J(c,l,{enumerable:!0,configurable:!0,writable:!0,value:n}):c[l]=n,A=(c,l)=>{for(var n in l||(l={}))Z.call(l,n)&&P(c,n,l[n]);if(F)for(var n of F(l))ee.call(l,n)&&P(c,n,l[n]);return c},B=(c,l)=>Q(c,X(l));import{e as z,d as j,p,f as te,g as ae,i as se,j as o,w as i,m as a,a6 as oe,F as ie,o as v,k as d,v as h,s as w,x as E,z as O,a7 as le,y as ne,Y as T,a as R}from"./vendor.05df324e.js";import re from"./Backend.6e087c50.js";import de from"./PrimeDatatables.06075155.js";import{s as m}from"./column.esm.cc8b8b77.js";import{s as f}from"./button.esm.cbb15c31.js";import{s as ce}from"./contextmenu.esm.552fe433.js";import{d as V}from"./dayjs.min.2d765ffc.js";import{s as $}from"./dialog.esm.7f94084b.js";import pe from"./CreateForm.5554a093.js";import ue from"./EditForm.ce24e614.js";import me from"./ShowForm.1b62cd84.js";import{s as fe}from"./message.esm.2b7d3da1.js";import"./Sidebar.9fa42cf7.js";import"./SidebarLinkGroup.631e5e48.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./Header.f4796df8.js";import"./ModalSearch.0fe5a03a.js";import"./DropdownNotifications.8ff848f9.js";import"./DropdownHelp.ee3a80f5.js";import"./DropdownProfile.b6a2cd02.js";import"./user-avatar-32.07bf604b.js";import"./WelcomeBanner.e6597c05.js";import"./DashboardAvatars.03cd71bc.js";import"./DropdownFilter.d3d0573f.js";import"./Datepicker.0a132f4e.js";import"./vue-flatpickr.min.87ca1928.js";import"./SidebarLink.e30e4992.js";import"./confirmdialog.esm.5be0612a.js";import"./ripple.esm.574b991d.js";import"./SidebarParentLink.acf5cc4a.js";import"./inputtext.esm.b08d2117.js";import"./datatable.esm.6e02ebef.js";import"./paginator.esm.ff35b289.js";import"./dropdown.esm.573df5c1.js";import"./overlayeventbus.esm.d529c5a8.js";import"./virtualscroller.esm.adfef9da.js";import"./inputnumber.esm.f09ada2c.js";import"./AcaciaRichSelect.d07900f6.js";import"./AcaciaDd.922ceb07.js";const ve=d("title",null,"Menus",-1),be=d("h4",{class:"font-black text-2xl px-1 md:px-4"},"Menus",-1),xe={class:"mx-auto flex container items-center justify-center mt-4"},je={class:"rounded w-full p-2 bg-white"},he={class:"flex flex-wrap items-center justify-end gap-2"},ye=["title"],ke=ne("You are not authorized to access this content"),we=d("h4",{class:"font-black text-xl"},"New Menu",-1),_e=d("h4",{class:"font-black text-xl"},"Menu Details",-1),ge=d("h4",{class:"font-black text-xl"},"Edit Single Menu",-1),Me=z({name:"MenusIndex"}),ut=z(B(A({},Me),{setup(c){const l=j("api.v1.acacia-menus.dt"),n="menus-dt",H=p(["id","title","icon","route","url","active_pattern","position","permission_name","module_name","description","created_at","updated_at"]),_=p(null),g=p(),M=p([]),L=te(),S=ae(),U=p(null),b=p(!1),x=p(!1),y=p(!1),r=p(null),Y=s=>[{label:"Details",icon:"pi pi-eye",command:async()=>{r.value=null,await N(s),y.value=!0},visible:()=>{var t;return(t=s==null?void 0:s.can)==null?void 0:t.view}},{separator:!0},{label:"Edit",icon:"pi pi-pencil",command:async()=>{r.value=null,await N(s),x.value=!0},visible:()=>{var t;return(t=s==null?void 0:s.can)==null?void 0:t.update}},{label:"Delete",icon:"pi pi-trash",command:()=>{L.require({message:"Are you sure you want to delete this record?",header:"Confirm Deletion",accept:()=>G(s)})},visible:()=>{var t;return(t=s==null?void 0:s.can)==null?void 0:t.delete}}],N=async s=>{R.get(j("api.v1.acacia-menus.show",s)).then(t=>{var u;r.value=(u=t.data)==null?void 0:u.payload}).catch(t=>{console.error(t),r.value=null})},C=()=>{U.value=new Date().toUTCString()},I=async(s,t)=>{M.value=Y(t),await T(),g.value.show(s)},q=async s=>{M.value=Y(s.data),await T(),g.value.show(s.originalEvent)},G=async function(s){var t,u,k;try{const e=await R.delete(j("api.v1.acacia-menus.destroy",s));S.add({severity:"success",detail:e.data.message,life:3e3}),C()}catch(e){console.log(e);const D=((u=(t=e==null?void 0:e.response)==null?void 0:t.data)==null?void 0:u.message)||((k=e==null?void 0:e.data)==null?void 0:k.message)||(e==null?void 0:e.message)||e||"Server error";S.add({severity:"error",detail:D,summary:"Server Error",life:1e4})}},K=s=>{b.value=!1,C()},W=s=>{x.value=!1,C()};return(s,t)=>(v(),se(ie,null,[o(a(oe),null,{default:i(()=>[ve]),_:1}),o(re,null,{header:i(()=>[be]),default:i(()=>{var u,k;return[d("div",xe,[d("div",je,[d("div",he,[((u=s.$page.props.can)==null?void 0:u.create)?(v(),h(a(f),{key:0,onClick:t[0]||(t[0]=e=>b.value=!0),"aria-label":"New Comment",label:"New Menu",icon:"pi pi-plus"})):w("",!0)]),((k=s.$page.props.can)==null?void 0:k.viewAny)?(v(),h(de,{key:0,apiUrl:a(l),columnFilters:{},searchableColumns:H.value,stateKey:n,defaultSortField:"id",contextMenu:"",contextMenuSelection:a(_),"onUpdate:contextMenuSelection":t[1]||(t[1]=e=>le(_)?_.value=e:null),onRowContextmenu:q,rowHover:!0,refresh:a(U)},{default:i(()=>[o(a(m),{field:"title",header:"Title",sortable:!0}),o(a(m),{field:"parent.title",header:"Parent",sortable:!0}),o(a(m),{field:"route",header:"Route",sortable:!0}),o(a(m),{field:"module_name",header:"Module Name",sortable:!0}),o(a(m),{field:"icon",header:"Icon",sortable:!0},{body:i(({data:e})=>[d("i",{class:E(e==null?void 0:e.icon),title:e.icon},null,10,ye)]),_:1}),o(a(m),{field:"created_at",header:"Created At",sortable:!0},{body:i(({data:e})=>[d("span",null,O(e.created_at?a(V)(e.created_at).format("MMM DD, YYYY hh:mm a"):"-"),1)]),_:1}),o(a(m),{field:"updated_at",header:"Updated At",sortable:!0},{body:i(({data:e})=>[d("span",null,O(e.updated_at?a(V)(e.updated_at).format("MMM DD, YYYY hh:mm a"):"-"),1)]),_:1}),o(a(m),null,{body:i(e=>[o(a(f),{class:E(["","p-button-text"]),onClick:D=>I(D,e.data),"icon-pos":"right",icon:"pi pi-ellipsis-v",label:"Options"},null,8,["onClick"])]),_:1})]),_:1},8,["apiUrl","searchableColumns","contextMenuSelection","refresh"])):(v(),h(a(fe),{key:1,severity:"error"},{default:i(()=>[ke]),_:1}))])]),o(a(ce),{ref_key:"contextMenu",ref:g,model:a(M)},null,8,["model"]),o(a($),{position:"top",maximizable:!0,visible:b.value,"onUpdate:visible":t[4]||(t[4]=e=>b.value=e),modal:!0,breakpoints:{"1600px":"50vw","960px":"75vw","540px":"100vw"},style:{width:"35vw"}},{header:i(()=>[we]),footer:i(()=>[o(a(f),{label:"Open in a Page",icon:"pi pi-window",onClick:t[2]||(t[2]=e=>s.$inertia.visit(a(j)("acacia.g-panel.acacia-menus.create"))),class:"p-button-text"}),o(a(f),{label:"Close",icon:"pi pi-times",onClick:t[3]||(t[3]=e=>b.value=!1),class:"p-button-text"})]),default:i(()=>[b.value?(v(),h(pe,{key:0,onCreated:K})):w("",!0)]),_:1},8,["visible"]),o(a($),{position:"top",maximizable:!0,visible:y.value,"onUpdate:visible":t[7]||(t[7]=e=>y.value=e),modal:!0,breakpoints:{"1600px":"50vw","960px":"75vw","540px":"100vw"},style:{width:"35vw"}},{header:i(()=>[_e]),footer:i(()=>[o(a(f),{label:"Open in a Page",icon:"pi pi-window",onClick:t[5]||(t[5]=e=>s.$inertia.visit(a(j)("acacia.g-panel.acacia-menus.show",a(r)))),class:"p-button-text"}),o(a(f),{label:"Close",icon:"pi pi-times",onClick:t[6]||(t[6]=e=>(y.value=!1,r.value=null)),class:"p-button-text"})]),default:i(()=>[y.value&&a(r)?(v(),h(me,{key:0,model:a(r)},null,8,["model"])):w("",!0)]),_:1},8,["visible"]),o(a($),{position:"top",maximizable:!0,visible:x.value,"onUpdate:visible":t[10]||(t[10]=e=>x.value=e),modal:!0,breakpoints:{"1600px":"50vw","960px":"75vw","540px":"100vw"},style:{width:"35vw"}},{header:i(()=>[ge]),footer:i(()=>[o(a(f),{label:"Open in a Page",icon:"pi pi-window",onClick:t[8]||(t[8]=e=>s.$inertia.visit(a(j)("acacia.g-panel.acacia-menus.edit",a(r)))),class:"p-button-text"}),o(a(f),{label:"Close",icon:"pi pi-times",onClick:t[9]||(t[9]=e=>(x.value=!1,r.value=null)),class:"p-button-text"})]),default:i(()=>[x.value&&a(r)?(v(),h(ue,{key:0,model:a(r),onUpdated:W},null,8,["model"])):w("",!0)]),_:1},8,["visible"])]}),_:1})],64))}}));export{ut as default};
