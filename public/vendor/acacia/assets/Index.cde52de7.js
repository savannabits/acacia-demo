import $ from"./Backend.5aa1bcce.js";import{e as I,am as P,d as h,p as r,f as R,g as H,i as T,j as s,w as d,F as U,n as A,Y as y,a as E,r as i,o as F,k as j,z as D,x as L}from"./vendor.05df324e.js";import N from"./PrimeDatatables.06075155.js";import{s as O}from"./badge.esm.5ac8bf49.js";import{s as z}from"./column.esm.cc8b8b77.js";import{s as V}from"./contextmenu.esm.552fe433.js";import{s as q}from"./button.esm.cbb15c31.js";import{_ as G}from"./plugin-vue_export-helper.21dcd24c.js";import"./Sidebar.eaa3bc39.js";import"./SidebarLinkGroup.631e5e48.js";import"./Header.f4796df8.js";import"./ModalSearch.0fe5a03a.js";import"./DropdownNotifications.8ff848f9.js";import"./DropdownHelp.ee3a80f5.js";import"./DropdownProfile.b6a2cd02.js";import"./user-avatar-32.07bf604b.js";import"./WelcomeBanner.e6597c05.js";import"./DashboardAvatars.03cd71bc.js";import"./DropdownFilter.d3d0573f.js";import"./Datepicker.0a132f4e.js";import"./vue-flatpickr.min.87ca1928.js";import"./SidebarLink.e30e4992.js";import"./confirmdialog.esm.5be0612a.js";import"./ripple.esm.574b991d.js";import"./dialog.esm.7f94084b.js";import"./SidebarParentLink.acf5cc4a.js";import"./inputtext.esm.b08d2117.js";import"./datatable.esm.6e02ebef.js";import"./paginator.esm.ff35b289.js";import"./dropdown.esm.573df5c1.js";import"./overlayeventbus.esm.d529c5a8.js";import"./virtualscroller.esm.adfef9da.js";import"./inputnumber.esm.f09ada2c.js";const W=I({name:"Index",components:{PrimeDatatables:N,Backend:$,Head:P,Column:z,Badge:O,ContextMenu:V,Button:q},setup(){const e="Sent Messages",c=h("api.sms.messages.index"),v="sms-messages-dt",w=r(["id","sendingSession.session_date","atxid","recipient","status","cost"]),C=r(null),_=r(),l=r(),o=r([]),b=R(),m=H(),p=r(null),u=a=>[{label:"Details",icon:"pi pi-eye",command:()=>A.Inertia.get(h("sms.sending-sessions.show",a)),visible:()=>!0},{label:"Delete",icon:"pi pi-trash",command:()=>{b.require({message:"Are you sure you want to delete this record?",header:"Confirm Deletion",accept:()=>M(a)})},visible:()=>!0}],n=()=>{p.value=new Date().toUTCString()},g=async(a,f)=>{o.value=u(f),await y(),l.value.show(a)},S=async a=>{o.value=u(a.data),await y(),l.value.show(a.originalEvent)},M=async function(a){var f,k,x;try{const t=await E.delete(h("api.sms.sending-sessions.destroy",a));m.add({severity:"success",detail:t.data.message}),n()}catch(t){const B=((k=(f=t==null?void 0:t.response)==null?void 0:f.data)==null?void 0:k.message)||((x=t==null?void 0:t.data)==null?void 0:x.message)||(t==null?void 0:t.message)||t||"Server error";m.add({severity:"error",detail:B,summary:"Server Error"})}};return{title:e,apiUrl:c,dtId:v,searchableColumns:w,optionsMenu:_,contextMenu:l,refreshTime:p,options:o,selectedRow:C,showContextMenu:S,refresh:n,toggleOptions:g}}}),Y={class:"p-2 bg-indigo-500 text-indigo-50 border-b font-black text-2xl"},J={class:"p-2 mt-2"};function K(e,c,v,w,C,_){const l=i("Head"),o=i("Column"),b=i("Button"),m=i("PrimeDatatables"),p=i("ContextMenu"),u=i("Backend");return F(),T(U,null,[s(l,null,{default:d(()=>[j("title",null,D(e.title),1)]),_:1}),s(u,null,{header:d(()=>[j("h4",Y,D(e.title),1)]),default:d(()=>[j("div",J,[s(m,{class:"p-datatable-sm",contextMenu:"",contextMenuSelection:e.selectedRow,"onUpdate:contextMenuSelection":c[0]||(c[0]=n=>e.selectedRow=n),onRowContextmenu:e.showContextMenu,"row-hover":!0,refresh:e.refreshTime,"default-sort-desc":!0,"default-sort-field":"id","state-key":e.dtId,"column-filters":{},"searchable-columns":e.searchableColumns,"api-url":e.apiUrl,title:e.title},{default:d(()=>[s(o,{field:"id",header:"ID",sortable:!0}),s(o,{field:"sending_session.session_date",header:"Session Date",sortable:!0}),s(o,{field:"sending_session.user.name",header:"Sent By",sortable:!0}),s(o,{field:"recipient",header:"Recipient",sortable:!0}),s(o,{field:"status",header:"Status",sortable:!0}),s(o,{field:"cost",header:"Cost",sortable:!0}),s(o,null,{body:d(n=>[s(b,{class:L(["","p-button-text"]),onClick:g=>e.toggleOptions(g,n.data),"icon-pos":"right",icon:"pi pi-ellipsis-v",label:"Actions"},null,8,["onClick"])]),_:1})]),_:1},8,["contextMenuSelection","onRowContextmenu","refresh","state-key","searchable-columns","api-url","title"]),s(p,{ref:"contextMenu",model:e.options},null,8,["model"])])]),_:1})],64)}var $e=G(W,[["render",K]]);export{$e as default};
