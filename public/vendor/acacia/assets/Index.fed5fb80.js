var A=Object.defineProperty,F=Object.defineProperties;var O=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var j=(r,e,t)=>e in r?A(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,w=(r,e)=>{for(var t in e||(e={}))q.call(e,t)&&j(r,t,e[t]);if(x)for(var t of x(e))z.call(e,t)&&j(r,t,e[t]);return r},k=(r,e)=>F(r,O(e));import G from"./PrimeDatatables.06075155.js";import{s as d}from"./column.esm.cc8b8b77.js";import{s as I}from"./button.esm.cbb15c31.js";import{s as K}from"./contextmenu.esm.552fe433.js";import{s as C}from"./badge.esm.5ac8bf49.js";import{e as M,d as b,p as l,f as N,g as V,i as Y,j as i,w as h,m as a,a7 as H,F as J,n as L,Y as S,a as Q,o as v,v as D,x as W}from"./vendor.05df324e.js";import"./inputtext.esm.b08d2117.js";import"./datatable.esm.6e02ebef.js";import"./paginator.esm.ff35b289.js";import"./ripple.esm.574b991d.js";import"./dropdown.esm.573df5c1.js";import"./overlayeventbus.esm.d529c5a8.js";import"./virtualscroller.esm.adfef9da.js";import"./inputnumber.esm.f09ada2c.js";import"./plugin-vue_export-helper.21dcd24c.js";const X=M({name:"Schematics",props:{}}),be=M(k(w({},X),{setup(r){const e=b("api.acacia.schematics.dt"),t="schematics-dt",T=l(["id","table_name","model_class","controller_class","route_name"]),u=l(null),p=l(),f=l([]),B=N(),g=V(),_=l(null),y=o=>[{label:"Manage",icon:"pi pi-pencil",command:()=>L.Inertia.get(b("acacia.g-panel.acacia-schematics.edit",o)),visible:()=>!0},{label:"Delete",icon:"pi pi-trash",command:()=>{B.require({message:"Are you sure you want to delete this record?",header:"Confirm Deletion",accept:()=>U(o)})},visible:()=>!!o.generated_at}],E=()=>{_.value=new Date().toUTCString()},P=async(o,c)=>{f.value=y(c),await S(),p.value.show(o)},R=async o=>{f.value=y(o.data),await S(),p.value.show(o.originalEvent)},U=async function(o){var c,n,m;try{const s=await Q.delete(b("api.acacia.schematics.destroy",o));g.add({severity:"success",detail:s.data.message}),E()}catch(s){const $=((n=(c=s==null?void 0:s.response)==null?void 0:c.data)==null?void 0:n.message)||((m=s==null?void 0:s.data)==null?void 0:m.message)||(s==null?void 0:s.message)||s||"Server error";g.add({severity:"error",detail:$,summary:"Server Error"})}};return(o,c)=>(v(),Y(J,null,[i(G,{"api-url":a(e),"column-filters":{},"searchable-columns":T.value,"state-key":t,contextMenu:"",contextMenuSelection:a(u),"onUpdate:contextMenuSelection":c[0]||(c[0]=n=>H(u)?u.value=n:null),onRowContextmenu:R,"row-hover":!0,refresh:a(_)},{default:h(()=>[i(a(d),{field:"model_class",header:"Model",sortable:!0}),i(a(d),{field:"table_name",header:"Table",sortable:!0}),i(a(d),{field:"generated_at",header:"Status",sortable:!0},{body:h(({data:n})=>[n.generated_at?(v(),D(a(C),{key:0,severity:"success",value:"Generated"})):(v(),D(a(C),{key:1,severity:"danger",value:"Pending"}))]),_:1}),i(a(d),null,{body:h(n=>[i(a(I),{class:W(["","p-button-text"]),onClick:m=>P(m,n.data),"icon-pos":"right",icon:"pi pi-ellipsis-v",label:"Actions"},null,8,["onClick"])]),_:1})]),_:1},8,["api-url","searchable-columns","contextMenuSelection","refresh"]),i(a(K),{ref_key:"contextMenu",ref:p,model:a(f)},null,8,["model"])],64))}}));export{be as default};
