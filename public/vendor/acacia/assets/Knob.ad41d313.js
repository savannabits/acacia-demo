import{_ as u}from"./plugin-vue_export-helper.21dcd24c.js";import{c as h,f as r,t as l,l as m,p as c,o as d}from"./main.9e765f7d.js";const f={name:"Knob",emits:["update:modelValue","change"],data(){return{radius:40,midX:50,midY:50,minRadians:4*Math.PI/3,maxRadians:-Math.PI/3}},props:{modelValue:{type:Number,default:null},size:{type:Number,default:100},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},step:{type:Number,default:1},min:{type:Number,default:0},max:{type:Number,default:100},valueColor:{type:String,default:"var(--primary-color, Black)"},rangeColor:{type:String,default:"var(--surface-border, LightGray)"},textColor:{type:String,default:"var(--text-color-secondary, Black)"},strokeWidth:{type:Number,default:14},showValue:{type:Boolean,default:!0},valueTemplate:{type:String,default:"{value}"}},methods:{updateValue(e,t){let a=e-this.size/2,i=this.size/2-t,o=Math.atan2(i,a),s=-Math.PI/2-Math.PI/6;this.updateModel(o,s)},updateModel(e,t){let a;if(e>this.maxRadians)a=this.mapRange(e,this.minRadians,this.maxRadians,this.min,this.max);else if(e<t)a=this.mapRange(e+2*Math.PI,this.minRadians,this.maxRadians,this.min,this.max);else return;let i=Math.round((a-this.min)/this.step)*this.step+this.min;this.$emit("update:modelValue",i),this.$emit("change",i)},mapRange(e,t,a,i,o){return(e-t)*(o-i)/(a-t)+i},onClick(e){!this.disabled&&!this.readonly&&this.updateValue(e.offsetX,e.offsetY)},onMouseDown(e){!this.disabled&&!this.readonly&&(window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("mouseup",this.onMouseUp),e.preventDefault())},onMouseUp(e){!this.disabled&&!this.readonly&&(window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp),e.preventDefault())},onTouchStart(e){!this.disabled&&!this.readonly&&(window.addEventListener("touchmove",this.onTouchMove),window.addEventListener("touchend",this.onTouchEnd),e.preventDefault())},onTouchEnd(e){!this.disabled&&!this.readonly&&(window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd),e.preventDefault())},onMouseMove(e){!this.disabled&&!this.readonly&&(this.updateValue(e.offsetX,e.offsetY),e.preventDefault())},onTouchMove(e){if(!this.disabled&&!this.readonly&&e.touches.length==1){const t=this.$el.getBoundingClientRect(),a=e.targetTouches.item(0),i=a.clientX-t.left,o=a.clientY-t.top;this.updateValue(i,o)}}},computed:{containerClass(){return["p-knob p-component",{"p-disabled":this.disabled}]},rangePath(){return`M ${this.minX} ${this.minY} A ${this.radius} ${this.radius} 0 1 1 ${this.maxX} ${this.maxY}`},valuePath(){return`M ${this.zeroX} ${this.zeroY} A ${this.radius} ${this.radius} 0 ${this.largeArc} ${this.sweep} ${this.valueX} ${this.valueY}`},zeroRadians(){return this.min>0&&this.max>0?this.mapRange(this.min,this.min,this.max,this.minRadians,this.maxRadians):this.mapRange(0,this.min,this.max,this.minRadians,this.maxRadians)},valueRadians(){return this.mapRange(this.modelValue,this.min,this.max,this.minRadians,this.maxRadians)},minX(){return this.midX+Math.cos(this.minRadians)*this.radius},minY(){return this.midY-Math.sin(this.minRadians)*this.radius},maxX(){return this.midX+Math.cos(this.maxRadians)*this.radius},maxY(){return this.midY-Math.sin(this.maxRadians)*this.radius},zeroX(){return this.midX+Math.cos(this.zeroRadians)*this.radius},zeroY(){return this.midY-Math.sin(this.zeroRadians)*this.radius},valueX(){return this.midX+Math.cos(this.valueRadians)*this.radius},valueY(){return this.midY-Math.sin(this.valueRadians)*this.radius},largeArc(){return Math.abs(this.zeroRadians-this.valueRadians)<Math.PI?0:1},sweep(){return this.valueRadians>this.zeroRadians?0:1},valueToDisplay(){return this.valueTemplate.replace(/{value}/g,this.modelValue)}}},v=["width","height"],p=["d","stroke-width","stroke"],M=["d","stroke-width","stroke"],R=["fill"];function x(e,t,a,i,o,s){return d(),h("div",{class:c(s.containerClass)},[(d(),h("svg",{viewBox:"0 0 100 100",width:a.size,height:a.size,onClick:t[0]||(t[0]=(...n)=>s.onClick&&s.onClick(...n)),onMousedown:t[1]||(t[1]=(...n)=>s.onMouseDown&&s.onMouseDown(...n)),onMouseup:t[2]||(t[2]=(...n)=>s.onMouseUp&&s.onMouseUp(...n)),onTouchstart:t[3]||(t[3]=(...n)=>s.onTouchStart&&s.onTouchStart(...n)),onTouchend:t[4]||(t[4]=(...n)=>s.onTouchEnd&&s.onTouchEnd(...n))},[r("path",{d:s.rangePath,"stroke-width":a.strokeWidth,stroke:a.rangeColor,class:"p-knob-range"},null,8,p),r("path",{d:s.valuePath,"stroke-width":a.strokeWidth,stroke:a.valueColor,class:"p-knob-value"},null,8,M),a.showValue?(d(),h("text",{key:0,x:50,y:57,"text-anchor":"middle",fill:a.textColor,class:"p-knob-text"},l(s.valueToDisplay),9,R)):m("",!0)],40,v))],2)}var g=u(f,[["render",x]]);export{g as default};
