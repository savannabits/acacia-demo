import{_ as u}from"./plugin-vue_export-helper.21dcd24c.js";import{i as d,k as r,z as l,s as m,x as c,o as h}from"./vendor.05df324e.js";const v={name:"Knob",emits:["update:modelValue","change"],data(){return{radius:40,midX:50,midY:50,minRadians:4*Math.PI/3,maxRadians:-Math.PI/3}},props:{modelValue:{type:Number,default:null},size:{type:Number,default:100},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},step:{type:Number,default:1},min:{type:Number,default:0},max:{type:Number,default:100},valueColor:{type:String,default:"var(--primary-color, Black)"},rangeColor:{type:String,default:"var(--surface-d, LightGray)"},textColor:{type:String,default:"var(--text-color-secondary, Black)"},strokeWidth:{type:Number,default:14},showValue:{type:Boolean,default:!0},valueTemplate:{type:String,default:"{value}"}},methods:{updateValue(e,t){let s=e-this.size/2,i=this.size/2-t,o=Math.atan2(i,s),a=-Math.PI/2-Math.PI/6;this.updateModel(o,a)},updateModel(e,t){let s;if(e>this.maxRadians)s=this.mapRange(e,this.minRadians,this.maxRadians,this.min,this.max);else if(e<t)s=this.mapRange(e+2*Math.PI,this.minRadians,this.maxRadians,this.min,this.max);else return;let i=Math.round((s-this.min)/this.step)*this.step+this.min;this.$emit("update:modelValue",i),this.$emit("change",i)},mapRange(e,t,s,i,o){return(e-t)*(o-i)/(s-t)+i},onClick(e){!this.disabled&&!this.readonly&&this.updateValue(e.offsetX,e.offsetY)},onMouseDown(e){!this.disabled&&!this.readonly&&(window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("mouseup",this.onMouseUp),e.preventDefault())},onMouseUp(e){!this.disabled&&!this.readonly&&(window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp),e.preventDefault())},onTouchStart(e){!this.disabled&&!this.readonly&&(window.addEventListener("touchmove",this.onTouchMove),window.addEventListener("touchend",this.onTouchEnd),e.preventDefault())},onTouchEnd(e){!this.disabled&&!this.readonly&&(window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd),e.preventDefault())},onMouseMove(e){!this.disabled&&!this.readonly&&(this.updateValue(e.offsetX,e.offsetY),e.preventDefault())},onTouchMove(e){if(!this.disabled&&!this.readonly&&e.touches.length==1){const t=this.$el.getBoundingClientRect(),s=e.targetTouches.item(0),i=s.clientX-t.left,o=s.clientY-t.top;this.updateValue(i,o)}}},computed:{containerClass(){return["p-knob p-component",{"p-disabled":this.disabled}]},rangePath(){return`M ${this.minX} ${this.minY} A ${this.radius} ${this.radius} 0 1 1 ${this.maxX} ${this.maxY}`},valuePath(){return`M ${this.zeroX} ${this.zeroY} A ${this.radius} ${this.radius} 0 ${this.largeArc} ${this.sweep} ${this.valueX} ${this.valueY}`},zeroRadians(){return this.min>0&&this.max>0?this.mapRange(this.min,this.min,this.max,this.minRadians,this.maxRadians):this.mapRange(0,this.min,this.max,this.minRadians,this.maxRadians)},valueRadians(){return this.mapRange(this.modelValue,this.min,this.max,this.minRadians,this.maxRadians)},minX(){return this.midX+Math.cos(this.minRadians)*this.radius},minY(){return this.midY-Math.sin(this.minRadians)*this.radius},maxX(){return this.midX+Math.cos(this.maxRadians)*this.radius},maxY(){return this.midY-Math.sin(this.maxRadians)*this.radius},zeroX(){return this.midX+Math.cos(this.zeroRadians)*this.radius},zeroY(){return this.midY-Math.sin(this.zeroRadians)*this.radius},valueX(){return this.midX+Math.cos(this.valueRadians)*this.radius},valueY(){return this.midY-Math.sin(this.valueRadians)*this.radius},largeArc(){return Math.abs(this.zeroRadians-this.valueRadians)<Math.PI?0:1},sweep(){return this.valueRadians>this.zeroRadians?0:1},valueToDisplay(){return this.valueTemplate.replace(/{value}/g,this.modelValue)}}},f=["width","height"],p=["d","stroke-width","stroke"],M=["d","stroke-width","stroke"],x=["fill"];function R(e,t,s,i,o,a){return h(),d("div",{class:c(a.containerClass)},[(h(),d("svg",{viewBox:"0 0 100 100",width:s.size,height:s.size,onClick:t[0]||(t[0]=(...n)=>a.onClick&&a.onClick(...n)),onMousedown:t[1]||(t[1]=(...n)=>a.onMouseDown&&a.onMouseDown(...n)),onMouseup:t[2]||(t[2]=(...n)=>a.onMouseUp&&a.onMouseUp(...n)),onTouchstart:t[3]||(t[3]=(...n)=>a.onTouchStart&&a.onTouchStart(...n)),onTouchend:t[4]||(t[4]=(...n)=>a.onTouchEnd&&a.onTouchEnd(...n))},[r("path",{d:a.rangePath,"stroke-width":s.strokeWidth,stroke:s.rangeColor,class:"p-knob-range"},null,8,p),r("path",{d:a.valuePath,"stroke-width":s.strokeWidth,stroke:s.valueColor,class:"p-knob-value"},null,8,M),s.showValue?(h(),d("text",{key:0,x:50,y:57,"text-anchor":"middle",fill:s.textColor,class:"p-knob-text"},l(a.valueToDisplay),9,x)):m("",!0)],40,f))],2)}var g=u(v,[["render",R]]);export{g as default};
