var A=Object.defineProperty,E=Object.defineProperties;var G=Object.getOwnPropertyDescriptors;var T=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var S=(r,l,n)=>l in r?A(r,l,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[l]=n,w=(r,l)=>{for(var n in l||(l={}))O.call(l,n)&&S(r,n,l[n]);if(T)for(var n of T(l))q.call(l,n)&&S(r,n,l[n]);return r},V=(r,l)=>E(r,G(l));import{e as B,p as m,A as W,u as Y,f as J,g as K,i as Q,j as a,m as e,w as c,F as X,D as Z,r as ee,o as se,k as t,d as b,z as $,a7 as te,x as ae,y as oe,n as le,Y as F,a as ne}from"./vendor.05df324e.js";import ie from"./BackLink.b4c17133.js";import re from"./PrimeDatatables.06075155.js";import ce from"./Relationships.409fc275.js";import I from"./Backend.5aa1bcce.js";import{s as L,a as h}from"./tabpanel.esm.0a9d5bce.js";import{s as v}from"./inputtext.esm.b08d2117.js";import{s as k}from"./button.esm.cbb15c31.js";import{s as u}from"./column.esm.cc8b8b77.js";import{s as P}from"./contextmenu.esm.552fe433.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./ripple.esm.574b991d.js";import"./datatable.esm.6e02ebef.js";import"./paginator.esm.ff35b289.js";import"./dropdown.esm.573df5c1.js";import"./overlayeventbus.esm.d529c5a8.js";import"./virtualscroller.esm.adfef9da.js";import"./inputnumber.esm.f09ada2c.js";import"./Sidebar.eaa3bc39.js";import"./SidebarLinkGroup.631e5e48.js";import"./Header.f4796df8.js";import"./ModalSearch.0fe5a03a.js";import"./DropdownNotifications.8ff848f9.js";import"./DropdownHelp.ee3a80f5.js";import"./DropdownProfile.b6a2cd02.js";import"./user-avatar-32.07bf604b.js";import"./WelcomeBanner.e6597c05.js";import"./DashboardAvatars.03cd71bc.js";import"./DropdownFilter.d3d0573f.js";import"./Datepicker.0a132f4e.js";import"./vue-flatpickr.min.87ca1928.js";import"./SidebarLink.e30e4992.js";import"./confirmdialog.esm.5be0612a.js";import"./dialog.esm.7f94084b.js";import"./SidebarParentLink.acf5cc4a.js";const de={class:"flex items-center flex-wrap gap-x-2"},me={class:"font-bold text-xl"},ue=oe("Manage "),pe={class:"mx-auto container max-w-4xl flex items-center justify-center mt-4"},fe={class:"rounded w-full p-2 bg-white"},_e={class:"min-h-full flex items-center justify-center"},be={class:"container max-w-3xl"},he={class:"my-2"},ve=t("label",null,"Table",-1),xe={class:"p-inputtext p-disabled block font-bold w-full"},je={class:"my-2"},ye=t("label",null,"Model",-1),ge={class:"my-2"},we=t("label",null,"Controller",-1),ke={class:"my-2"},Ce=t("label",null,"Route Name",-1),Me={class:"p-dialog-footer flex items-center justify-end"},De={class:"min-h-full flex items-center justify-center"},Te={class:"container max-w-3xl"},Se={class:"min-h-full flex items-center justify-center"},Ve={class:"container max-w-3xl"},Be=B({name:"SchematicsManage",components:{Backend:I,TabView:L,TabPanel:h,InputText:v,Button:k,Column:u,ContextMenu:P}}),fs=B(V(w({},Be),{setup(r){const l=m(["id","name","title","db_type","html_type"]),n=m(0),p=W(()=>{var i;return(i=Z().props.value)==null?void 0:i.model}),d=Y(w({},p.value)),x=m(null),j=m(),y=m([]),R=J(),C=K(),M=m(null),D=i=>[{label:"Edit",icon:"pi pi-pencil",command:()=>le.Inertia.get(b("sms.sending-sessions.show",i)),visible:()=>!0},{label:"Delete",icon:"pi pi-trash",command:()=>{R.require({message:"Are you sure you want to delete this record?",header:"Confirm Deletion",accept:()=>N(i)})},visible:()=>!0}],U=()=>{M.value=new Date().toUTCString()},z=async(i,o)=>{y.value=D(o),await F(),j.value.show(i)},H=async i=>{y.value=D(i.data),await F(),j.value.show(i.originalEvent)},N=async function(i){var o,_,f;try{const s=await ne.delete(b("api.sms.sending-sessions.destroy",i));C.add({severity:"success",detail:s.data.message}),U()}catch(s){const g=((_=(o=s==null?void 0:s.response)==null?void 0:o.data)==null?void 0:_.message)||((f=s==null?void 0:s.data)==null?void 0:f.message)||(s==null?void 0:s.message)||s||"Server error";C.add({severity:"error",detail:g,summary:"Server Error"})}};return(i,o)=>{var f;const _=ee("Head");return se(),Q(X,null,[a(_,{title:`Manage Schematics: ${(f=e(p))==null?void 0:f.table_name}`},null,8,["title"]),a(I,null,{header:c(()=>{var s;return[t("div",de,[a(ie,{href:e(b)("acacia.g-panel.index")},null,8,["href"]),t("h4",me,[ue,t("strong",null,$((s=e(p))==null?void 0:s.table_name),1)])])]}),default:c(()=>[t("div",pe,[t("div",fe,[a(e(L),{ref:"manageTabs",activeIndex:n.value,"onUpdate:activeIndex":o[5]||(o[5]=s=>n.value=s)},{default:c(()=>[a(e(h),{lazy:"",header:"General Info"},{default:c(()=>[t("div",_e,[t("div",be,[t("div",he,[ve,t("span",xe,$(e(d).table_name),1)]),t("div",je,[ye,a(e(v),{class:"block w-full",modelValue:e(d).model_class,"onUpdate:modelValue":o[0]||(o[0]=s=>e(d).model_class=s)},null,8,["modelValue"])]),t("div",ge,[we,a(e(v),{class:"block w-full",modelValue:e(d).controller_class,"onUpdate:modelValue":o[1]||(o[1]=s=>e(d).controller_class=s)},null,8,["modelValue"])]),t("div",ke,[Ce,a(e(v),{class:"block w-full",modelValue:e(d).route_name,"onUpdate:modelValue":o[2]||(o[2]=s=>e(d).route_name=s)},null,8,["modelValue"])]),t("div",Me,[a(e(k),{label:"Fields",icon:"pi pi-arrow-right",onClick:o[3]||(o[3]=s=>n.value=1),"icon-pos":"right"})])])])]),_:1}),a(e(h),{lazy:"",header:"Fields"},{default:c(()=>[t("div",De,[t("div",Te,[a(re,{"api-url":e(b)("api.acacia.schematics.schematic.fields",e(p).id),"column-filters":{},"searchable-columns":l.value,"state-key":"schematic-fields-dt",contextMenu:"",contextMenuSelection:e(x),"onUpdate:contextMenuSelection":o[4]||(o[4]=s=>te(x)?x.value=s:null),onRowContextmenu:H,"row-hover":!0,refresh:e(M)},{default:c(()=>[a(e(u),{field:"name",header:"DB Column",sortable:!0}),a(e(u),{field:"title",header:"Title"}),a(e(u),{field:"db_type",header:"DB Type"}),a(e(u),{field:"html_type",header:"HTML Type"}),a(e(u),null,{body:c(s=>[a(e(k),{class:ae(["","p-button-text"]),onClick:g=>z(g,s.data),"icon-pos":"right",icon:"pi pi-ellipsis-v",label:"Actions"},null,8,["onClick"])]),_:1})]),_:1},8,["api-url","searchable-columns","contextMenuSelection","refresh"]),a(e(P),{ref_key:"contextMenu",ref:j,model:e(y)},null,8,["model"])])])]),_:1}),a(e(h),{lazy:"",header:"Relationships"},{default:c(()=>[t("div",Se,[t("div",Ve,[a(ce,{model:e(p)},null,8,["model"])])])]),_:1})]),_:1},8,["activeIndex"])])])]),_:1})],64)}}}));export{fs as default};
