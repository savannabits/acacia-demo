var q=Object.defineProperty,A=Object.defineProperties;var L=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var $=(r,a,n)=>a in r?q(r,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[a]=n,C=(r,a)=>{for(var n in a||(a={}))O.call(a,n)&&$(r,n,a[n]);if(S)for(var n of S(a))G.call(a,n)&&$(r,n,a[n]);return r},B=(r,a)=>A(r,L(a));import{d as I,j as d,s as J,u as K,a as Q,b as W,c as X,e as o,g as e,w as c,F as Y,x as Z,r as ee,o as te,f as s,h,t as D,$ as se,p as oe,q as le,i as ae,M as j,a0 as ne}from"./main.9e765f7d.js";import ie from"./BackLink.2033ae08.js";import re from"./PrimeDatatables.0582f2ad.js";import ce from"./Relationships.6d93ee0e.js";import U from"./Backend.d947867c.js";import{s as F,a as x}from"./tabpanel.esm.ff7e1051.js";import{s as v}from"./inputtext.esm.dc0f2264.js";import{s as k}from"./button.esm.a5ac1061.js";import{s as u}from"./column.esm.6c61d2a3.js";import{s as R}from"./contextmenu.esm.bb623b07.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./ripple.esm.1fe20658.js";import"./datatable.esm.3689bee8.js";import"./paginator.esm.d428c35b.js";import"./dropdown.esm.5bafa883.js";import"./overlayeventbus.esm.ef5cc0da.js";import"./virtualscroller.esm.76cd2139.js";import"./inputnumber.esm.2f528c5c.js";import"./Sidebar.485bfd5b.js";import"./SidebarLinkGroup.cb8761b1.js";import"./Logo.bf84026c.js";import"./Header.61e29fbc.js";import"./ModalSearch.ed130d60.js";import"./DropdownNotifications.e398f91c.js";import"./DropdownHelp.9bd762b4.js";import"./DropdownProfile.a72bb30f.js";import"./user-avatar-32.07bf604b.js";import"./WelcomeBanner.76c639d8.js";import"./DashboardAvatars.8beba91a.js";import"./DropdownFilter.676b5b1f.js";import"./Datepicker.e4af13a9.js";import"./vue-flatpickr.min.9bcaefd2.js";import"./SidebarLink.20e5744c.js";import"./confirmdialog.esm.f379260d.js";import"./dialog.esm.20a296d3.js";import"./SidebarParentLink.898a9f6e.js";const me={class:"flex items-center flex-wrap gap-x-2"},de={class:"font-bold text-xl"},ue=le("Manage "),pe={class:"mx-auto container max-w-4xl flex items-center justify-center mt-4"},fe={class:"rounded w-full p-2 bg-white"},_e={class:"min-h-full flex items-center justify-center"},he={class:"container max-w-3xl"},xe={class:"my-2"},ve=s("label",null,"Table",-1),be={class:"p-inputtext p-disabled block font-bold w-full"},ye={class:"my-2"},ge=s("label",null,"Model",-1),we={class:"my-2"},Ce=s("label",null,"Controller",-1),ke={class:"my-2"},Me=s("label",null,"Route Name",-1),Te={class:"p-dialog-footer flex items-center justify-end"},Ve={class:"min-h-full flex items-center justify-center"},Se={class:"container max-w-3xl"},$e={class:"min-h-full flex items-center justify-center"},Be={class:"container max-w-3xl"},De=I({name:"SchematicsManage",components:{Backend:U,TabView:F,TabPanel:x,InputText:v,Button:k,Column:u,ContextMenu:R}}),_t=I(B(C({},De),{setup(r){const a=d(["id","name","title","db_type","html_type"]),n=d(0),p=J(()=>{var i;return(i=Z().props.value)==null?void 0:i.model}),m=K(C({},p.value)),b=d(null),y=d(),g=d([]),z=Q(),M=W(),T=d(null),V=i=>[{label:"Edit",icon:"pi pi-pencil",command:()=>ae.Inertia.get(h("sms.sending-sessions.show",i)),visible:()=>!0},{label:"Delete",icon:"pi pi-trash",command:()=>{z.require({message:"Are you sure you want to delete this record?",header:"Confirm Deletion",accept:()=>P(i)})},visible:()=>!0}],E=()=>{T.value=new Date().toUTCString()},N=async(i,l)=>{g.value=V(l),await j(),y.value.show(i)},H=async i=>{g.value=V(i.data),await j(),y.value.show(i.originalEvent)},P=async function(i){var l,_,f;try{const t=await ne.delete(h("api.sms.sending-sessions.destroy",i));M.add({severity:"success",detail:t.data.message}),E()}catch(t){const w=((_=(l=t==null?void 0:t.response)==null?void 0:l.data)==null?void 0:_.message)||((f=t==null?void 0:t.data)==null?void 0:f.message)||(t==null?void 0:t.message)||t||"Server error";M.add({severity:"error",detail:w,summary:"Server Error"})}};return(i,l)=>{var f;const _=ee("Head");return te(),X(Y,null,[o(_,{title:`Manage Schematics: ${(f=e(p))==null?void 0:f.table_name}`},null,8,["title"]),o(U,null,{header:c(()=>{var t;return[s("div",me,[o(ie,{href:e(h)("acacia.g-panel.index")},null,8,["href"]),s("h4",de,[ue,s("strong",null,D((t=e(p))==null?void 0:t.table_name),1)])])]}),default:c(()=>[s("div",pe,[s("div",fe,[o(e(F),{ref:"manageTabs",activeIndex:n.value,"onUpdate:activeIndex":l[5]||(l[5]=t=>n.value=t)},{default:c(()=>[o(e(x),{lazy:"",header:"General Info"},{default:c(()=>[s("div",_e,[s("div",he,[s("div",xe,[ve,s("span",be,D(e(m).table_name),1)]),s("div",ye,[ge,o(e(v),{class:"block w-full",modelValue:e(m).model_class,"onUpdate:modelValue":l[0]||(l[0]=t=>e(m).model_class=t)},null,8,["modelValue"])]),s("div",we,[Ce,o(e(v),{class:"block w-full",modelValue:e(m).controller_class,"onUpdate:modelValue":l[1]||(l[1]=t=>e(m).controller_class=t)},null,8,["modelValue"])]),s("div",ke,[Me,o(e(v),{class:"block w-full",modelValue:e(m).route_name,"onUpdate:modelValue":l[2]||(l[2]=t=>e(m).route_name=t)},null,8,["modelValue"])]),s("div",Te,[o(e(k),{label:"Fields",icon:"pi pi-arrow-right",onClick:l[3]||(l[3]=t=>n.value=1),"icon-pos":"right"})])])])]),_:1}),o(e(x),{lazy:"",header:"Fields"},{default:c(()=>[s("div",Ve,[s("div",Se,[o(re,{"api-url":e(h)("api.acacia.schematics.schematic.fields",e(p).id),"column-filters":{},"searchable-columns":a.value,"state-key":"schematic-fields-dt",contextMenu:"",contextMenuSelection:e(b),"onUpdate:contextMenuSelection":l[4]||(l[4]=t=>se(b)?b.value=t:null),onRowContextmenu:H,"row-hover":!0,refresh:e(T)},{default:c(()=>[o(e(u),{field:"name",header:"DB Column",sortable:!0}),o(e(u),{field:"title",header:"Title"}),o(e(u),{field:"db_type",header:"DB Type"}),o(e(u),{field:"html_type",header:"HTML Type"}),o(e(u),null,{body:c(t=>[o(e(k),{class:oe(["","p-button-text"]),onClick:w=>N(w,t.data),"icon-pos":"right",icon:"pi pi-ellipsis-v",label:"Actions"},null,8,["onClick"])]),_:1})]),_:1},8,["api-url","searchable-columns","contextMenuSelection","refresh"]),o(e(R),{ref_key:"contextMenu",ref:y,model:e(g)},null,8,["model"])])])]),_:1}),o(e(x),{lazy:"",header:"Relationships"},{default:c(()=>[s("div",$e,[s("div",Be,[o(ce,{model:e(p)},null,8,["model"])])])]),_:1})]),_:1},8,["activeIndex"])])])]),_:1})],64)}}}));export{_t as default};
