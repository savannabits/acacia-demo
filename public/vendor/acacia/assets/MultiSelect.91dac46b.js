var R=Object.defineProperty,A=Object.defineProperties;var q=Object.getOwnPropertyDescriptors;var F=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var _=(e,l,i)=>l in e?R(e,l,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[l]=i,K=(e,l)=>{for(var i in l||(l={}))N.call(l,i)&&_(e,i,l[i]);if(F)for(var i of F(l))j.call(l,i)&&_(e,i,l[i]);return e},B=(e,l)=>A(e,q(l));import{Z as w,aa as c,a5 as b,ad as P,ac as G,i as n,k as a,x as h,q as f,v as U,j as E,w as I,K as W,W as Z,r as J,O as Q,o as r,F as m,y as k,z as y,t as L,s as g,M as O,af as X,V as Y,a2 as $,an as H}from"./vendor.05df324e.js";import{O as ee}from"./overlayeventbus.esm.d529c5a8.js";import{R as le}from"./ripple.esm.574b991d.js";import{s as te}from"./virtualscroller.esm.adfef9da.js";import{_ as ie}from"./plugin-vue_export-helper.21dcd24c.js";const se={name:"MultiSelect",emits:["update:modelValue","before-show","before-hide","change","show","hide","filter","selectall-change"],props:{modelValue:null,options:Array,optionLabel:null,optionValue:null,optionDisabled:null,optionGroupLabel:null,optionGroupChildren:null,scrollHeight:{type:String,default:"200px"},placeholder:String,disabled:Boolean,tabindex:String,inputId:String,dataKey:null,filter:Boolean,filterPlaceholder:String,filterLocale:String,filterMatchMode:{type:String,default:"contains"},filterFields:{type:Array,default:null},ariaLabelledBy:null,appendTo:{type:String,default:"body"},emptyFilterMessage:{type:String,default:null},emptyMessage:{type:String,default:null},display:{type:String,default:"comma"},panelClass:null,selectedItemsLabel:{type:String,default:"{0} items selected"},maxSelectedLabels:{type:Number,default:null},selectionLimit:{type:Number,default:null},showToggleAll:{type:Boolean,default:!0},loading:{type:Boolean,default:!1},loadingIcon:{type:String,default:"pi pi-spinner pi-spin"},virtualScrollerOptions:{type:Object,default:null},selectAll:{type:Boolean,default:null}},data(){return{focused:!1,headerCheckboxFocused:!1,filterValue:null,overlayVisible:!1}},outsideClickListener:null,resizeListener:null,scrollHandler:null,overlay:null,virtualScroller:null,beforeUnmount(){this.unbindOutsideClickListener(),this.unbindResizeListener(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.overlay&&(w.clear(this.overlay),this.overlay=null)},methods:{getOptionIndex(e,l){return this.virtualScrollerDisabled?e:l&&l(e).index},getOptionLabel(e){return this.optionLabel?c.resolveFieldData(e,this.optionLabel):e},getOptionValue(e){return this.optionValue?c.resolveFieldData(e,this.optionValue):e},getOptionRenderKey(e){return this.dataKey?c.resolveFieldData(e,this.dataKey):this.getOptionLabel(e)},getOptionGroupRenderKey(e){return c.resolveFieldData(e,this.optionGroupLabel)},getOptionGroupLabel(e){return c.resolveFieldData(e,this.optionGroupLabel)},getOptionGroupChildren(e){return c.resolveFieldData(e,this.optionGroupChildren)},isOptionDisabled(e){return this.maxSelectionLimitReached&&!this.isSelected(e)?!0:this.optionDisabled?c.resolveFieldData(e,this.optionDisabled):!1},getSelectedOptionIndex(){if(this.modelValue!=null&&this.options)if(this.optionGroupLabel)for(let e=0;e<this.options.length;e++){let l=this.findOptionIndexInList(this.modelValue,this.getOptionGroupChildren(this.options[e]));if(l!==-1)return{group:e,option:l}}else return this.findOptionIndexInList(this.modelValue,this.options);return-1},findOptionIndexInList(e,l){return e?l.findIndex(i=>e.some(u=>c.equals(u,this.getOptionValue(i),this.equalityKey))):-1},isSelected(e){if(this.modelValue){let l=this.getOptionValue(e),i=this.equalityKey;return this.modelValue.some(u=>c.equals(u,l,i))}return!1},show(){this.$emit("before-show"),this.overlayVisible=!0},hide(){this.$emit("before-hide"),this.overlayVisible=!1},onFocus(){this.focused=!0},onBlur(){this.focused=!1},onHeaderCheckboxFocus(){this.headerCheckboxFocused=!0},onHeaderCheckboxBlur(){this.headerCheckboxFocused=!1},onClick(e){this.disabled||this.loading||(!this.overlay||!this.overlay.contains(e.target))&&!b.hasClass(e.target,"p-multiselect-close")&&(b.hasClass(e.target,"p-multiselect-close"),this.overlayVisible?this.hide():this.show(),this.$refs.focusInput.focus())},onCloseClick(){this.hide()},onKeyDown(e){switch(e.which){case 40:this.visibleOptions&&!this.overlayVisible&&e.altKey&&this.show();break;case 32:this.overlayVisible||(this.show(),e.preventDefault());break;case 13:case 27:this.overlayVisible&&(this.hide(),e.preventDefault());break;case 9:this.hide();break}},onOptionSelect(e,l){if(this.disabled||this.isOptionDisabled(l))return;let i=this.isSelected(l),u=null;i?u=this.modelValue.filter(p=>!c.equals(p,this.getOptionValue(l),this.equalityKey)):u=[...this.modelValue||[],this.getOptionValue(l)],this.$emit("update:modelValue",u),this.$emit("change",{originalEvent:e,value:u})},onOptionKeyDown(e,l){let i=e.target;switch(e.which){case 40:var u=this.findNextItem(i);u&&u.focus(),e.preventDefault();break;case 38:var p=this.findPrevItem(i);p&&p.focus(),e.preventDefault();break;case 13:this.onOptionSelect(e,l),e.preventDefault();break}},findNextItem(e){let l=e.nextElementSibling;return l?b.hasClass(l,"p-disabled")||b.hasClass(l,"p-multiselect-item-group")?this.findNextItem(l):l:null},findPrevItem(e){let l=e.previousElementSibling;return l?b.hasClass(l,"p-disabled")||b.hasClass(l,"p-multiselect-item-group")?this.findPrevItem(l):l:null},onOverlayEnter(e){if(w.set("overlay",e,this.$primevue.config.zIndex.overlay),this.alignOverlay(),this.bindOutsideClickListener(),this.bindScrollListener(),this.bindResizeListener(),this.filter&&this.$refs.filterInput.focus(),!this.virtualScrollerDisabled){const l=this.getSelectedOptionIndex();l!==-1&&this.virtualScroller.scrollToIndex(l)}this.$emit("show")},onOverlayLeave(){this.unbindOutsideClickListener(),this.unbindScrollListener(),this.unbindResizeListener(),this.$emit("hide"),this.overlay=null},onOverlayAfterLeave(e){w.clear(e)},alignOverlay(){this.appendDisabled?b.relativePosition(this.overlay,this.$el):(this.overlay.style.minWidth=b.getOuterWidth(this.$el)+"px",b.absolutePosition(this.overlay,this.$el))},bindOutsideClickListener(){this.outsideClickListener||(this.outsideClickListener=e=>{this.overlayVisible&&this.isOutsideClicked(e)&&this.hide()},document.addEventListener("click",this.outsideClickListener))},unbindOutsideClickListener(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener),this.outsideClickListener=null)},bindScrollListener(){this.scrollHandler||(this.scrollHandler=new P(this.$refs.container,()=>{this.overlayVisible&&this.hide()})),this.scrollHandler.bindScrollListener()},unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()},bindResizeListener(){this.resizeListener||(this.resizeListener=()=>{this.overlayVisible&&!b.isAndroid()&&this.hide()},window.addEventListener("resize",this.resizeListener))},unbindResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)},isOutsideClicked(e){return!(this.$el.isSameNode(e.target)||this.$el.contains(e.target)||this.overlay&&this.overlay.contains(e.target))},getLabelByValue(e){let l;if(this.options)if(this.optionGroupLabel){for(let i of this.options)if(l=this.findOptionByValue(e,this.getOptionGroupChildren(i)),l)break}else l=this.findOptionByValue(e,this.options);return l?this.getOptionLabel(l):null},findOptionByValue(e,l){for(let i of l){let u=this.getOptionValue(i);if(c.equals(u,e,this.equalityKey))return i}return null},getSelectedItemsLabel(){let e=/{(.*?)}/;return e.test(this.selectedItemsLabel)?this.selectedItemsLabel.replace(this.selectedItemsLabel.match(e)[0],this.modelValue.length+""):this.selectedItemsLabel},onToggleAll(e){if(this.selectAll!==null)this.$emit("selectall-change",{originalEvent:e,checked:!this.allSelected});else{let l=null;this.allSelected?l=[]:this.visibleOptions&&(this.optionGroupLabel?(l=[],this.visibleOptions.forEach(i=>l=[...l,...this.getOptionGroupChildren(i)])):l=this.visibleOptions.map(i=>this.getOptionValue(i))),this.$emit("update:modelValue",l),this.$emit("change",{originalEvent:e,value:l})}},onFilterChange(e){this.$emit("filter",{originalEvent:e,value:e.target.value}),this.overlayVisible&&this.alignOverlay()},overlayRef(e){this.overlay=e},virtualScrollerRef(e){this.virtualScroller=e},removeChip(e){let l=this.modelValue.filter(i=>!c.equals(i,e,this.equalityKey));this.$emit("update:modelValue",l),this.$emit("change",{originalEvent:event,value:l})},onOverlayClick(e){ee.emit("overlay-click",{originalEvent:e,target:this.$el})}},computed:{visibleOptions(){if(this.filterValue)if(this.optionGroupLabel){let e=[];for(let l of this.options){let i=G.filter(this.getOptionGroupChildren(l),this.searchFields,this.filterValue,this.filterMatchMode,this.filterLocale);i&&i.length&&e.push(B(K({},l),{items:i}))}return e}else return G.filter(this.options,this.searchFields,this.filterValue,"contains",this.filterLocale);else return this.options},containerClass(){return["p-multiselect p-component p-inputwrapper",{"p-multiselect-chip":this.display==="chip","p-disabled":this.disabled,"p-focus":this.focused,"p-inputwrapper-filled":this.modelValue&&this.modelValue.length,"p-inputwrapper-focus":this.focused||this.overlayVisible}]},labelClass(){return["p-multiselect-label",{"p-placeholder":this.label===this.placeholder,"p-multiselect-label-empty":!this.placeholder&&(!this.modelValue||this.modelValue.length===0)}]},panelStyleClass(){return["p-multiselect-panel p-component",this.panelClass,{"p-input-filled":this.$primevue.config.inputStyle==="filled","p-ripple-disabled":this.$primevue.config.ripple===!1}]},label(){let e;if(this.modelValue&&this.modelValue.length)if(!this.maxSelectedLabels||this.modelValue.length<=this.maxSelectedLabels){e="";for(let l=0;l<this.modelValue.length;l++)l!==0&&(e+=", "),e+=this.getLabelByValue(this.modelValue[l])}else return this.getSelectedItemsLabel();else e=this.placeholder;return e},allSelected(){if(this.selectAll!==null)return this.selectAll;if(this.filterValue&&this.filterValue.trim().length>0){if(this.visibleOptions.length===0)return!1;if(this.optionGroupLabel){for(let e of this.visibleOptions)for(let l of this.getOptionGroupChildren(e))if(!this.isSelected(l))return!1}else for(let e of this.visibleOptions)if(!this.isSelected(e))return!1;return!0}else{if(this.modelValue&&this.options){let e=0;return this.optionGroupLabel?this.options.forEach(l=>e+=this.getOptionGroupChildren(l).length):e=this.options.length,e>0&&e===this.modelValue.length}return!1}},equalityKey(){return this.optionValue?null:this.dataKey},searchFields(){return this.filterFields||[this.optionLabel]},emptyFilterMessageText(){return this.emptyFilterMessage||this.$primevue.config.locale.emptyFilterMessage},emptyMessageText(){return this.emptyMessage||this.$primevue.config.locale.emptyMessage},appendDisabled(){return this.appendTo==="self"},appendTarget(){return this.appendDisabled?null:this.appendTo},virtualScrollerDisabled(){return!this.virtualScrollerOptions},maxSelectionLimitReached(){return this.selectionLimit&&this.modelValue&&this.modelValue.length===this.selectionLimit},dropdownIconClass(){return["p-multiselect-trigger-icon",this.loading?this.loadingIcon:"pi pi-chevron-down"]}},directives:{ripple:le},components:{VirtualScroller:te}},ae={class:"p-hidden-accessible"},re=["id","disabled","tabindex","aria-expanded","aria-labelledby"],ne={class:"p-multiselect-label-container"},oe={class:"p-multiselect-token-label"},de=["onClick"],ue={class:"p-multiselect-trigger"},he={key:0,class:"p-multiselect-header"},ce=["aria-checked"],pe={class:"p-hidden-accessible"},fe=["aria-checked"],be={key:1,class:"p-multiselect-filter-container"},me=["placeholder"],ye=a("span",{class:"p-multiselect-filter-icon pi pi-search"},null,-1),ge=a("span",{class:"p-multiselect-close-icon pi pi-times"},null,-1),ve=[ge],ke=["aria-selected","onClick","onKeydown","tabindex","aria-label"],Le={class:"p-checkbox p-component"},Oe={class:"p-multiselect-item-group"},Ve=["aria-selected","onClick","onKeydown","tabindex","aria-label"],Se={class:"p-checkbox p-component"},Ce={key:2,class:"p-multiselect-empty-message"},xe={key:3,class:"p-multiselect-empty-message"};function we(e,l,i,u,p,t){const T=J("VirtualScroller"),V=Q("ripple");return r(),n("div",{ref:"container",class:h(t.containerClass),onClick:l[10]||(l[10]=(...s)=>t.onClick&&t.onClick(...s))},[a("div",ae,[a("input",{ref:"focusInput",type:"text",role:"listbox",id:i.inputId,readonly:"",disabled:i.disabled,onFocus:l[0]||(l[0]=(...s)=>t.onFocus&&t.onFocus(...s)),onBlur:l[1]||(l[1]=(...s)=>t.onBlur&&t.onBlur(...s)),onKeydown:l[2]||(l[2]=(...s)=>t.onKeyDown&&t.onKeyDown(...s)),tabindex:i.tabindex,"aria-haspopup":"true","aria-expanded":p.overlayVisible,"aria-labelledby":i.ariaLabelledBy},null,40,re)]),a("div",ne,[a("div",{class:h(t.labelClass)},[f(e.$slots,"value",{value:i.modelValue,placeholder:i.placeholder},()=>[i.display==="comma"?(r(),n(m,{key:0},[k(y(t.label||"empty"),1)],64)):i.display==="chip"?(r(),n(m,{key:1},[(r(!0),n(m,null,L(i.modelValue,s=>(r(),n("div",{class:"p-multiselect-token",key:t.getLabelByValue(s)},[f(e.$slots,"chip",{value:s},()=>[a("span",oe,y(t.getLabelByValue(s)),1)]),i.disabled?g("",!0):(r(),n("span",{key:0,class:"p-multiselect-token-icon pi pi-times-circle",onClick:D=>t.removeChip(s)},null,8,de))]))),128)),!i.modelValue||i.modelValue.length===0?(r(),n(m,{key:0},[k(y(i.placeholder||"empty"),1)],64)):g("",!0)],64)):g("",!0)])],2)]),a("div",ue,[f(e.$slots,"indicator",{},()=>[a("span",{class:h(t.dropdownIconClass)},null,2)])]),(r(),U(Z,{to:t.appendTarget,disabled:t.appendDisabled},[E(W,{name:"p-connected-overlay",onEnter:t.onOverlayEnter,onLeave:t.onOverlayLeave,onAfterLeave:t.onOverlayAfterLeave},{default:I(()=>[p.overlayVisible?(r(),n("div",{key:0,ref:t.overlayRef,class:h(t.panelStyleClass),onClick:l[9]||(l[9]=(...s)=>t.onOverlayClick&&t.onOverlayClick(...s))},[f(e.$slots,"header",{value:i.modelValue,options:t.visibleOptions}),i.showToggleAll&&i.selectionLimit==null||i.filter?(r(),n("div",he,[i.showToggleAll&&i.selectionLimit==null?(r(),n("div",{key:0,class:"p-checkbox p-component",onClick:l[5]||(l[5]=(...s)=>t.onToggleAll&&t.onToggleAll(...s)),role:"checkbox","aria-checked":t.allSelected},[a("div",pe,[a("input",{type:"checkbox",readonly:"",onFocus:l[3]||(l[3]=(...s)=>t.onHeaderCheckboxFocus&&t.onHeaderCheckboxFocus(...s)),onBlur:l[4]||(l[4]=(...s)=>t.onHeaderCheckboxBlur&&t.onHeaderCheckboxBlur(...s))},null,32)]),a("div",{class:h(["p-checkbox-box",{"p-highlight":t.allSelected,"p-focus":p.headerCheckboxFocused}]),role:"checkbox","aria-checked":t.allSelected},[a("span",{class:h(["p-checkbox-icon",{"pi pi-check":t.allSelected}])},null,2)],10,fe)],8,ce)):g("",!0),i.filter?(r(),n("div",be,[O(a("input",{type:"text",ref:"filterInput","onUpdate:modelValue":l[6]||(l[6]=s=>p.filterValue=s),class:"p-multiselect-filter p-inputtext p-component",placeholder:i.filterPlaceholder,onInput:l[7]||(l[7]=(...s)=>t.onFilterChange&&t.onFilterChange(...s))},null,40,me),[[X,p.filterValue]]),ye])):g("",!0),O((r(),n("button",{class:"p-multiselect-close p-link",onClick:l[8]||(l[8]=(...s)=>t.onCloseClick&&t.onCloseClick(...s)),type:"button"},ve)),[[V]])])):g("",!0),a("div",{class:"p-multiselect-items-wrapper",style:H({"max-height":t.virtualScrollerDisabled?i.scrollHeight:""})},[E(T,Y({ref:t.virtualScrollerRef},i.virtualScrollerOptions,{items:t.visibleOptions,style:{height:i.scrollHeight},disabled:t.virtualScrollerDisabled}),$({content:I(({styleClass:s,contentRef:D,items:v,getItemOptions:S,contentStyle:M})=>[a("ul",{ref:D,class:h(["p-multiselect-items p-component",s]),style:H(M),role:"listbox","aria-multiselectable":"true"},[i.optionGroupLabel?(r(!0),n(m,{key:1},L(v,(o,C)=>(r(),n(m,{key:t.getOptionGroupRenderKey(o)},[a("li",Oe,[f(e.$slots,"optiongroup",{option:o,index:t.getOptionIndex(C,S)},()=>[k(y(t.getOptionGroupLabel(o)),1)])]),(r(!0),n(m,null,L(t.getOptionGroupChildren(o),(d,z)=>O((r(),n("li",{class:h(["p-multiselect-item",{"p-highlight":t.isSelected(d),"p-disabled":t.isOptionDisabled(d)}]),role:"option","aria-selected":t.isSelected(d),key:t.getOptionRenderKey(d),onClick:x=>t.onOptionSelect(x,d),onKeydown:x=>t.onOptionKeyDown(x,d),tabindex:i.tabindex||"0","aria-label":t.getOptionLabel(d)},[a("div",Se,[a("div",{class:h(["p-checkbox-box",{"p-highlight":t.isSelected(d)}])},[a("span",{class:h(["p-checkbox-icon",{"pi pi-check":t.isSelected(d)}])},null,2)],2)]),f(e.$slots,"option",{option:d,index:t.getOptionIndex(z,S)},()=>[a("span",null,y(t.getOptionLabel(d)),1)])],42,Ve)),[[V]])),128))],64))),128)):(r(!0),n(m,{key:0},L(v,(o,C)=>O((r(),n("li",{class:h(["p-multiselect-item",{"p-highlight":t.isSelected(o),"p-disabled":t.isOptionDisabled(o)}]),role:"option","aria-selected":t.isSelected(o),key:t.getOptionRenderKey(o),onClick:d=>t.onOptionSelect(d,o),onKeydown:d=>t.onOptionKeyDown(d,o),tabindex:i.tabindex||"0","aria-label":t.getOptionLabel(o)},[a("div",Le,[a("div",{class:h(["p-checkbox-box",{"p-highlight":t.isSelected(o)}])},[a("span",{class:h(["p-checkbox-icon",{"pi pi-check":t.isSelected(o)}])},null,2)],2)]),f(e.$slots,"option",{option:o,index:t.getOptionIndex(C,S)},()=>[a("span",null,y(t.getOptionLabel(o)),1)])],42,ke)),[[V]])),128)),p.filterValue&&(!v||v&&v.length===0)?(r(),n("li",Ce,[f(e.$slots,"emptyfilter",{},()=>[k(y(t.emptyFilterMessageText),1)])])):!i.options||i.options&&i.options.length===0?(r(),n("li",xe,[f(e.$slots,"empty",{},()=>[k(y(t.emptyMessageText),1)])])):g("",!0)],6)]),_:2},[e.$slots.loader?{name:"loader",fn:I(({options:s})=>[f(e.$slots,"loader",{options:s})])}:void 0]),1040,["items","style","disabled"])],4),f(e.$slots,"footer",{value:i.modelValue,options:t.visibleOptions})],2)):g("",!0)]),_:3},8,["onEnter","onLeave","onAfterLeave"])],8,["to","disabled"]))],2)}var Ge=ie(se,[["render",we]]);export{Ge as default};
