import{s as v}from"./button.esm.a5ac1061.js";import{O as n,X as c,U as g,c as p,f as I,k as f,e as h,l as b,w as k,P as S,I as C,p as _,r as D,E as $,o as y,F as w,m as x,C as E}from"./main.9e765f7d.js";import{R as V}from"./ripple.esm.1fe20658.js";import{_ as L}from"./plugin-vue_export-helper.21dcd24c.js";const T={name:"OrderList",emits:["update:modelValue","reorder","update:selection","selection-change"],props:{modelValue:{type:Array,default:null},selection:{type:Array,default:null},dataKey:{type:String,default:null},listStyle:{type:null,default:null},metaKeySelection:{type:Boolean,default:!0},responsive:{type:Boolean,default:!0},breakpoint:{type:String,default:"960px"},stripedRows:{type:Boolean,default:!1}},itemTouched:!1,reorderDirection:null,styleElement:null,data(){return{d_selection:this.selection}},beforeUnmount(){this.destroyStyle()},updated(){this.reorderDirection&&(this.updateListScroll(),this.reorderDirection=null)},mounted(){this.responsive&&this.createStyle()},methods:{getItemKey(t,e){return this.dataKey?n.resolveFieldData(t,this.dataKey):e},isSelected(t){return n.findIndexInList(t,this.d_selection)!=-1},moveUp(t){if(this.d_selection){let e=[...this.modelValue];for(let s=0;s<this.d_selection.length;s++){let r=this.d_selection[s],i=n.findIndexInList(r,e);if(i!==0){let l=e[i],o=e[i-1];e[i-1]=l,e[i]=o}else break}this.reorderDirection="up",this.$emit("update:modelValue",e),this.$emit("reorder",{originalEvent:t,value:e,direction:this.reorderDirection})}},moveTop(t){if(this.d_selection){let e=[...this.modelValue];for(let s=0;s<this.d_selection.length;s++){let r=this.d_selection[s],i=n.findIndexInList(r,e);if(i!==0){let l=e.splice(i,1)[0];e.unshift(l)}else break}this.reorderDirection="top",this.$emit("update:modelValue",e),this.$emit("reorder",{originalEvent:t,value:e,direction:this.reorderDirection})}},moveDown(t){if(this.d_selection){let e=[...this.modelValue];for(let s=this.d_selection.length-1;s>=0;s--){let r=this.d_selection[s],i=n.findIndexInList(r,e);if(i!==e.length-1){let l=e[i],o=e[i+1];e[i+1]=l,e[i]=o}else break}this.reorderDirection="down",this.$emit("update:modelValue",e),this.$emit("reorder",{originalEvent:t,value:e,direction:this.reorderDirection})}},moveBottom(t){if(this.d_selection){let e=[...this.modelValue];for(let s=this.d_selection.length-1;s>=0;s--){let r=this.d_selection[s],i=n.findIndexInList(r,e);if(i!==e.length-1){let l=e.splice(i,1)[0];e.push(l)}else break}this.reorderDirection="bottom",this.$emit("update:modelValue",e),this.$emit("reorder",{originalEvent:t,value:e,direction:this.reorderDirection})}},onItemClick(t,e,s){this.itemTouched=!1;let r=n.findIndexInList(e,this.d_selection),i=r!=-1;if(this.itemTouched?!1:this.metaKeySelection){let o=t.metaKey||t.ctrlKey;i&&o?this.d_selection=this.d_selection.filter((m,d)=>d!==r):(this.d_selection=o?this.d_selection?[...this.d_selection]:[]:[],n.insertIntoOrderedArray(e,s,this.d_selection,this.modelValue))}else i?this.d_selection=this.d_selection.filter((o,m)=>m!==r):(this.d_selection=this.d_selection?[...this.d_selection]:[],n.insertIntoOrderedArray(e,s,this.d_selection,this.modelValue));this.$emit("update:selection",this.d_selection),this.$emit("selection-change",{originalEvent:t,value:this.d_selection})},onItemTouchEnd(){this.itemTouched=!0},onItemKeyDown(t,e,s){let r=t.currentTarget;switch(t.which){case 40:var i=this.findNextItem(r);i&&i.focus(),t.preventDefault();break;case 38:var l=this.findPrevItem(r);l&&l.focus(),t.preventDefault();break;case 13:this.onItemClick(t,e,s),t.preventDefault();break}},findNextItem(t){let e=t.nextElementSibling;return e?c.hasClass(e,"p-orderlist-item")?e:this.findNextItem(e):null},findPrevItem(t){let e=t.previousElementSibling;return e?c.hasClass(e,"p-orderlist-item")?e:this.findPrevItem(e):null},updateListScroll(){const t=c.find(this.$refs.list.$el,".p-orderlist-item.p-highlight");if(t&&t.length)switch(this.reorderDirection){case"up":c.scrollInView(this.$refs.list.$el,t[0]);break;case"top":this.$refs.list.$el.scrollTop=0;break;case"down":c.scrollInView(this.$refs.list.$el,t[t.length-1]);break;case"bottom":this.$refs.list.$el.scrollTop=this.$refs.list.$el.scrollHeight;break}},createStyle(){if(!this.styleElement){this.$el.setAttribute(this.attributeSelector,""),this.styleElement=document.createElement("style"),this.styleElement.type="text/css",document.head.appendChild(this.styleElement);let t=`
@media screen and (max-width: ${this.breakpoint}) {
    .p-orderlist[${this.attributeSelector}] {
        flex-direction: column;
    }

    .p-orderlist[${this.attributeSelector}] .p-orderlist-controls {
        padding: var(--content-padding);
        flex-direction: row;
    }

    .p-orderlist[${this.attributeSelector}] .p-orderlist-controls .p-button {
        margin-right: var(--inline-spacing);
        margin-bottom: 0;
    }

    .p-orderlist[${this.attributeSelector}] .p-orderlist-controls .p-button:last-child {
        margin-right: 0;
    }
}
`;this.styleElement.innerHTML=t}},destroyStyle(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)}},computed:{containerClass(){return["p-orderlist p-component",{"p-orderlist-striped":this.stripedRows}]},attributeSelector(){return g()}},components:{OLButton:v},directives:{ripple:V}},K={class:"p-orderlist-controls"},B={class:"p-orderlist-list-container"},O={key:0,class:"p-orderlist-header"},N=["onClick","onKeydown","aria-selected"];function U(t,e,s,r,i,l){const o=D("OLButton"),m=$("ripple");return y(),p("div",{class:_(l.containerClass)},[I("div",K,[f(t.$slots,"controlsstart"),h(o,{type:"button",icon:"pi pi-angle-up",onClick:l.moveUp},null,8,["onClick"]),h(o,{type:"button",icon:"pi pi-angle-double-up",onClick:l.moveTop},null,8,["onClick"]),h(o,{type:"button",icon:"pi pi-angle-down",onClick:l.moveDown},null,8,["onClick"]),h(o,{type:"button",icon:"pi pi-angle-double-down",onClick:l.moveBottom},null,8,["onClick"]),f(t.$slots,"controlsend")]),I("div",B,[t.$slots.header?(y(),p("div",O,[f(t.$slots,"header")])):b("",!0),h(C,{ref:"list",name:"p-orderlist-flip",tag:"ul",class:"p-orderlist-list",style:S(s.listStyle),role:"listbox","aria-multiselectable":"multiple"},{default:k(()=>[(y(!0),p(w,null,x(s.modelValue,(d,u)=>E((y(),p("li",{key:l.getItemKey(d,u),tabindex:"0",class:_(["p-orderlist-item",{"p-highlight":l.isSelected(d)}]),onClick:a=>l.onItemClick(a,d,u),onKeydown:a=>l.onItemKeyDown(a,d,u),onTouchend:e[0]||(e[0]=(...a)=>l.onItemTouchEnd&&l.onItemTouchEnd(...a)),role:"option","aria-selected":l.isSelected(d)},[f(t.$slots,"item",{item:d,index:u})],42,N)),[[m]])),128))]),_:3},8,["style"])])],2)}var F=L(T,[["render",U]]);export{F as default};
