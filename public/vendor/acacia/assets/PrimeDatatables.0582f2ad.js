var $=Object.defineProperty,L=Object.defineProperties;var B=Object.getOwnPropertyDescriptors;var F=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var P=(e,t,o)=>t in e?$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,k=(e,t)=>{for(var o in t||(t={}))I.call(t,o)&&P(e,o,t[o]);if(F)for(var o of F(t))O.call(t,o)&&P(e,o,t[o]);return e},w=(e,t)=>L(e,B(t));import{d as R,y as V,a1 as r,z,j as u,a2 as K,a0 as M,n as U,w as m,r as b,o as v,f as d,e as C,k as D,t as j,c as S,l as J,F as q,q as A}from"./main.9e765f7d.js";import{s as _}from"./inputtext.esm.dc0f2264.js";import{s as E}from"./datatable.esm.3689bee8.js";import{s as G}from"./button.esm.a5ac1061.js";import{_ as H}from"./plugin-vue_export-helper.21dcd24c.js";import"./paginator.esm.d428c35b.js";import"./ripple.esm.1fe20658.js";import"./dropdown.esm.5bafa883.js";import"./overlayeventbus.esm.ef5cc0da.js";import"./virtualscroller.esm.76cd2139.js";import"./inputnumber.esm.2f528c5c.js";const Q=()=>{let e=null;return function(t,o=500){clearTimeout(e),e=setTimeout(()=>{t()},o)}},W=R({name:"PrimeDatatables",components:{DataTable:E,InputText:_,Button:G},props:{apiUrl:String,title:String,refresh:String,defaultSortField:String,defaultSortDesc:{type:Boolean,default:!0},searchableColumns:{type:Array,default:[]},columnFilters:{required:!0,type:Object,default:{}},stateKey:String},setup(e){V(async()=>{a.value=JSON.parse(sessionStorage.getItem(N.value)),a.value||(a.value={first:0,filters:n.value,rows:10}),a.value.page=Math.fround(parseInt(a.value.first)/parseInt(a.value.rows||10)),console.log(a.value),await i()});const t=r(e,"refresh");z(t,l=>{i()});const o=u(),h=Q(),c=u(!1),f=u(0),p=u(),g=r(e,"columnFilters"),n=u({});n.value=w(k({},g.value),{global:{value:"",matchMode:K.CONTAINS}});const s=r(e,"searchableColumns"),a=u({}),T=r(e,"apiUrl"),N=r(e,"stateKey"),i=async()=>{var l;c.value=!0,a.value.filters=n.value,a.value.sortField||(a.value.sortField=r(e,"defaultSortField").value),[-1,1].includes(a.value.sortOrder)||(a.value.sortOrder=r(e,"defaultSortDesc").value?-1:1);try{const y=await M.get(T.value,{params:{dt_params:JSON.stringify(a.value),searchable_columns:JSON.stringify(s.value)}});p.value=(l=y.data.data)!=null?l:[],f.value=y.data.total,c.value=!1}catch{p.value=[],f.value=0,c.value=!1}};return{dt:o,loading:c,totalRecords:f,records:p,filters:n,lazyParams:a,loadLazyData:i,onPage:l=>{a.value=l,i()},onSort:l=>{a.value=l,i()},onFilter:()=>{i()},debounce:h}}}),X=A(" Loading... "),Y={class:"flex flex-wrap gap-2 justify-between items-center"},Z={class:"flex items-center gap-2"},x={class:"font-semibold"},ee={class:"p-input-icon-left max-w-[360px]"},te={key:0,class:"pi pi-search"},ae=d("p",{class:"text-center"},"No records found.",-1);function oe(e,t,o,h,c,f){const p=b("Button"),g=b("InputText"),n=b("DataTable");return v(),U(n,{class:"p-datatable-sm",value:e.records,lazy:!0,"auto-layout":!0,paginator:!0,rows:10,filters:e.filters,"onUpdate:filters":t[3]||(t[3]=s=>e.filters=s),ref:"dt",loading:e.loading,"total-records":e.totalRecords,globalFilterFields:e.searchableColumns,onPage:e.onPage,onSort:e.onSort,onFilter:e.onFilter,"filter-display":"row","responsive-layout":"stack",breakpoint:"960px","state-key":e.stateKey,"state-storage":"session",currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} records",paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,15,25,50]},{loading:m(()=>[X]),header:m(()=>[d("div",Y,[d("div",null,[d("div",Z,[C(p,{onClick:e.loadLazyData,class:"p-button-text p-button-plain",icon:"pi pi-refresh"},null,8,["onClick"]),D(e.$slots,"header",{},()=>[d("h5",x,j(e.title),1)])])]),d("div",ee,[e.filters.global.value?(v(),S(q,{key:1},[e.filters.global.value?(v(),S("i",{key:0,class:"pi pi-times",onClick:t[0]||(t[0]=s=>{e.filters.global.value=null,e.onFilter()})})):J("",!0)],64)):(v(),S("i",te)),C(g,{modelValue:e.filters.global.value,"onUpdate:modelValue":t[1]||(t[1]=s=>e.filters.global.value=s),onInput:t[2]||(t[2]=s=>e.debounce(e.onFilter,500)),placeholder:"Keyword Search"},null,8,["modelValue"])])])]),empty:m(()=>[ae]),default:m(()=>[D(e.$slots,"default")]),_:3},8,["value","filters","loading","total-records","globalFilterFields","onPage","onSort","onFilter","state-key"])}var Se=H(W,[["render",oe]]);export{Se as default};
