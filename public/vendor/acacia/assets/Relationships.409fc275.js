var E=Object.defineProperty,q=Object.defineProperties;var z=Object.getOwnPropertyDescriptors;var g=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var x=(r,e,t)=>e in r?E(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,_=(r,e)=>{for(var t in e||(e={}))A.call(e,t)&&x(r,t,e[t]);if(g)for(var t of g(e))B.call(e,t)&&x(r,t,e[t]);return r},j=(r,e)=>q(r,z(e));import F from"./PrimeDatatables.06075155.js";import{s as c}from"./column.esm.cc8b8b77.js";import{s as K}from"./button.esm.cbb15c31.js";import{s as N}from"./contextmenu.esm.552fe433.js";import{e as w,p as d,f as O,g as P,i as U,j as n,w as f,m as a,d as h,a7 as V,F as $,n as I,Y as k,a as L,o as Y,y as G,z as H,x as J}from"./vendor.05df324e.js";import"./inputtext.esm.b08d2117.js";import"./datatable.esm.6e02ebef.js";import"./paginator.esm.ff35b289.js";import"./ripple.esm.574b991d.js";import"./dropdown.esm.573df5c1.js";import"./overlayeventbus.esm.d529c5a8.js";import"./virtualscroller.esm.adfef9da.js";import"./inputnumber.esm.f09ada2c.js";import"./plugin-vue_export-helper.21dcd24c.js";const Q=w({name:"Relationships",props:{model:{required:!0}}}),ue=w(j(_({},Q),{setup(r){const e=d(["id","type","method","related_key"]),t=d(null),u=d(),p=d([]),C=O(),b=P(),y=d(null),v=o=>[{label:"Edit",icon:"pi pi-pencil",command:()=>I.Inertia.get(h("sms.sending-sessions.show",o)),visible:()=>!0},{label:"Delete",icon:"pi pi-trash",command:()=>{C.require({message:"Are you sure you want to delete this record?",header:"Confirm Deletion",accept:()=>T(o)})},visible:()=>!0}],M=()=>{y.value=new Date().toUTCString()},R=async(o,l)=>{p.value=v(l),await k(),u.value.show(o)},S=async o=>{p.value=v(o.data),await k(),u.value.show(o.originalEvent)},T=async function(o){var l,i,m;try{const s=await L.delete(h("api.sms.sending-sessions.destroy",o));b.add({severity:"success",detail:s.data.message}),M()}catch(s){const D=((i=(l=s==null?void 0:s.response)==null?void 0:l.data)==null?void 0:i.message)||((m=s==null?void 0:s.data)==null?void 0:m.message)||(s==null?void 0:s.message)||s||"Server error";b.add({severity:"error",detail:D,summary:"Server Error"})}};return(o,l)=>(Y(),U($,null,[n(F,{"api-url":a(h)("api.acacia.schematics.schematic.relationships",o.model.id),"column-filters":{},"searchable-columns":e.value,"state-key":"schematic-fields-dt",contextMenu:"",contextMenuSelection:a(t),"onUpdate:contextMenuSelection":l[0]||(l[0]=i=>V(t)?t.value=i:null),onRowContextmenu:S,"row-hover":!0,refresh:a(y)},{default:f(()=>[n(a(c),{field:"method",header:"Method",sortable:!0},{body:f(({data:i})=>[G(H(i.method)+"()",1)]),_:1}),n(a(c),{field:"type",header:"Relationship Type",sortable:!0}),n(a(c),{field:"related_table",header:"Related Table",sortable:!0}),n(a(c),{field:"local_key",header:"Local Key",sortable:!0}),n(a(c),{field:"related_key",header:"Related Key",sortable:!0}),n(a(c),null,{body:f(i=>[n(a(K),{class:J(["","p-button-text"]),onClick:m=>R(m,i.data),"icon-pos":"right",icon:"pi pi-ellipsis-v",label:"Actions"},null,8,["onClick"])]),_:1})]),_:1},8,["api-url","searchable-columns","contextMenuSelection","refresh"]),n(a(N),{ref_key:"contextMenu",ref:u,model:a(p)},null,8,["model"])],64))}}));export{ue as default};
