import{a5 as r,i as o,k as m,an as d,s as u,x as g,o as h}from"./vendor.05df324e.js";import{_ as f}from"./plugin-vue_export-helper.21dcd24c.js";const V={name:"Slider",emits:["update:modelValue","change","slideend"],props:{modelValue:[Number,Array],min:{type:Number,default:0},max:{type:Number,default:100},orientation:{type:String,default:"horizontal"},step:{type:Number,default:null},range:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},ariaLabelledBy:{type:String,default:null}},dragging:!1,handleIndex:null,initX:null,initY:null,barWidth:null,barHeight:null,dragListener:null,dragEndListener:null,beforeUnmount(){this.unbindDragListeners()},methods:{updateDomData(){let i=this.$el.getBoundingClientRect();this.initX=i.left+r.getWindowScrollLeft(),this.initY=i.top+r.getWindowScrollTop(),this.barWidth=this.$el.offsetWidth,this.barHeight=this.$el.offsetHeight},setValue(i){let e,t=i.touches?i.touches[0].pageX:i.pageX,s=i.touches?i.touches[0].pageY:i.pageY;this.orientation==="horizontal"?e=(t-this.initX)*100/this.barWidth:e=(this.initY+this.barHeight-s)*100/this.barHeight;let n=(this.max-this.min)*(e/100)+this.min;if(this.step){const l=this.range?this.modelValue[this.handleIndex]:this.modelValue,a=n-l;a<0?n=l+Math.ceil(n/this.step-l/this.step)*this.step:a>0&&(n=l+Math.floor(n/this.step-l/this.step)*this.step)}else n=Math.floor(n);this.updateModel(i,n)},updateModel(i,e){let t=parseFloat(e.toFixed(10)),s;if(this.range)if(s=this.modelValue?[...this.modelValue]:[],this.handleIndex==0){let n=this.modelValue?this.modelValue[1]:this.max;t<this.min?t=this.min:t>=n&&(t=n),s[0]=t,s[1]=s[1]||this.max}else{let n=this.modelValue?this.modelValue[0]:this.min;t>this.max?t=this.max:t<=n&&(t=n),s[0]=s[0]||this.min,s[1]=t}else t<this.min?t=this.min:t>this.max&&(t=this.max),s=t;this.$emit("update:modelValue",s),this.$emit("change",s)},onDragStart(i,e){this.disabled||(r.addClass(this.$el,"p-slider-sliding"),this.dragging=!0,this.updateDomData(),this.handleIndex=e,i.preventDefault())},onDrag(i){this.dragging&&(this.setValue(i),i.preventDefault())},onDragEnd(i){this.dragging&&(this.dragging=!1,r.removeClass(this.$el,"p-slider-sliding"),this.$emit("slideend",{originalEvent:i,value:this.modelValue}))},onBarClick(i){this.disabled||r.hasClass(i.target,"p-slider-handle")||(this.updateDomData(),this.setValue(i))},onMouseDown(i,e){this.bindDragListeners(),this.onDragStart(i,e)},onKeyDown(i,e){switch(this.handleIndex=e,i.which){case 40:this.vertical&&(this.decrementValue(i,e),i.preventDefault());break;case 38:this.vertical&&(this.incrementValue(i,e),i.preventDefault());break;case 37:this.horizontal&&(this.decrementValue(i,e),i.preventDefault());break;case 39:this.horizontal&&(this.incrementValue(i,e),i.preventDefault());break}},decrementValue(i,e){let t;this.range?this.step?t=this.modelValue[e]-this.step:t=this.modelValue[e]-1:this.step?t=this.modelValue-this.step:t=this.modelValue-1,this.updateModel(i,t),i.preventDefault()},incrementValue(i,e){let t;this.range?this.step?t=this.modelValue[e]+this.step:t=this.modelValue[e]+1:this.step?t=this.modelValue+this.step:t=this.modelValue+1,this.updateModel(i,t),i.preventDefault()},bindDragListeners(){this.dragListener||(this.dragListener=this.onDrag.bind(this),document.addEventListener("mousemove",this.dragListener)),this.dragEndListener||(this.dragEndListener=this.onDragEnd.bind(this),document.addEventListener("mouseup",this.dragEndListener))},unbindDragListeners(){this.dragListener&&(document.removeEventListener("mousemove",this.dragListener),this.dragListener=null),this.dragEndListener&&(document.removeEventListener("mouseup",this.dragEndListener),this.dragEndListener=null)}},computed:{containerClass(){return["p-slider p-component",{"p-disabled":this.disabled,"p-slider-horizontal":this.orientation==="horizontal","p-slider-vertical":this.orientation==="vertical"}]},horizontal(){return this.orientation==="horizontal"},vertical(){return this.orientation==="vertical"},rangeStyle(){return this.range?this.horizontal?{left:this.rangeStartPosition+"%",width:this.rangeEndPosition-this.rangeStartPosition+"%"}:{bottom:this.rangeStartPosition+"%",height:this.rangeEndPosition-this.rangeStartHandlePosition+"%"}:this.horizontal?{width:this.handlePosition+"%"}:{height:this.handlePosition+"%"}},handleStyle(){return this.horizontal?{left:this.handlePosition+"%"}:{bottom:this.handlePosition+"%"}},handlePosition(){return this.modelValue<this.min?0:this.modelValue>this.max?100:(this.modelValue-this.min)*100/(this.max-this.min)},rangeStartPosition(){return this.modelValue&&this.modelValue[0]?(this.modelValue[0]<this.min?0:this.modelValue[0]-this.min)*100/(this.max-this.min):0},rangeEndPosition(){return this.modelValue&&this.modelValue[1]?(this.modelValue[1]>this.max?100:this.modelValue[1]-this.min)*100/(this.max-this.min):100},rangeStartHandleStyle(){return this.horizontal?{left:this.rangeStartPosition+"%"}:{bottom:this.rangeStartPosition+"%"}},rangeEndHandleStyle(){return this.horizontal?{left:this.rangeEndPosition+"%"}:{bottom:this.rangeEndPosition+"%"}}}},b=["aria-valuemin","aria-valuenow","aria-valuemax","aria-labelledby"],y=["aria-valuemin","aria-valuenow","aria-valuemax","aria-labelledby"],D=["aria-valuemin","aria-valuenow","aria-valuemax","aria-labelledby"];function v(i,e,t,s,n,l){return h(),o("div",{class:g(l.containerClass),onClick:e[15]||(e[15]=(...a)=>l.onBarClick&&l.onBarClick(...a))},[m("span",{class:"p-slider-range",style:d(l.rangeStyle)},null,4),t.range?u("",!0):(h(),o("span",{key:0,class:"p-slider-handle",style:d(l.handleStyle),onTouchstart:e[0]||(e[0]=a=>l.onDragStart(a)),onTouchmove:e[1]||(e[1]=a=>l.onDrag(a)),onTouchend:e[2]||(e[2]=a=>l.onDragEnd(a)),onMousedown:e[3]||(e[3]=a=>l.onMouseDown(a)),onKeydown:e[4]||(e[4]=a=>l.onKeyDown(a)),tabindex:"0",role:"slider","aria-valuemin":t.min,"aria-valuenow":t.modelValue,"aria-valuemax":t.max,"aria-labelledby":t.ariaLabelledBy},null,44,b)),t.range?(h(),o("span",{key:1,class:"p-slider-handle",style:d(l.rangeStartHandleStyle),onTouchstart:e[5]||(e[5]=a=>l.onDragStart(a,0)),onTouchmove:e[6]||(e[6]=a=>l.onDrag(a)),onTouchend:e[7]||(e[7]=a=>l.onDragEnd(a)),onMousedown:e[8]||(e[8]=a=>l.onMouseDown(a,0)),onKeydown:e[9]||(e[9]=a=>l.onKeyDown(a)),tabindex:"0",role:"slider","aria-valuemin":t.min,"aria-valuenow":t.modelValue?t.modelValue[0]:null,"aria-valuemax":t.max,"aria-labelledby":t.ariaLabelledBy},null,44,y)):u("",!0),t.range?(h(),o("span",{key:2,class:"p-slider-handle",style:d(l.rangeEndHandleStyle),onTouchstart:e[10]||(e[10]=a=>l.onDragStart(a,1)),onTouchmove:e[11]||(e[11]=a=>l.onDrag(a)),onTouchend:e[12]||(e[12]=a=>l.onDragEnd(a)),onMousedown:e[13]||(e[13]=a=>l.onMouseDown(a,1)),onKeydown:e[14]||(e[14]=a=>l.onKeyDown(a,1)),tabindex:"0",role:"slider","aria-valuemin":t.min,"aria-valuenow":t.modelValue?t.modelValue[1]:null,"aria-valuemax":t.max,"aria-labelledby":t.ariaLabelledBy},null,44,D)):u("",!0)],2)}var S=f(V,[["render",v]]);export{S as default};
