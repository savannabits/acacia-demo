import{O as u,X as m,c as w,F as p,m as C,f,n as c,G as R,l as h,P as x,r as b,o as a,p as v}from"./main.9e765f7d.js";import k from"./BodyCell.08dc9315.js";import{_ as I}from"./plugin-vue_export-helper.21dcd24c.js";import"./overlayeventbus.esm.ef5cc0da.js";import"./RowRadioButton.524679cb.js";import"./RowCheckbox.40bd9052.js";import"./ripple.esm.1fe20658.js";const E={name:"TableBody",emits:["rowgroup-toggle","row-click","row-dblclick","row-rightclick","row-touchend","row-keydown","row-mousedown","row-dragstart","row-dragover","row-dragleave","row-dragend","row-drop","row-toggle","radio-change","checkbox-change","cell-edit-init","cell-edit-complete","cell-edit-cancel","row-edit-init","row-edit-save","row-edit-cancel","editing-meta-change"],props:{value:{type:Array,default:null},columns:{type:null,default:null},frozenRow:{type:Boolean,default:!1},empty:{type:Boolean,default:!1},rowGroupMode:{type:String,default:null},groupRowsBy:{type:[Array,String],default:null},expandableRowGroups:{type:Boolean,default:!1},expandedRowGroups:{type:Array,default:null},dataKey:{type:String,default:null},expandedRowIcon:{type:String,default:null},collapsedRowIcon:{type:String,default:null},expandedRows:{type:Array,default:null},expandedRowKeys:{type:null,default:null},selection:{type:[Array,Object],default:null},selectionKeys:{type:null,default:null},selectionMode:{type:String,default:null},contextMenu:{type:Boolean,default:!1},contextMenuSelection:{type:Object,default:null},rowClass:{type:null,default:null},rowStyle:{type:null,default:null},editMode:{type:String,default:null},compareSelectionBy:{type:String,default:"deepEquals"},editingRows:{type:Array,default:null},editingRowKeys:{type:null,default:null},editingMeta:{type:Object,default:null},loading:{type:Boolean,default:!1},templates:{type:null,default:null},scrollable:{type:Boolean,default:!1},responsiveLayout:{type:String,default:"stack"},virtualScrollerContentProps:{type:Object,default:null},isVirtualScrollerDisabled:{type:Boolean,default:!1}},watch:{virtualScrollerContentProps(e,t){!this.isVirtualScrollerDisabled&&this.getVirtualScrollerProp("vertical")&&this.getVirtualScrollerProp("itemSize",t)!==this.getVirtualScrollerProp("itemSize",e)&&this.updateVirtualScrollerPosition()}},mounted(){this.frozenRow&&this.updateFrozenRowStickyPosition(),this.scrollable&&this.rowGroupMode==="subheader"&&this.updateFrozenRowGroupHeaderStickyPosition(),!this.isVirtualScrollerDisabled&&this.getVirtualScrollerProp("vertical")&&this.updateVirtualScrollerPosition()},updated(){this.frozenRow&&this.updateFrozenRowStickyPosition(),this.scrollable&&this.rowGroupMode==="subheader"&&this.updateFrozenRowGroupHeaderStickyPosition()},data(){return{rowGroupHeaderStyleObject:{}}},methods:{columnProp(e,t){return u.getVNodeProp(e,t)},shouldRenderRowGroupHeader(e,t,o){let s=u.resolveFieldData(t,this.groupRowsBy),g=e[o-1];if(g){let l=u.resolveFieldData(g,this.groupRowsBy);return s!==l}else return!0},getRowKey(e,t){return this.dataKey?u.resolveFieldData(e,this.dataKey):t},getRowIndex(e){const t=this.getVirtualScrollerProp("getItemOptions");return t?t(e).index:e},getRowClass(e){let t=[];if(this.selectionMode&&t.push("p-selectable-row"),this.selection&&t.push({"p-highlight":this.isSelected(e)}),this.contextMenuSelection&&t.push({"p-highlight-contextmenu":this.isSelectedWithContextMenu(e)}),this.rowClass){let o=this.rowClass(e);o&&t.push(o)}return t},shouldRenderRowGroupFooter(e,t,o){if(this.expandableRowGroups&&!this.isRowGroupExpanded(t))return!1;{let s=u.resolveFieldData(t,this.groupRowsBy),g=e[o+1];if(g){let l=u.resolveFieldData(g,this.groupRowsBy);return s!==l}else return!0}},shouldRenderBodyCell(e,t,o){if(this.rowGroupMode){if(this.rowGroupMode==="subheader")return this.groupRowsBy!==this.columnProp(t,"field");if(this.rowGroupMode==="rowspan")if(this.isGrouped(t)){let s=e[o-1];if(s){let g=u.resolveFieldData(e[o],this.columnProp(t,"field")),l=u.resolveFieldData(s,this.columnProp(t,"field"));return g!==l}else return!0}else return!0}else return!this.columnProp(t,"hidden")},calculateRowGroupSize(e,t,o){if(this.isGrouped(t)){let s=u.resolveFieldData(e[o],this.columnProp(t,"field")),g=s,l=0;for(;s===g;){l++;let y=e[++o];if(y)g=u.resolveFieldData(y,this.columnProp(t,"field"));else break}return l===1?null:l}else return null},rowTogglerIcon(e){const t=this.isRowExpanded(e)?this.expandedRowIcon:this.collapsedRowIcon;return["p-row-toggler-icon pi",t]},rowGroupTogglerIcon(e){const t=this.isRowGroupExpanded(e)?this.expandedRowIcon:this.collapsedRowIcon;return["p-row-toggler-icon pi",t]},isGrouped(e){return this.groupRowsBy&&this.columnProp(e,"field")?Array.isArray(this.groupRowsBy)?this.groupRowsBy.indexOf(e.props.field)>-1:this.groupRowsBy===e.props.field:!1},isRowEditing(e){return e&&this.editingRows?this.dataKey?this.editingRowKeys?this.editingRowKeys[u.resolveFieldData(e,this.dataKey)]!==void 0:!1:this.findIndex(e,this.editingRows)>-1:!1},isRowExpanded(e){return e&&this.expandedRows?this.dataKey?this.expandedRowKeys?this.expandedRowKeys[u.resolveFieldData(e,this.dataKey)]!==void 0:!1:this.findIndex(e,this.expandedRows)>-1:!1},isRowGroupExpanded(e){if(this.expandableRowGroups&&this.expandedRowGroups){let t=u.resolveFieldData(e,this.groupRowsBy);return this.expandedRowGroups.indexOf(t)>-1}return!1},isSelected(e){return e&&this.selection?this.dataKey?this.selectionKeys?this.selectionKeys[u.resolveFieldData(e,this.dataKey)]!==void 0:!1:this.selection instanceof Array?this.findIndexInSelection(e)>-1:this.equals(e,this.selection):!1},isSelectedWithContextMenu(e){return e&&this.contextMenuSelection?this.equals(e,this.contextMenuSelection,this.dataKey):!1},findIndexInSelection(e){return this.findIndex(e,this.selection)},findIndex(e,t){let o=-1;if(t&&t.length){for(let s=0;s<t.length;s++)if(this.equals(e,t[s])){o=s;break}}return o},equals(e,t){return this.compareSelectionBy==="equals"?e===t:u.equals(e,t,this.dataKey)},onRowGroupToggle(e,t){this.$emit("rowgroup-toggle",{originalEvent:e,data:t})},onRowClick(e,t,o){this.$emit("row-click",{originalEvent:e,data:t,index:o})},onRowDblClick(e,t,o){this.$emit("row-dblclick",{originalEvent:e,data:t,index:o})},onRowRightClick(e,t,o){this.$emit("row-rightclick",{originalEvent:e,data:t,index:o})},onRowTouchEnd(e){this.$emit("row-touchend",e)},onRowKeyDown(e,t,o){this.$emit("row-keydown",{originalEvent:e,data:t,index:o})},onRowMouseDown(e){this.$emit("row-mousedown",e)},onRowDragStart(e,t){this.$emit("row-dragstart",{originalEvent:e,index:t})},onRowDragOver(e,t){this.$emit("row-dragover",{originalEvent:e,index:t})},onRowDragLeave(e){this.$emit("row-dragleave",e)},onRowDragEnd(e){this.$emit("row-dragend",e)},onRowDrop(e){this.$emit("row-drop",e)},onRowToggle(e){this.$emit("row-toggle",e)},onRadioChange(e){this.$emit("radio-change",e)},onCheckboxChange(e){this.$emit("checkbox-change",e)},onCellEditInit(e){this.$emit("cell-edit-init",e)},onCellEditComplete(e){this.$emit("cell-edit-complete",e)},onCellEditCancel(e){this.$emit("cell-edit-cancel",e)},onRowEditInit(e){this.$emit("row-edit-init",e)},onRowEditSave(e){this.$emit("row-edit-save",e)},onRowEditCancel(e){this.$emit("row-edit-cancel",e)},onEditingMetaChange(e){this.$emit("editing-meta-change",e)},updateFrozenRowStickyPosition(){this.$el.style.top=m.getOuterHeight(this.$el.previousElementSibling)+"px"},updateFrozenRowGroupHeaderStickyPosition(){let e=m.getOuterHeight(this.$el.previousElementSibling);this.rowGroupHeaderStyleObject.top=e+"px"},updateVirtualScrollerPosition(){const e=m.getOuterHeight(this.$el.previousElementSibling);this.$el.style.top=(this.$el.style.top||0)+e+"px"},getVirtualScrollerProp(e,t){return t=t||this.virtualScrollerContentProps,t?t[e]:null},bodyRef(e){const t=this.getVirtualScrollerProp("contentRef");t&&t(e)}},computed:{columnsLength(){let e=0;return this.columns.forEach(t=>{this.columnProp(t,"hidden")&&e++}),this.columns?this.columns.length-e:0},rowGroupHeaderStyle(){return this.scrollable?{top:this.rowGroupHeaderStyleObject.top}:null},bodyStyle(){return this.getVirtualScrollerProp("contentStyle")}},components:{DTBodyCell:k}},G=["colspan"],P=["onClick"],M=["onClick","onDblclick","onContextmenu","onKeydown","tabindex","onDragstart","onDragover"],B=["colspan"],F={key:1,class:"p-datatable-emptymessage",role:"row"},K=["colspan"];function D(e,t,o,s,g,l){const y=b("DTBodyCell");return a(),w("tbody",{ref:l.bodyRef,class:"p-datatable-tbody",role:"rowgroup",style:x(l.bodyStyle)},[o.empty?(a(),w("tr",F,[f("td",{colspan:l.columnsLength},[o.templates.empty&&!o.loading?(a(),c(R(o.templates.empty),{key:0})):h("",!0),o.templates.loading&&o.loading?(a(),c(R(o.templates.loading),{key:1})):h("",!0)],8,K)])):(a(!0),w(p,{key:0},C(o.value,(n,i)=>(a(),w(p,{key:l.getRowKey(n,l.getRowIndex(i))+"_subheader"},[o.templates.groupheader&&o.rowGroupMode==="subheader"&&l.shouldRenderRowGroupHeader(o.value,n,l.getRowIndex(i))?(a(),w("tr",{key:0,class:"p-rowgroup-header",style:x(l.rowGroupHeaderStyle),role:"row"},[f("td",{colspan:l.columnsLength-1},[o.expandableRowGroups?(a(),w("button",{key:0,class:"p-row-toggler p-link",onClick:r=>l.onRowGroupToggle(r,n),type:"button"},[f("span",{class:v(l.rowGroupTogglerIcon(n))},null,2)],8,P)):h("",!0),(a(),c(R(o.templates.groupheader),{data:n,index:l.getRowIndex(i)},null,8,["data","index"]))],8,G)],4)):h("",!0),!o.expandableRowGroups||l.isRowGroupExpanded(n)?(a(),w("tr",{class:v(l.getRowClass(n)),style:x(o.rowStyle),key:l.getRowKey(n,l.getRowIndex(i)),onClick:r=>l.onRowClick(r,n,l.getRowIndex(i)),onDblclick:r=>l.onRowDblClick(r,n,l.getRowIndex(i)),onContextmenu:r=>l.onRowRightClick(r,n,l.getRowIndex(i)),onTouchend:t[9]||(t[9]=r=>l.onRowTouchEnd(r)),onKeydown:r=>l.onRowKeyDown(r,n,l.getRowIndex(i)),tabindex:o.selectionMode||o.contextMenu?"0":null,onMousedown:t[10]||(t[10]=r=>l.onRowMouseDown(r)),onDragstart:r=>l.onRowDragStart(r,l.getRowIndex(i)),onDragover:r=>l.onRowDragOver(r,l.getRowIndex(i)),onDragleave:t[11]||(t[11]=r=>l.onRowDragLeave(r)),onDragend:t[12]||(t[12]=r=>l.onRowDragEnd(r)),onDrop:t[13]||(t[13]=r=>l.onRowDrop(r)),role:"row"},[(a(!0),w(p,null,C(o.columns,(r,S)=>(a(),w(p,{key:l.columnProp(r,"columnKey")||l.columnProp(r,"field")||S},[l.shouldRenderBodyCell(o.value,r,l.getRowIndex(i))?(a(),c(y,{key:0,rowData:n,column:r,rowIndex:l.getRowIndex(i),index:S,selected:l.isSelected(n),rowTogglerIcon:l.columnProp(r,"expander")?l.rowTogglerIcon(n):null,frozenRow:o.frozenRow,rowspan:o.rowGroupMode==="rowspan"?l.calculateRowGroupSize(o.value,r,l.getRowIndex(i)):null,editMode:o.editMode,editing:o.editMode==="row"&&l.isRowEditing(n),responsiveLayout:o.responsiveLayout,onRadioChange:t[0]||(t[0]=d=>l.onRadioChange(d)),onCheckboxChange:t[1]||(t[1]=d=>l.onCheckboxChange(d)),onRowToggle:t[2]||(t[2]=d=>l.onRowToggle(d)),onCellEditInit:t[3]||(t[3]=d=>l.onCellEditInit(d)),onCellEditComplete:t[4]||(t[4]=d=>l.onCellEditComplete(d)),onCellEditCancel:t[5]||(t[5]=d=>l.onCellEditCancel(d)),onRowEditInit:t[6]||(t[6]=d=>l.onRowEditInit(d)),onRowEditSave:t[7]||(t[7]=d=>l.onRowEditSave(d)),onRowEditCancel:t[8]||(t[8]=d=>l.onRowEditCancel(d)),editingMeta:o.editingMeta,onEditingMetaChange:l.onEditingMetaChange,virtualScrollerContentProps:o.virtualScrollerContentProps},null,8,["rowData","column","rowIndex","index","selected","rowTogglerIcon","frozenRow","rowspan","editMode","editing","responsiveLayout","editingMeta","onEditingMetaChange","virtualScrollerContentProps"])):h("",!0)],64))),128))],46,M)):h("",!0),o.templates.expansion&&o.expandedRows&&l.isRowExpanded(n)?(a(),w("tr",{class:"p-datatable-row-expansion",key:l.getRowKey(n,l.getRowIndex(i))+"_expansion",role:"row"},[f("td",{colspan:l.columnsLength},[(a(),c(R(o.templates.expansion),{data:n,index:l.getRowIndex(i)},null,8,["data","index"]))],8,B)])):h("",!0),o.templates.groupfooter&&o.rowGroupMode==="subheader"&&l.shouldRenderRowGroupFooter(o.value,n,l.getRowIndex(i))?(a(),w("tr",{class:"p-rowgroup-footer",key:l.getRowKey(n,l.getRowIndex(i))+"_subfooter",role:"row"},[(a(),c(R(o.templates.groupfooter),{data:n,index:l.getRowIndex(i)},null,8,["data","index"]))])):h("",!0)],64))),128))],4)}var j=I(E,[["render",D]]);export{j as default};
