var C=Object.defineProperty;var u=Object.getOwnPropertySymbols;var x=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var g=(e,t,n)=>t in e?C(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,r=(e,t)=>{for(var n in t||(t={}))x.call(t,n)&&g(e,n,t[n]);if(u)for(var n of u(t))N.call(t,n)&&g(e,n,t[n]);return e};import{X as k,c as d,f as h,C as K,p as a,l as f,n as p,G as E,F as y,q as D,t as T,P as _,m as S,r as M,E as w,o}from"./main.9e765f7d.js";import{R as v}from"./ripple.esm.1fe20658.js";import{_ as V}from"./plugin-vue_export-helper.21dcd24c.js";const L={name:"TreeNode",emits:["node-toggle","node-click","checkbox-change"],props:{node:{type:null,default:null},expandedKeys:{type:null,default:null},selectionKeys:{type:null,default:null},selectionMode:{type:String,default:null},templates:{type:null,default:null}},nodeTouched:!1,methods:{toggle(){this.$emit("node-toggle",this.node)},label(e){return typeof e.label=="function"?e.label():e.label},onChildNodeToggle(e){this.$emit("node-toggle",e)},onClick(e){k.hasClass(e.target,"p-tree-toggler")||k.hasClass(e.target.parentElement,"p-tree-toggler")||(this.isCheckboxSelectionMode()?this.toggleCheckbox():this.$emit("node-click",{originalEvent:e,nodeTouched:this.nodeTouched,node:this.node}),this.nodeTouched=!1)},onChildNodeClick(e){this.$emit("node-click",e)},onTouchEnd(){this.nodeTouched=!0},onKeyDown(e){const t=e.target.parentElement;switch(e.which){case 40:var n=t.children[1];if(n)this.focusNode(n.children[0]);else{const s=t.nextElementSibling;if(s)this.focusNode(s);else{let c=this.findNextSiblingOfAncestor(t);c&&this.focusNode(c)}}e.preventDefault();break;case 38:if(t.previousElementSibling)this.focusNode(this.findLastVisibleDescendant(t.previousElementSibling));else{let s=this.getParentNodeElement(t);s&&this.focusNode(s)}e.preventDefault();break;case 37:case 39:this.$emit("node-toggle",this.node),e.preventDefault();break;case 13:this.onClick(e),e.preventDefault();break}},toggleCheckbox(){let e=this.selectionKeys?r({},this.selectionKeys):{};const t=!this.checked;this.propagateDown(this.node,t,e),this.$emit("checkbox-change",{node:this.node,check:t,selectionKeys:e})},propagateDown(e,t,n){if(t?n[e.key]={checked:!0,partialChecked:!1}:delete n[e.key],e.children&&e.children.length)for(let s of e.children)this.propagateDown(s,t,n)},propagateUp(e){let t=e.check,n=r({},e.selectionKeys),s=0,c=!1;for(let l of this.node.children)n[l.key]&&n[l.key].checked?s++:n[l.key]&&n[l.key].partialChecked&&(c=!0);t&&s===this.node.children.length?n[this.node.key]={checked:!0,partialChecked:!1}:(t||delete n[this.node.key],c||s>0&&s!==this.node.children.length?n[this.node.key]={checked:!1,partialChecked:!0}:delete n[this.node.key]),this.$emit("checkbox-change",{node:e.node,check:e.check,selectionKeys:n})},onChildCheckboxChange(e){this.$emit("checkbox-change",e)},findNextSiblingOfAncestor(e){let t=this.getParentNodeElement(e);return t?t.nextElementSibling?t.nextElementSibling:this.findNextSiblingOfAncestor(t):null},findLastVisibleDescendant(e){const t=e.children[1];if(t){const n=t.children[t.children.length-1];return this.findLastVisibleDescendant(n)}else return e},getParentNodeElement(e){const t=e.parentElement.parentElement;return k.hasClass(t,"p-treenode")?t:null},focusNode(e){e.children[0].focus()},isCheckboxSelectionMode(){return this.selectionMode==="checkbox"}},computed:{hasChildren(){return this.node.children&&this.node.children.length>0},expanded(){return this.expandedKeys&&this.expandedKeys[this.node.key]===!0},leaf(){return this.node.leaf===!1?!1:!(this.node.children&&this.node.children.length)},selectable(){return this.node.selectable===!1?!1:this.selectionMode!=null},selected(){return this.selectionMode&&this.selectionKeys?this.selectionKeys[this.node.key]===!0:!1},containerClass(){return["p-treenode",{"p-treenode-leaf":this.leaf}]},contentClass(){return["p-treenode-content",this.node.styleClass,{"p-treenode-selectable":this.selectable,"p-highlight":this.checkboxMode?this.checked:this.selected}]},icon(){return["p-treenode-icon",this.node.icon]},toggleIcon(){return["p-tree-toggler-icon pi pi-fw",{"pi-chevron-down":this.expanded,"pi-chevron-right":!this.expanded}]},checkboxClass(){return["p-checkbox-box",{"p-highlight":this.checked,"p-indeterminate":this.partialChecked}]},checkboxIcon(){return["p-checkbox-icon",{"pi pi-check":this.checked,"pi pi-minus":this.partialChecked}]},checkboxMode(){return this.selectionMode==="checkbox"&&this.node.selectable!==!1},checked(){return this.selectionKeys?this.selectionKeys[this.node.key]&&this.selectionKeys[this.node.key].checked:!1},partialChecked(){return this.selectionKeys?this.selectionKeys[this.node.key]&&this.selectionKeys[this.node.key].partialChecked:!1}},directives:{ripple:v}},P=["aria-expanded"],A={key:0,class:"p-checkbox p-component"},B=["aria-checked"],I={class:"p-treenode-label"},O={key:0,class:"p-treenode-children",role:"group"};function z(e,t,n,s,c,l){const m=M("TreeNode",!0),b=w("ripple");return o(),d("li",{class:a(l.containerClass)},[h("div",{class:a(l.contentClass),tabindex:"0",role:"treeitem","aria-expanded":l.expanded,onClick:t[1]||(t[1]=(...i)=>l.onClick&&l.onClick(...i)),onKeydown:t[2]||(t[2]=(...i)=>l.onKeyDown&&l.onKeyDown(...i)),onTouchend:t[3]||(t[3]=(...i)=>l.onTouchEnd&&l.onTouchEnd(...i)),style:_(n.node.style)},[K((o(),d("button",{type:"button",class:"p-tree-toggler p-link",onClick:t[0]||(t[0]=(...i)=>l.toggle&&l.toggle(...i)),tabindex:"-1"},[h("span",{class:a(l.toggleIcon)},null,2)])),[[b]]),l.checkboxMode?(o(),d("div",A,[h("div",{class:a(l.checkboxClass),role:"checkbox","aria-checked":l.checked},[h("span",{class:a(l.checkboxIcon)},null,2)],10,B)])):f("",!0),h("span",{class:a(l.icon)},null,2),h("span",I,[n.templates[n.node.type]||n.templates.default?(o(),p(E(n.templates[n.node.type]||n.templates.default),{key:0,node:n.node},null,8,["node"])):(o(),d(y,{key:1},[D(T(l.label(n.node)),1)],64))])],46,P),l.hasChildren&&l.expanded?(o(),d("ul",O,[(o(!0),d(y,null,S(n.node.children,i=>(o(),p(m,{key:i.key,node:i,templates:n.templates,expandedKeys:n.expandedKeys,onNodeToggle:l.onChildNodeToggle,onNodeClick:l.onChildNodeClick,selectionMode:n.selectionMode,selectionKeys:n.selectionKeys,onCheckboxChange:l.propagateUp},null,8,["node","templates","expandedKeys","onNodeToggle","onNodeClick","selectionMode","selectionKeys","onCheckboxChange"]))),128))])):f("",!0)],2)}var G=V(L,[["render",z]]);export{G as default};
