var O=Object.defineProperty;var v=Object.getOwnPropertySymbols;var x=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var L=(e,t,l)=>t in e?O(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,f=(e,t)=>{for(var l in t||(t={}))x.call(t,l)&&L(e,l,t[l]);if(v)for(var l of v(t))H.call(t,l)&&L(e,l,t[l]);return e};import{O as C,X as u,a4 as K,c as d,f as c,p as T,l as h,k as b,n as _,Q as N,w as P,F as S,m as w,P as E,r as F,o as a,G as D}from"./main.9e765f7d.js";import W from"./TreeTableRow.9bb45a40.js";import B from"./HeaderCell.ef158835.js";import j from"./FooterCell.e4a5deaa.js";import{s as G}from"./paginator.esm.d428c35b.js";import{_ as I}from"./plugin-vue_export-helper.21dcd24c.js";import"./BodyCell.b9df52a5.js";import"./ripple.esm.1fe20658.js";import"./dropdown.esm.5bafa883.js";import"./overlayeventbus.esm.ef5cc0da.js";import"./virtualscroller.esm.76cd2139.js";import"./inputnumber.esm.2f528c5c.js";import"./inputtext.esm.dc0f2264.js";import"./button.esm.a5ac1061.js";const V={name:"TreeTable",emits:["node-expand","node-collapse","update:expandedKeys","update:selectionKeys","node-select","node-unselect","update:first","update:rows","page","update:sortField","update:sortOrder","update:multiSortMeta","sort","filter","column-resize-end"],props:{value:{type:null,default:null},expandedKeys:{type:null,default:null},selectionKeys:{type:null,default:null},selectionMode:{type:String,default:null},metaKeySelection:{type:Boolean,default:!0},rows:{type:Number,default:0},first:{type:Number,default:0},totalRecords:{type:Number,default:0},paginator:{type:Boolean,default:!1},paginatorPosition:{type:String,default:"bottom"},alwaysShowPaginator:{type:Boolean,default:!0},paginatorTemplate:{type:String,default:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown"},pageLinkSize:{type:Number,default:5},rowsPerPageOptions:{type:Array,default:null},currentPageReportTemplate:{type:String,default:"({currentPage} of {totalPages})"},lazy:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},loadingIcon:{type:String,default:"pi pi-spinner"},rowHover:{type:Boolean,default:!1},autoLayout:{type:Boolean,default:!1},sortField:{type:[String,Function],default:null},sortOrder:{type:Number,default:null},defaultSortOrder:{type:Number,default:1},multiSortMeta:{type:Array,default:null},sortMode:{type:String,default:"single"},removableSort:{type:Boolean,default:!1},filters:{type:Object,default:null},filterMode:{type:String,default:"lenient"},filterLocale:{type:String,default:void 0},resizableColumns:{type:Boolean,default:!1},columnResizeMode:{type:String,default:"fit"},indentation:{type:Number,default:1},showGridlines:{type:Boolean,default:!1},scrollable:{type:Boolean,default:!1},scrollDirection:{type:String,default:"vertical"},scrollHeight:{type:String,default:null},responsiveLayout:{type:String,default:null}},documentColumnResizeListener:null,documentColumnResizeEndListener:null,lastResizeHelperX:null,resizeColumnElement:null,data(){return{d_expandedKeys:this.expandedKeys||{},d_first:this.first,d_rows:this.rows,d_sortField:this.sortField,d_sortOrder:this.sortOrder,d_multiSortMeta:this.multiSortMeta?[...this.multiSortMeta]:[]}},watch:{expandedKeys(e){this.d_expandedKeys=e},first(e){this.d_first=e},rows(e){this.d_rows=e},sortField(e){this.d_sortField=e},sortOrder(e){this.d_sortOrder=e},multiSortMeta(e){this.d_multiSortMeta=e}},mounted(){this.scrollable&&this.scrollDirection!=="vertical"&&this.updateScrollWidth()},updated(){this.scrollable&&this.scrollDirection!=="vertical"&&this.updateScrollWidth()},methods:{columnProp(e,t){return C.getVNodeProp(e,t)},onNodeToggle(e){const t=e.key;this.d_expandedKeys[t]?(delete this.d_expandedKeys[t],this.$emit("node-collapse",e)):(this.d_expandedKeys[t]=!0,this.$emit("node-expand",e)),this.d_expandedKeys=f({},this.d_expandedKeys),this.$emit("update:expandedKeys",this.d_expandedKeys)},onNodeClick(e){if(this.rowSelectionMode&&e.node.selectable!==!1){const l=(e.nodeTouched?!1:this.metaKeySelection)?this.handleSelectionWithMetaKey(e):this.handleSelectionWithoutMetaKey(e);this.$emit("update:selectionKeys",l)}},handleSelectionWithMetaKey(e){const t=e.originalEvent,l=e.node,r=t.metaKey||t.ctrlKey,i=this.isNodeSelected(l);let s;return i&&r?(this.isSingleSelectionMode()?s={}:(s=f({},this.selectionKeys),delete s[l.key]),this.$emit("node-unselect",l)):(this.isSingleSelectionMode()?s={}:this.isMultipleSelectionMode()&&(s=r?this.selectionKeys?f({},this.selectionKeys):{}:{}),s[l.key]=!0,this.$emit("node-select",l)),s},handleSelectionWithoutMetaKey(e){const t=e.node,l=this.isNodeSelected(t);let r;return this.isSingleSelectionMode()?l?(r={},this.$emit("node-unselect",t)):(r={},r[t.key]=!0,this.$emit("node-select",t)):l?(r=f({},this.selectionKeys),delete r[t.key],this.$emit("node-unselect",t)):(r=this.selectionKeys?f({},this.selectionKeys):{},r[t.key]=!0,this.$emit("node-select",t)),r},onCheckboxChange(e){this.$emit("update:selectionKeys",e.selectionKeys),e.check?this.$emit("node-select",e.node):this.$emit("node-unselect",e.node)},isSingleSelectionMode(){return this.selectionMode==="single"},isMultipleSelectionMode(){return this.selectionMode==="multiple"},onPage(e){this.d_first=e.first,this.d_rows=e.rows;let t=this.createLazyLoadEvent(e);t.pageCount=e.pageCount,t.page=e.page,this.$emit("update:first",this.d_first),this.$emit("update:rows",this.d_rows),this.$emit("page",t)},resetPage(){this.d_first=0,this.$emit("update:first",this.d_first)},getFilterColumnHeaderClass(e){return["p-filter-column",this.columnProp(e,"filterHeaderClass"),{"p-frozen-column":this.columnProp(e,"frozen")}]},onColumnHeaderClick(e){let t=e.originalEvent,l=e.column;if(this.columnProp(l,"sortable")){const r=t.target,i=this.columnProp(l,"sortField")||this.columnProp(l,"field");(u.hasClass(r,"p-sortable-column")||u.hasClass(r,"p-column-title")||u.hasClass(r,"p-sortable-column-icon")||u.hasClass(r.parentElement,"p-sortable-column-icon"))&&(u.clearSelection(),this.sortMode==="single"?(this.d_sortField===i?this.removableSort&&this.d_sortOrder*-1===this.defaultSortOrder?(this.d_sortOrder=null,this.d_sortField=null):this.d_sortOrder=this.d_sortOrder*-1:(this.d_sortOrder=this.defaultSortOrder,this.d_sortField=i),this.$emit("update:sortField",this.d_sortField),this.$emit("update:sortOrder",this.d_sortOrder),this.resetPage()):this.sortMode==="multiple"&&(t.metaKey||t.ctrlKey||(this.d_multiSortMeta=this.d_multiSortMeta.filter(n=>n.field===i)),this.addMultiSortField(i),this.$emit("update:multiSortMeta",this.d_multiSortMeta)),this.$emit("sort",this.createLazyLoadEvent(t)))}},addMultiSortField(e){let t=this.d_multiSortMeta.findIndex(l=>l.field===e);t>=0?this.removableSort&&this.d_multiSortMeta[t].order*-1===this.defaultSortOrder?this.d_multiSortMeta.splice(t,1):this.d_multiSortMeta[t]={field:e,order:this.d_multiSortMeta[t].order*-1}:this.d_multiSortMeta.push({field:e,order:this.defaultSortOrder}),this.d_multiSortMeta=[...this.d_multiSortMeta]},sortSingle(e){return this.sortNodesSingle(e)},sortNodesSingle(e){let t=[...e];return t.sort((l,r)=>{const i=C.resolveFieldData(l.data,this.d_sortField),s=C.resolveFieldData(r.data,this.d_sortField);let n=null;return i==null&&s!=null?n=-1:i!=null&&s==null?n=1:i==null&&s==null?n=0:typeof i=="string"&&typeof s=="string"?n=i.localeCompare(s,void 0,{numeric:!0}):n=i<s?-1:i>s?1:0,this.d_sortOrder*n}),t},sortMultiple(e){return this.sortNodesMultiple(e)},sortNodesMultiple(e){let t=[...e];return t.sort((l,r)=>this.multisortField(l,r,0)),t},multisortField(e,t,l){const r=C.resolveFieldData(e.data,this.d_multiSortMeta[l].field),i=C.resolveFieldData(t.data,this.d_multiSortMeta[l].field);let s=null;if(r==null&&i!=null)s=-1;else if(r!=null&&i==null)s=1;else if(r==null&&i==null)s=0;else{if(r===i)return this.d_multiSortMeta.length-1>l?this.multisortField(e,t,l+1):0;if((typeof r=="string"||r instanceof String)&&(typeof i=="string"||i instanceof String))return this.d_multiSortMeta[l].order*r.localeCompare(i,void 0,{numeric:!0});s=r<i?-1:1}return this.d_multiSortMeta[l].order*s},filter(e){let t=[];const l=this.filterMode==="strict";for(let i of e){let s=f({},i),n=!0,p=!1;for(let M=0;M<this.columns.length;M++){let o=this.columns[M],y=this.columnProp(o,"field");if(Object.prototype.hasOwnProperty.call(this.filters,this.columnProp(o,"field"))){let g=this.columnProp(o,"filterMatchMode")||"startsWith",k=this.filters[this.columnProp(o,"field")],R=K.filters[g],m={filterField:y,filterValue:k,filterConstraint:R,strict:l};if((l&&!(this.findFilteredNodes(s,m)||this.isFilterMatched(s,m))||!l&&!(this.isFilterMatched(s,m)||this.findFilteredNodes(s,m)))&&(n=!1),!n)break}if(this.hasGlobalFilter()&&!p){let g=f({},s),k=this.filters.global,R=K.filters.contains,m={filterField:y,filterValue:k,filterConstraint:R,strict:l};(l&&(this.findFilteredNodes(g,m)||this.isFilterMatched(g,m))||!l&&(this.isFilterMatched(g,m)||this.findFilteredNodes(g,m)))&&(p=!0,s=g)}}let z=n;this.hasGlobalFilter()&&(z=n&&p),z&&t.push(s)}let r=this.createLazyLoadEvent(event);return r.filteredValue=t,this.$emit("filter",r),t},findFilteredNodes(e,t){if(e){let l=!1;if(e.children){let r=[...e.children];e.children=[];for(let i of r){let s=f({},i);this.isFilterMatched(s,t)&&(l=!0,e.children.push(s))}}if(l)return!0}},isFilterMatched(e,{filterField:t,filterValue:l,filterConstraint:r,strict:i}){let s=!1,n=C.resolveFieldData(e.data,t);return r(n,l,this.filterLocale)&&(s=!0),(!s||i&&!this.isNodeLeaf(e))&&(s=this.findFilteredNodes(e,{filterField:t,filterValue:l,filterConstraint:r,strict:i})||s),s},isNodeSelected(e){return this.selectionMode&&this.selectionKeys?this.selectionKeys[e.key]===!0:!1},isNodeLeaf(e){return e.leaf===!1?!1:!(e.children&&e.children.length)},createLazyLoadEvent(e){let t;return this.hasFilters()&&(t={},this.columns.forEach(l=>{this.columnProp(l,"field")&&(t[l.props.field]=this.columnProp(l,"filterMatchMode"))})),{originalEvent:e,first:this.d_first,rows:this.d_rows,sortField:this.d_sortField,sortOrder:this.d_sortOrder,multiSortMeta:this.d_multiSortMeta,filters:this.filters,filterMatchModes:t}},onColumnResizeStart(e){let t=u.getOffset(this.$el).left;this.resizeColumnElement=e.target.parentElement,this.columnResizing=!0,this.lastResizeHelperX=e.pageX-t+this.$el.scrollLeft,this.bindColumnResizeEvents()},onColumnResize(e){let t=u.getOffset(this.$el).left;u.addClass(this.$el,"p-unselectable-text"),this.$refs.resizeHelper.style.height=this.$el.offsetHeight+"px",this.$refs.resizeHelper.style.top=0+"px",this.$refs.resizeHelper.style.left=e.pageX-t+this.$el.scrollLeft+"px",this.$refs.resizeHelper.style.display="block"},onColumnResizeEnd(){let e=this.$refs.resizeHelper.offsetLeft-this.lastResizeHelperX,t=this.resizeColumnElement.offsetWidth,l=t+e,r=this.resizeColumnElement.style.minWidth||15;if(t+e>parseInt(r,10)){if(this.columnResizeMode==="fit"){let i=this.resizeColumnElement.nextElementSibling,s=i.offsetWidth-e;l>15&&s>15&&(this.scrollable?this.resizeTableCells(l,s):(this.resizeColumnElement.style.width=l+"px",i&&(i.style.width=s+"px")))}else this.columnResizeMode==="expand"&&(this.$refs.table.style.width=this.$refs.table.offsetWidth+e+"px",this.scrollable?this.resizeTableCells(l):this.resizeColumnElement.style.width=l+"px");this.$emit("column-resize-end",{element:this.resizeColumnElement,delta:e})}this.$refs.resizeHelper.style.display="none",this.resizeColumn=null,u.removeClass(this.$el,"p-unselectable-text"),this.unbindColumnResizeEvents()},resizeTableCells(e,t){let l=u.index(this.resizeColumnElement),r=this.$refs.table.children;for(let i of r)for(let s of i.children){let n=s.children[l];if(n.style.flex="0 0 "+e+"px",this.columnResizeMode==="fit"){let p=n.nextElementSibling;p&&(p.style.flex="0 0 "+t+"px")}}},bindColumnResizeEvents(){this.documentColumnResizeListener||(this.documentColumnResizeListener=document.addEventListener("mousemove",()=>{this.columnResizing&&this.onColumnResize(event)})),this.documentColumnResizeEndListener||(this.documentColumnResizeEndListener=document.addEventListener("mouseup",()=>{this.columnResizing&&(this.columnResizing=!1,this.onColumnResizeEnd())}))},unbindColumnResizeEvents(){this.documentColumnResizeListener&&(document.removeEventListener("document",this.documentColumnResizeListener),this.documentColumnResizeListener=null),this.documentColumnResizeEndListener&&(document.removeEventListener("document",this.documentColumnResizeEndListener),this.documentColumnResizeEndListener=null)},onColumnKeyDown(e,t){e.which===13&&e.currentTarget.nodeName==="TH"&&u.hasClass(e.currentTarget,"p-sortable-column")&&this.onColumnHeaderClick(e,t)},hasColumnFilter(){if(this.columns){for(let e of this.columns)if(e.children&&e.children.filter)return!0}return!1},hasFilters(){return this.filters&&Object.keys(this.filters).length>0&&this.filters.constructor===Object},hasGlobalFilter(){return this.filters&&Object.prototype.hasOwnProperty.call(this.filters,"global")},updateScrollWidth(){this.$refs.table.style.width=this.$refs.table.scrollWidth+"px"}},computed:{containerClass(){return["p-treetable p-component",{"p-treetable-hoverable-rows":this.rowHover||this.rowSelectionMode,"p-treetable-auto-layout":this.autoLayout,"p-treetable-resizable":this.resizableColumns,"p-treetable-resizable-fit":this.resizableColumns&&this.columnResizeMode==="fit","p-treetable-gridlines":this.showGridlines,"p-treetable-scrollable":this.scrollable,"p-treetable-scrollable-vertical":this.scrollable&&this.scrollDirection==="vertical","p-treetable-scrollable-horizontal":this.scrollable&&this.scrollDirection==="horizontal","p-treetable-scrollable-both":this.scrollable&&this.scrollDirection==="both","p-treetable-flex-scrollable":this.scrollable&&this.scrollHeight==="flex","p-treetable-responsive-scroll":this.responsiveLayout==="scroll"}]},columns(){let e=[];return this.$slots.default().forEach(l=>{l.children&&l.children instanceof Array?e=[...e,...l.children]:l.type.name==="Column"&&e.push(l)}),e},processedData(){if(this.lazy)return this.value;if(this.value&&this.value.length){let e=this.value;return this.sorted&&(this.sortMode==="single"?e=this.sortSingle(e):this.sortMode==="multiple"&&(e=this.sortMultiple(e))),this.hasFilters()&&(e=this.filter(e)),e}else return null},dataToRender(){const e=this.processedData;if(this.paginator){const t=this.lazy?0:this.d_first;return e.slice(t,t+this.d_rows)}else return e},empty(){const e=this.processedData;return!e||e.length===0},sorted(){return this.d_sortField||this.d_multiSortMeta&&this.d_multiSortMeta.length>0},hasFooter(){let e=!1;for(let t of this.columns)if(this.columnProp(t,"footer")||t.children&&t.children.footer){e=!0;break}return e},paginatorTop(){return this.paginator&&(this.paginatorPosition!=="bottom"||this.paginatorPosition==="both")},paginatorBottom(){return this.paginator&&(this.paginatorPosition!=="top"||this.paginatorPosition==="both")},singleSelectionMode(){return this.selectionMode&&this.selectionMode==="single"},multipleSelectionMode(){return this.selectionMode&&this.selectionMode==="multiple"},rowSelectionMode(){return this.singleSelectionMode||this.multipleSelectionMode},totalRecordsLength(){if(this.lazy)return this.totalRecords;{const e=this.processedData;return e?e.length:0}},loadingIconClass(){return["p-treetable-loading-icon pi-spin",this.loadingIcon]}},components:{TTRow:W,TTPaginator:G,TTHeaderCell:B,TTFooterCell:j}},X={key:0,class:"p-treetable-loading"},A={class:"p-treetable-loading-overlay p-component-overlay"},Q={key:1,class:"p-treetable-header"},U={ref:"table"},q={class:"p-treetable-thead"},J={key:0},Y={class:"p-treetable-tbody"},Z={key:1,class:"p-treetable-emptymessage"},$=["colspan"],ee={key:0,class:"p-treetable-tfoot"},te={key:4,class:"p-treetable-footer"},le={ref:"resizeHelper",class:"p-column-resizer-helper p-highlight",style:{display:"none"}};function se(e,t,l,r,i,s){const n=F("TTPaginator"),p=F("TTHeaderCell"),z=F("TTRow"),M=F("TTFooterCell");return a(),d("div",{class:T(s.containerClass),"data-scrollselectors":".p-treetable-scrollable-body"},[l.loading?(a(),d("div",X,[c("div",A,[c("i",{class:T(s.loadingIconClass)},null,2)])])):h("",!0),e.$slots.header?(a(),d("div",Q,[b(e.$slots,"header")])):h("",!0),s.paginatorTop?(a(),_(n,{key:2,rows:i.d_rows,first:i.d_first,totalRecords:s.totalRecordsLength,pageLinkSize:l.pageLinkSize,template:l.paginatorTemplate,rowsPerPageOptions:l.rowsPerPageOptions,currentPageReportTemplate:l.currentPageReportTemplate,class:"p-paginator-top",onPage:t[0]||(t[0]=o=>s.onPage(o)),alwaysShow:l.alwaysShowPaginator},N({_:2},[e.$slots.paginatorstart?{name:"start",fn:P(()=>[b(e.$slots,"paginatorstart")])}:void 0,e.$slots.paginatorend?{name:"end",fn:P(()=>[b(e.$slots,"paginatorend")])}:void 0]),1032,["rows","first","totalRecords","pageLinkSize","template","rowsPerPageOptions","currentPageReportTemplate","alwaysShow"])):h("",!0),c("div",{class:"p-treetable-wrapper",style:E({maxHeight:l.scrollHeight})},[c("table",U,[c("thead",q,[c("tr",null,[(a(!0),d(S,null,w(s.columns,(o,y)=>(a(),d(S,{key:s.columnProp(o,"columnKey")||s.columnProp(o,"field")||y},[s.columnProp(o,"hidden")?h("",!0):(a(),_(p,{key:0,column:o,resizableColumns:l.resizableColumns,sortField:i.d_sortField,sortOrder:i.d_sortOrder,multiSortMeta:i.d_multiSortMeta,sortMode:l.sortMode,onColumnClick:s.onColumnHeaderClick,onColumnResizestart:s.onColumnResizeStart},null,8,["column","resizableColumns","sortField","sortOrder","multiSortMeta","sortMode","onColumnClick","onColumnResizestart"]))],64))),128))]),s.hasColumnFilter()?(a(),d("tr",J,[(a(!0),d(S,null,w(s.columns,(o,y)=>(a(),d(S,{key:s.columnProp(o,"columnKey")||s.columnProp(o,"field")||y},[s.columnProp(o,"hidden")?h("",!0):(a(),d("th",{key:0,class:T(s.getFilterColumnHeaderClass(o)),style:E([s.columnProp(o,"style"),s.columnProp(o,"filterHeaderStyle")])},[o.children&&o.children.filter?(a(),_(D(o.children.filter),{key:0,column:o},null,8,["column"])):h("",!0)],6))],64))),128))])):h("",!0)]),c("tbody",Y,[s.empty?(a(),d("tr",Z,[c("td",{colspan:s.columns.length},[b(e.$slots,"empty")],8,$)])):(a(!0),d(S,{key:0},w(s.dataToRender,o=>(a(),_(z,{key:o.key,columns:s.columns,node:o,level:0,expandedKeys:i.d_expandedKeys,onNodeToggle:s.onNodeToggle,indentation:l.indentation,selectionMode:l.selectionMode,selectionKeys:l.selectionKeys,onNodeClick:s.onNodeClick,onCheckboxChange:s.onCheckboxChange},null,8,["columns","node","expandedKeys","onNodeToggle","indentation","selectionMode","selectionKeys","onNodeClick","onCheckboxChange"]))),128))]),s.hasFooter?(a(),d("tfoot",ee,[c("tr",null,[(a(!0),d(S,null,w(s.columns,(o,y)=>(a(),d(S,{key:s.columnProp(o,"columnKey")||s.columnProp(o,"field")||y},[s.columnProp(o,"hidden")?h("",!0):(a(),_(M,{key:0,column:o},null,8,["column"]))],64))),128))])])):h("",!0)],512)],4),s.paginatorBottom?(a(),_(n,{key:3,rows:i.d_rows,first:i.d_first,totalRecords:s.totalRecordsLength,pageLinkSize:l.pageLinkSize,template:l.paginatorTemplate,rowsPerPageOptions:l.rowsPerPageOptions,currentPageReportTemplate:l.currentPageReportTemplate,class:"p-paginator-bottom",onPage:t[1]||(t[1]=o=>s.onPage(o)),alwaysShow:l.alwaysShowPaginator},N({_:2},[e.$slots.paginatorstart?{name:"start",fn:P(()=>[b(e.$slots,"paginatorstart")])}:void 0,e.$slots.paginatorend?{name:"end",fn:P(()=>[b(e.$slots,"paginatorend")])}:void 0]),1032,["rows","first","totalRecords","pageLinkSize","template","rowsPerPageOptions","currentPageReportTemplate","alwaysShow"])):h("",!0),e.$slots.footer?(a(),d("div",te,[b(e.$slots,"footer")])):h("",!0),c("div",le,null,512)],2)}var Se=I(V,[["render",se]]);export{Se as default};
