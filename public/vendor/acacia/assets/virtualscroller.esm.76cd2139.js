var x=Object.defineProperty,N=Object.defineProperties;var O=Object.getOwnPropertyDescriptors;var k=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var H=(t,s,e)=>s in t?x(t,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[s]=e,b=(t,s)=>{for(var e in s||(s={}))M.call(s,e)&&H(t,e,s[e]);if(k)for(var e of k(s))F.call(s,e)&&H(t,e,s[e]);return t},v=(t,s)=>N(t,O(s));import{o as y,c as z,k as T,f as D,F as P,m as R,p as V,P as L,l as A}from"./main.9e765f7d.js";var E={name:"VirtualScroller",emits:["update:numToleratedItems","scroll","scroll-index-change","lazy-load"],props:{id:{type:String,default:null},style:null,class:null,items:{type:Array,default:null},itemSize:{type:[Number,Array],default:0},scrollHeight:null,scrollWidth:null,orientation:{type:String,default:"vertical"},numToleratedItems:{type:Number,default:null},delay:{type:Number,default:0},lazy:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},loaderDisabled:{type:Boolean,default:!1},columns:{type:Array,default:null},loading:{type:Boolean,default:!1},showSpacer:{type:Boolean,default:!0},showLoader:{type:Boolean,default:!1}},data(){return{first:this.isBoth()?{rows:0,cols:0}:0,last:this.isBoth()?{rows:0,cols:0}:0,numItemsInViewport:this.isBoth()?{rows:0,cols:0}:0,lastScrollPos:this.isBoth()?{top:0,left:0}:0,d_numToleratedItems:this.numToleratedItems,d_loading:this.loading,loaderArr:[],spacerStyle:{},contentStyle:{}}},element:null,content:null,lastScrollPos:null,scrollTimeout:null,mounted(){this.init(),this.lastScrollPos=this.isBoth()?{top:0,left:0}:0},watch:{numToleratedItems(t){this.d_numToleratedItems=t},loading(t){this.d_loading=t},items(t,s){(!s||s.length!==(t||[]).length)&&this.init()},orientation(){this.lastScrollPos=this.isBoth()?{top:0,left:0}:0}},methods:{init(){this.setSize(),this.calculateOptions(),this.setSpacerSize()},isVertical(){return this.orientation==="vertical"},isHorizontal(){return this.orientation==="horizontal"},isBoth(){return this.orientation==="both"},scrollTo(t){this.element&&this.element.scrollTo(t)},scrollToIndex(t,s="auto"){const e=this.isBoth(),n=this.isHorizontal(),i=this.first,{numToleratedItems:o}=this.calculateNumItems(),l=this.itemSize,r=this.getContentPosition(),m=(a=0,u)=>a<=u?0:a,p=(a,u,I)=>a*u+I,c=(a=0,u=0)=>this.scrollTo({left:a,top:u,behavior:s});if(e){const a={rows:m(t[0],o[0]),cols:m(t[1],o[1])};(a.rows!==i.rows||a.cols!==i.cols)&&(c(p(a.cols,l[1],r.left),p(a.rows,l[0],r.top)),this.first=a)}else{const a=m(t,o);a!==i&&(n?c(p(a,l,r.left),0):c(0,p(a,l,r.top)),this.first=a)}},scrollInView(t,s,e="auto"){if(s){const n=this.isBoth(),i=this.isHorizontal(),{first:o,viewport:l}=this.getRenderedRange(),r=(c=0,a=0)=>this.scrollTo({left:c,top:a,behavior:e}),m=s==="to-start",p=s==="to-end";if(m){if(n)l.first.rows-o.rows>t[0]?r(l.first.cols*this.itemSize[1],(l.first.rows-1)*this.itemSize[0]):l.first.cols-o.cols>t[1]&&r((l.first.cols-1)*this.itemSize[1],l.first.rows*this.itemSize[0]);else if(l.first-o>t){const c=(l.first-1)*this.itemSize;i?r(c,0):r(0,c)}}else if(p){if(n)l.last.rows-o.rows<=t[0]+1?r(l.first.cols*this.itemSize[1],(l.first.rows+1)*this.itemSize[0]):l.last.cols-o.cols<=t[1]+1&&r((l.first.cols+1)*this.itemSize[1],l.first.rows*this.itemSize[0]);else if(l.last-o<=t+1){const c=(l.first+1)*this.itemSize;i?r(c,0):r(0,c)}}}else this.scrollToIndex(t,e)},getRenderedRange(){const t=(n,i)=>Math.floor(n/(i||n));let s=this.first,e=0;if(this.element){const n=this.isBoth(),i=this.isHorizontal(),o=this.element.scrollTop,l=this.element.scrollLeft;n?(s={rows:t(o,this.itemSize[0]),cols:t(l,this.itemSize[1])},e={rows:s.rows+this.numItemsInViewport.rows,cols:s.cols+this.numItemsInViewport.cols}):(s=t(i?l:o,this.itemSize),e=s+this.numItemsInViewport)}return{first:this.first,last:this.last,viewport:{first:s,last:e}}},calculateNumItems(){const t=this.isBoth(),s=this.isHorizontal(),e=this.itemSize,n=this.getContentPosition(),i=this.element?this.element.offsetWidth-n.left:0,o=this.element?this.element.offsetHeight-n.top:0,l=(c,a)=>Math.ceil(c/(a||c)),r=c=>Math.ceil(c/2),m=t?{rows:l(o,e[0]),cols:l(i,e[1])}:l(s?i:o,e),p=this.d_numToleratedItems||(t?[r(m.rows),r(m.cols)]:r(m));return{numItemsInViewport:m,numToleratedItems:p}},calculateOptions(){const t=this.isBoth(),s=this.first,{numItemsInViewport:e,numToleratedItems:n}=this.calculateNumItems(),i=(l,r,m,p)=>this.getLast(l+r+(l<m?2:3)*m,p),o=t?{rows:i(s.rows,e.rows,n[0]),cols:i(s.cols,e.cols,n[1],!0)}:i(s,e,n);this.last=o,this.numItemsInViewport=e,this.d_numToleratedItems=n,this.$emit("update:numToleratedItems",this.d_numToleratedItems),this.showLoader&&(this.loaderArr=t?Array.from({length:e.rows}).map(()=>Array.from({length:e.cols})):Array.from({length:e})),this.lazy&&this.$emit("lazy-load",{first:s,last:o})},getLast(t=0,s){return this.items?Math.min(s?(this.columns||this.items[0]).length:this.items.length,t):0},getContentPosition(){if(this.content){const t=getComputedStyle(this.content),s=parseInt(t.paddingLeft,10)+Math.max(parseInt(t.left,10),0),e=parseInt(t.paddingRight,10)+Math.max(parseInt(t.right,10),0),n=parseInt(t.paddingTop,10)+Math.max(parseInt(t.top,10),0),i=parseInt(t.paddingBottom,10)+Math.max(parseInt(t.bottom,10),0);return{left:s,right:e,top:n,bottom:i,x:s+e,y:n+i}}return{left:0,right:0,top:0,bottom:0,x:0,y:0}},setSize(){if(this.element){const t=this.isBoth(),s=this.isHorizontal(),e=this.element.parentElement,n=this.scrollWidth||`${this.element.offsetWidth||e.offsetWidth}px`,i=this.scrollHeight||`${this.element.offsetHeight||e.offsetHeight}px`,o=(l,r)=>this.element.style[l]=r;t||s?(o("height",i),o("width",n)):o("height",i)}},setSpacerSize(){const t=this.items;if(t){const s=this.isBoth(),e=this.isHorizontal(),n=this.getContentPosition(),i=(o,l,r,m=0)=>this.spacerStyle=v(b({},this.spacerStyle),{[`${o}`]:(l||[]).length*r+m+"px"});s?(i("height",t,this.itemSize[0],n.y),i("width",this.columns||t[1],this.itemSize[1],n.x)):e?i("width",this.columns||t,this.itemSize,n.x):i("height",t,this.itemSize,n.y)}},setContentPosition(t){if(this.content){const s=this.isBoth(),e=this.isHorizontal(),n=t?t.first:this.first,i=(l,r)=>l*r,o=(l=0,r=0)=>{this.contentStyle=v(b({},this.contentStyle),{transform:`translate3d(${l}px, ${r}px, 0)`})};if(s)o(i(n.cols,this.itemSize[1]),i(n.rows,this.itemSize[0]));else{const l=i(n,this.itemSize);e?o(l,0):o(0,l)}}},onScrollPositionChange(t){const s=t.target,e=this.isBoth(),n=this.isHorizontal(),i=this.getContentPosition(),o=(h,d)=>h?h>d?h-d:h:0,l=(h,d)=>Math.floor(h/(d||h)),r=(h,d,f,w,g,S)=>h<=g?g:S?f-w-g:d+g-1,m=(h,d,f,w,g,S,C)=>h<=S?0:Math.max(0,C?h<d?f:h-S:h>d?f:h-2*S),p=(h,d,f,w,g,S)=>{let C=d+w+2*g;return h>=g&&(C+=g+1),this.getLast(C,S)},c=o(s.scrollTop,i.top),a=o(s.scrollLeft,i.left);let u=0,I=this.last,B=!1;if(e){const h=this.lastScrollPos.top<=c,d=this.lastScrollPos.left<=a,f={rows:l(c,this.itemSize[0]),cols:l(a,this.itemSize[1])},w={rows:r(f.rows,this.first.rows,this.last.rows,this.numItemsInViewport.rows,this.d_numToleratedItems[0],h),cols:r(f.cols,this.first.cols,this.last.cols,this.numItemsInViewport.cols,this.d_numToleratedItems[1],d)};u={rows:m(f.rows,w.rows,this.first.rows,this.last.rows,this.numItemsInViewport.rows,this.d_numToleratedItems[0],h),cols:m(f.cols,w.cols,this.first.cols,this.last.cols,this.numItemsInViewport.cols,this.d_numToleratedItems[1],d)},I={rows:p(f.rows,u.rows,this.last.rows,this.numItemsInViewport.rows,this.d_numToleratedItems[0]),cols:p(f.cols,u.cols,this.last.cols,this.numItemsInViewport.cols,this.d_numToleratedItems[1],!0)},B=u.rows!==this.first.rows&&I.rows!==this.last.rows||u.cols!==this.first.cols&&I.cols!==this.last.cols,this.lastScrollPos={top:c,left:a}}else{const h=n?a:c,d=this.lastScrollPos<=h,f=l(h,this.itemSize),w=r(f,this.first,this.last,this.numItemsInViewport,this.d_numToleratedItems,d);u=m(f,w,this.first,this.last,this.numItemsInViewport,this.d_numToleratedItems,d),I=p(f,u,this.last,this.numItemsInViewport,this.d_numToleratedItems),B=u!==this.first&&I!==this.last,this.lastScrollPos=h}return{first:u,last:I,isRangeChanged:B}},onScrollChange(t){const{first:s,last:e,isRangeChanged:n}=this.onScrollPositionChange(t);if(n){const i={first:s,last:e};this.setContentPosition(i),this.first=s,this.last=e,this.$emit("scroll-index-change",i),this.lazy&&this.$emit("lazy-load",i)}},onScroll(t){if(this.$emit("scroll",t),this.delay){if(this.scrollTimeout&&clearTimeout(this.scrollTimeout),!this.d_loading&&this.showLoader){const{isRangeChanged:s}=this.onScrollPositionChange(t);s&&(this.d_loading=!0)}this.scrollTimeout=setTimeout(()=>{this.onScrollChange(t),this.d_loading&&this.showLoader&&!this.lazy&&(this.d_loading=!1)},this.delay)}else this.onScrollChange(t)},getOptions(t){const s=(this.items||[]).length,e=this.isBoth()?this.first.rows+t:this.first+t;return{index:e,count:s,first:e===0,last:e===s-1,even:e%2===0,odd:e%2!==0}},getLoaderOptions(t,s){let e=this.loaderArr.length;return b({index:t,count:e,first:t===0,last:t===e-1,even:t%2===0,odd:t%2!==0},s)},elementRef(t){this.element=t},contentRef(t){this.content=t}},computed:{containerClass(){return["p-virtualscroller",{"p-both-scroll":this.isBoth(),"p-horizontal-scroll":this.isHorizontal()},this.class]},contentClass(){return["p-virtualscroller-content",{"p-virtualscroller-loading":this.d_loading}]},loaderClass(){return["p-virtualscroller-loader",{"p-component-overlay":!this.$slots.loader}]},loadedItems(){const t=this.items;return t&&!this.d_loading?this.isBoth()?t.slice(this.first.rows,this.last.rows).map(s=>this.columns?s:s.slice(this.first.cols,this.last.cols)):this.isHorizontal()&&this.columns?t:t.slice(this.first,this.last):[]},loadedRows(){return this.d_loading?this.loaderDisabled?this.loaderArr:[]:this.loadedItems},loadedColumns(){if(this.columns){const t=this.isBoth(),s=this.isHorizontal();if(t||s)return this.d_loading&&this.loaderDisabled?t?this.loaderArr[0]:this.loaderArr:this.columns.slice(t?this.first.cols:this.first,t?this.last.cols:this.last)}return this.columns}}};const W={key:1,class:"p-virtualscroller-loading-icon pi pi-spinner pi-spin"};function _(t,s,e,n,i,o){return e.disabled?(y(),z(P,{key:1},[T(t.$slots,"default"),T(t.$slots,"content",{items:e.items,rows:e.items,columns:o.loadedColumns})],64)):(y(),z("div",{key:0,ref:o.elementRef,class:V(o.containerClass),tabindex:0,style:L(e.style),onScroll:s[0]||(s[0]=(...l)=>o.onScroll&&o.onScroll(...l))},[T(t.$slots,"content",{styleClass:o.contentClass,items:o.loadedItems,getItemOptions:o.getOptions,loading:i.d_loading,getLoaderOptions:o.getLoaderOptions,itemSize:e.itemSize,rows:o.loadedRows,columns:o.loadedColumns,contentRef:o.contentRef,spacerStyle:i.spacerStyle,contentStyle:i.contentStyle,vertical:o.isVertical(),horizontal:o.isHorizontal(),both:o.isBoth()},()=>[D("div",{ref:o.contentRef,class:V(o.contentClass),style:L(i.contentStyle)},[(y(!0),z(P,null,R(o.loadedItems,(l,r)=>T(t.$slots,"item",{key:r,item:l,options:o.getOptions(r)})),128))],6)]),e.showSpacer?(y(),z("div",{key:0,class:"p-virtualscroller-spacer",style:L(i.spacerStyle)},null,4)):A("",!0),!e.loaderDisabled&&e.showLoader&&i.d_loading?(y(),z("div",{key:1,class:V(o.loaderClass)},[t.$slots&&t.$slots.loader?(y(!0),z(P,{key:0},R(i.loaderArr,(l,r)=>T(t.$slots,"loader",{key:r,options:o.getLoaderOptions(r,o.isBoth()&&{numCols:t.d_numItemsInViewport.cols})})),128)):(y(),z("i",W))],2)):A("",!0)],38))}function j(t,s){s===void 0&&(s={});var e=s.insertAt;if(!(!t||typeof document=="undefined")){var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",e==="top"&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}var Z=`
.p-virtualscroller {
    position: relative;
    overflow: auto;
    contain: strict;
    -webkit-transform: translateZ(0);
            transform: translateZ(0);
    will-change: scroll-position;
    outline: 0 none;
}
.p-virtualscroller-content {
    position: absolute;
    top: 0;
    left: 0;
    contain: content;
    min-height: 100%;
    min-width: 100%;
    will-change: transform;
}
.p-virtualscroller-spacer {
    position: absolute;
    top: 0;
    left: 0;
    height: 1px;
    width: 1px;
    -webkit-transform-origin: 0 0;
            transform-origin: 0 0;
    pointer-events: none;
}
.p-virtualscroller .p-virtualscroller-loader {
    position: sticky;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}
.p-virtualscroller-loader.p-component-overlay {
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-align: center;
        -ms-flex-align: center;
            align-items: center;
    -webkit-box-pack: center;
        -ms-flex-pack: center;
            justify-content: center;
}
`;j(Z);E.render=_;export{E as s};
